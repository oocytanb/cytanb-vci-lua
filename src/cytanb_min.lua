-- SPDX-License-Identifier: MIT
-- Copyright (c) 2019 oO (https://github.com/oocytanb)
---@type cytanb @See `cytanb_annotations.lua`
local cytanb=(function()local b=function(_ENV)if not require or not vci then error('Invalid _ENV: Enable `__CYTANB_EXPORT_MODULE = true` line and pass valid _ENV of VCI-main if use cytanb.lua as module.',3)end;local c='__CYTANB_INSTANCE_ID'local d=true;local e=false;local f;local g;local h;local i;local j;local k;local l;local m;local n;local o;local p=false;local q;local r;local s;local a;local t=function(u,v)local w=u+v-1;return u,w,w+1 end;local x=function(u,v)local w=u-v+1;return w,u,w-1 end;local y=function(z,A,B,u,C)local D=B.searchMap;for E,v in pairs(B.lengthList)do if v<=0 then error('SearchPattern: Invalid parameter: searchLen <= 0')else local F,G,w=C(u,v)if F>=1 and G<=A then local H=string.sub(z,F,G)if D[H]then return true,v,w end end end end;return false,-1,-1 end;local I=function(z,B,u,C)if z==nil or B==nil then return false,-1 end;if B.hasEmptySearch then return true,0 end;local A=string.len(z)local J=B.repeatMin;local K=B.repeatMax;local L=K<0;local M=u;local N=0;local O=0;while L or O<K do local P,Q,w=y(z,A,B,M,C)if P then if Q<=0 then error('SearchPattern: Invalid parameter')end;M=w;N=N+Q;O=O+1 else break end end;if O>=J then return true,N else return false,-1 end end;local R=function(z,S,u,T,C,U)if z==nil or S==nil then return false,-1 end;local v=string.len(S)if T then local P=U(z,S)return P,P and v or-1 else if v==0 then return true,v end;local A=string.len(z)local F,G=C(u,v)if F>=1 and G<=A then local H=string.sub(z,F,G)local P=U(H,S)return P,P and v or-1 else return false,-1 end end end;local V=function(z,W,X)if W<=X then local Y=string.unicode(z,W,W)if Y>=0xDC00 or Y<=0xDFFF then return true,1,Y end end;return false,-1,nil end;local Z=function(z,W,X,_)if W<=X then local a0,a1=a.StringStartsWith(z,g,W)if a0 then local a2=W+a1;if a2<=X then local a3,a4=a.StringStartsWith(z,h,a2)if a3 then local a5=a2+a4;if a5<=X and string.unicode(z,a5,a5)==0x3E then local a6=tonumber(string.sub(z,a2,a2+a4-1))if a6<=_ then return true,a5-W+1,a6 end end end end end end;return false,-1,nil end;local a7=function(a8,a9)for aa=1,4 do local ab=a8[aa]-a9[aa]if ab~=0 then return ab end end;return 0 end;local ac;ac={__eq=function(a8,a9)return a8[1]==a9[1]and a8[2]==a9[2]and a8[3]==a9[3]and a8[4]==a9[4]end,__lt=function(a8,a9)return a7(a8,a9)<0 end,__le=function(a8,a9)return a7(a8,a9)<=0 end,__tostring=function(ad)local ae=ad[2]or 0;local af=ad[3]or 0;return string.format('%08x-%04x-%04x-%04x-%04x%08x',bit32.band(ad[1]or 0,0xFFFFFFFF),bit32.band(bit32.rshift(ae,16),0xFFFF),bit32.band(ae,0xFFFF),bit32.band(bit32.rshift(af,16),0xFFFF),bit32.band(af,0xFFFF),bit32.band(ad[4]or 0,0xFFFFFFFF))end,__concat=function(a8,a9)local ag=getmetatable(a8)local ah=ag==ac or type(ag)=='table'and ag.__concat==ac.__concat;local ai=getmetatable(a9)local aj=ai==ac or type(ai)=='table'and ai.__concat==ac.__concat;if not ah and not aj then error('UUID: attempt to concatenate illegal values',2)end;return(ah and ac.__tostring(a8)or a8)..(aj and ac.__tostring(a9)or a9)end}local ak='__CYTANB_CONST_VARIABLES'local al=function(table,am)local an=getmetatable(table)if an then local ao=rawget(an,ak)if ao then local ap=rawget(ao,am)if type(ap)=='function'then return ap(table,am)else return ap end end end;return nil end;local aq=function(table,am,ar)local an=getmetatable(table)if an then local ao=rawget(an,ak)if ao then if rawget(ao,am)~=nil then error('Cannot assign to read only field "'..am..'"',2)end end end;rawset(table,am,ar)end;local as=function(at,au)if not at then return false,false end;local av=at[a.TypeParameterName]if a.NillableHasValue(av)and a.NillableValue(av)~=au then return false,false end;return a.NillableIfHasValueOrElse(m[au],function(aw)local ax=aw.compositionFieldNames;local ay=aw.compositionFieldLength;local az=false;for aA,ar in pairs(at)do if ax[aA]then ay=ay-1;if ay<=0 and az then break end elseif aA~=a.TypeParameterName then az=true;if ay<=0 then break end end end;return ay<=0,az end,function()return false,false end)end;local aB=function(z)return a.StringReplace(a.StringReplace(z,a.EscapeSequenceTag,a.EscapeSequenceTag..a.EscapeSequenceTag),'/',a.SolidusTag)end;local aC=function(z,aD)local aE=string.len(z)local aF=string.len(a.EscapeSequenceTag)if aF>aE then return z end;local aG=''local aa=1;while aa<aE do local G,aH=string.find(z,a.EscapeSequenceTag,aa,true)if not G then if aa==1 then aG=z else aG=aG..string.sub(z,aa)end;break end;if G>aa then aG=aG..string.sub(z,aa,G-1)end;local aI=false;for aJ,aK in ipairs(l)do local P=a.StringStartsWith(z,aK.search,G)if P then aG=aG..(aD and aD(aK.tag)or aK.replacement)aa=G+string.len(aK.search)aI=true;break end end;if not aI then aG=aG..a.EscapeSequenceTag;aa=aH+1 end end;return aG end;local aL;aL=function(aM,aN)if type(aM)~='table'then return aM end;if not aN then aN={}end;if aN[aM]then error('circular reference')end;aN[aM]=true;local aO={}for aA,ar in pairs(aM)do local aP=type(aA)local aQ;if aP=='string'then aQ=aB(aA)elseif aP=='number'then aQ=tostring(aA)..a.ArrayNumberTag else aQ=aA end;local aR=type(ar)if aR=='string'then aO[aQ]=aB(ar)elseif aR=='number'and ar<0 then aO[tostring(aQ)..a.NegativeNumberTag]=tostring(ar)else aO[aQ]=aL(ar,aN)end end;aN[aM]=nil;return aO end;local aS;aS=function(aO,aT)if type(aO)~='table'then return aO end;local aM={}for aA,ar in pairs(aO)do local aQ;local aU=false;if type(aA)=='string'then local aV=false;aQ=aC(aA,function(aW)if aW==a.NegativeNumberTag then aU=true elseif aW==a.ArrayNumberTag then aV=true end;return nil end)if aV then aQ=tonumber(aQ)or aQ end else aQ=aA;aU=false end;if aU and type(ar)=='string'then aM[aQ]=tonumber(ar)elseif type(ar)=='string'then aM[aQ]=aC(ar,function(aW)return n[aW]end)else aM[aQ]=aS(ar,aT)end end;if not aT then a.NillableIfHasValue(aM[a.TypeParameterName],function(aX)a.NillableIfHasValue(m[aX],function(aw)local aY,az=aw.fromTableFunc(aM)if not az then a.NillableIfHasValue(aY,function(ad)aM=ad end)end end)end)end;return aM end;local aZ={['nil']=function(a_)return nil end,['number']=function(a_)return tonumber(a_)end,['string']=function(a_)return tostring(a_)end,['boolean']=function(a_)if a_ then return true else return false end end}local b0=function(a_,b1)local b2=type(a_)if b2==b1 then return a_ else local b3=aZ[b1]if b3 then return b3(a_)else return nil end end end;local b4=function(b5,b6)if b6 and type(b6)=='table'then local b7={}for am,a_ in pairs(b5)do local b8=b6[am]local b9;if b8==nil then b9=a_ else local ba=b0(b8,type(a_))if ba==nil then b9=a_ else b9=ba end end;b7[am]=b9 end;b7[a.MessageOriginalSender]=b5;return b7 else return b5 end end;local bb=function(bc,bd,b6,be)local bf={type=be,name='',commentSource=''}local bg={[a.MessageValueParameterName]=tostring(bd),[a.MessageSenderOverride]=type(b6)=='table'and a.Extend(bf,b6,true)or bf}a.EmitMessage(bc,bg)end;local bh=function(bc,bi,bj)local bk,bl=(function()local b3=function(b5,bm,bg)local bd=tostring(bg[a.MessageValueParameterName]or'')bj(b5,bi,bd)end;local bk=a.OnMessage(bc,b3)local bl=a.OnMessage(bi,b3)return bk,bl end)()return{Off=function()bk.Off()bl.Off()end}end;a={InstanceID=function()if r==''then r=vci.state.Get(c)or''if d and not e and r==''then e=true;vci.message.Emit(a.InstanceIDStatePatchingMessageName,'')end end;return r end,ClientID=function()return s end,NillableHasValue=function(bn)return bn~=nil end,NillableValue=function(bn)if bn==nil then error('nillable: value is nil',2)end;return bn end,NillableValueOrDefault=function(bn,bo)if bn==nil then if bo==nil then error('nillable: defaultValue is nil',2)end;return bo else return bn end end,NillableIfHasValue=function(bn,bj)if bn==nil then return nil else return bj(bn)end end,NillableIfHasValueOrElse=function(bn,bj,bp)if bn==nil then return bp()else return bj(bn)end end,MakeSearchPattern=function(bq,br,bs)local J=br and math.floor(br)or 1;if J<0 then error('SearchPattern: Invalid parameter: optRepeatMin < 0')end;local K=bs and math.floor(bs)or J;if K>=0 and K<J then error('SearchPattern: Invalid parameter: repeatMax < repeatMin')end;local bt=K==0;local D={}local bu={}local bv={}local bw=0;for bx,by in pairs(bq)do local v=string.len(by)if v==0 then bt=true else D[by]=v;if not bu[v]then bu[v]=true;bw=bw+1;bv[bw]=v end end end;table.sort(bv,function(bz,P)return bz>P end)return{hasEmptySearch=bt,searchMap=D,lengthList=bv,repeatMin=J,repeatMax=K}end,StringStartsWith=function(z,S,bA)local M=bA and math.max(1,math.floor(bA))or 1;if type(S)=='table'then return I(z,S,M,t)else return R(z,S,M,M==1,t,string.startsWith)end end,StringEndsWith=function(z,S,bB)if z==nil then return false,-1 end;local A=string.len(z)local M=bB and math.min(A,math.floor(bB))or A;if type(S)=='table'then return I(z,S,M,x)else return R(z,S,M,M==A,x,string.endsWith)end end,
StringTrimStart=function(z,bC)if z==nil or z==''then return z end;local P,Q=a.StringStartsWith(z,bC or f)if P and Q>=1 then return string.sub(z,Q+1)else return z end end,StringTrimEnd=function(z,bC)if z==nil or z==''then return z end;local P,Q=a.StringEndsWith(z,bC or f)if P and Q>=1 then return string.sub(z,1,string.len(z)-Q)else return z end end,StringTrim=function(z,bC)return a.StringTrimEnd(a.StringTrimStart(z,bC),bC)end,StringReplace=function(z,bD,bE)local bF;local aE=string.len(z)if bD==''then bF=bE;for aa=1,aE do bF=bF..string.sub(z,aa,aa)..bE end else bF=''local aa=1;while true do local F,G=string.find(z,bD,aa,true)if F then bF=bF..string.sub(z,aa,F-1)..bE;aa=G+1;if aa>aE then break end else bF=aa==1 and z or bF..string.sub(z,aa)break end end end;return bF end,StringEachCode=function(z,bj,bG,aa,bH,bI,bJ,bK)local aE=string.len(z)if aE==0 then return 0,0,0 end;local bL=aa and math.floor(aa)or 1;local X=bH and math.floor(bH)or aE;local _=math.min(bK or 3182,0x1FFFFF)if bL<=0 or X>aE or bL>X then error('StringEachCode: invalid range')end;local bM=0;local bN=bL;local bO=bN;while bN<=X do local F=bN;local Y=string.unicode(z,bN,bN)if Y>=0xD800 and Y<=0xDBFF then local P,Q=V(z,bN+1,X)if P then bN=bN+Q end elseif bI and Y==0x3C then local P,Q,a6=Z(z,bN+1,X,_)if P and(not bJ or bJ(a6))then bN=bN+Q end end;bM=bM+1;bO=bN;if bj and bj(string.sub(z,F,bN),bM,bG,F,bN)==false then break end;bN=bN+1 end;return bM,bL,bO end,SetConst=function(bD,bc,ad)if type(bD)~='table'then error('Cannot set const to non-table target',2)end;local bP=getmetatable(bD)local an=bP or{}local bQ=rawget(an,ak)if rawget(bD,bc)~=nil then error('Non-const field "'..bc..'" already exists',2)end;if not bQ then bQ={}rawset(an,ak,bQ)an.__index=al;an.__newindex=aq end;rawset(bQ,bc,ad)if not bP then setmetatable(bD,an)end;return bD end,SetConstEach=function(bD,bR)for aA,ar in pairs(bR)do a.SetConst(bD,aA,ar)end;return bD end,Extend=function(bD,bS,bT,bU,aN)if bD==bS or type(bD)~='table'or type(bS)~='table'then return bD end;if bT then if not aN then aN={}end;if aN[bS]then error('circular reference')end;aN[bS]=true end;for aA,ar in pairs(bS)do if bT and type(ar)=='table'then local bV=bD[aA]bD[aA]=a.Extend(type(bV)=='table'and bV or{},ar,bT,bU,aN)else bD[aA]=ar end end;if not bU then local bW=getmetatable(bS)if type(bW)=='table'then if bT then local bX=getmetatable(bD)setmetatable(bD,a.Extend(type(bX)=='table'and bX or{},bW,true))else setmetatable(bD,bW)end end end;if bT then aN[bS]=nil end;return bD end,Vars=function(ar,bY,bZ,aN)local b_;if bY then b_=bY~='__NOLF'else bY='  'b_=true end;if not bZ then bZ=''end;if not aN then aN={}end;local c0=type(ar)if c0=='table'then aN[ar]=aN[ar]and aN[ar]+1 or 1;local c1=b_ and bZ..bY or''local z='('..tostring(ar)..') {'local c2=true;for am,a_ in pairs(ar)do if c2 then c2=false else z=z..(b_ and','or', ')end;if b_ then z=z..'\n'..c1 end;if type(a_)=='table'and aN[a_]and aN[a_]>0 then z=z..am..' = ('..tostring(a_)..')'else z=z..am..' = '..a.Vars(a_,bY,c1,aN)end end;if not c2 and b_ then z=z..'\n'..bZ end;z=z..'}'aN[ar]=aN[ar]-1;if aN[ar]<=0 then aN[ar]=nil end;return z elseif c0=='function'or c0=='thread'or c0=='userdata'then return'('..c0 ..')'elseif c0=='string'then return'('..c0 ..') '..string.format('%q',ar)else return'('..c0 ..') '..tostring(ar)end end,PosixTime=(function()local c3=os.time({year=1970,month=1,day=2,hour=0,min=0,sec=0,isdst=false})if not c3 then error('unexpected')end;local c4=os.date('!*t',c3)local c5=(((c4.day-1)*24+c4.hour)*60+c4.min)*60+c4.sec;return function(c6)return os.difftime(c6 or os.time(),c3)+c5 end end)(),GetLogLevel=function()return o end,SetLogLevel=function(c7)o=c7 end,IsOutputLogLevelEnabled=function()return p end,SetOutputLogLevelEnabled=function(c8)p=not not c8 end,Log=function(c7,...)if c7<=o then local c9=p and(q[c7]or'LOG LEVEL '..tostring(c7))..' | 'or''local ca=table.pack(...)if ca.n==1 then local ar=ca[1]if ar~=nil then local z=type(ar)=='table'and a.Vars(ar)or tostring(ar)print(p and c9 ..z or z)else print(c9)end else local z=c9;for aa=1,ca.n do local ar=ca[aa]if ar~=nil then z=z..(type(ar)=='table'and a.Vars(ar)or tostring(ar))end end;print(z)end end end,LogFatal=function(...)a.Log(a.LogLevelFatal,...)end,LogError=function(...)a.Log(a.LogLevelError,...)end,LogWarn=function(...)a.Log(a.LogLevelWarn,...)end,LogInfo=function(...)a.Log(a.LogLevelInfo,...)end,LogDebug=function(...)a.Log(a.LogLevelDebug,...)end,LogTrace=function(...)a.Log(a.LogLevelTrace,...)end,FatalLog=function(...)a.LogFatal(...)end,ErrorLog=function(...)a.LogError(...)end,WarnLog=function(...)a.LogWarn(...)end,InfoLog=function(...)a.LogInfo(...)end,DebugLog=function(...)a.LogDebug(...)end,TraceLog=function(...)a.LogTrace(...)end,ListToMap=function(cb,cc)local cd={}if cc==nil then for aA,ar in pairs(cb)do cd[ar]=ar end elseif type(cc)=='function'then for aA,ar in pairs(cb)do local ce,cf=cc(ar)cd[ce]=cf end else for aA,ar in pairs(cb)do cd[ar]=cc end end;return cd end,Round=function(cg,ch)if ch then local ci=10^ch;return math.floor(cg*ci+0.5)/ci else return math.floor(cg+0.5)end end,Clamp=function(ad,cj,ck)return math.max(cj,math.min(ad,ck))end,Lerp=function(bz,P,c0)if c0<=0.0 then return bz elseif c0>=1.0 then return P else return bz+(P-bz)*c0 end end,LerpUnclamped=function(bz,P,c0)if c0==0.0 then return bz elseif c0==1.0 then return P else return bz+(P-bz)*c0 end end,PingPong=function(c0,cl)if cl==0 then return 0,1 end;local cm=math.floor(c0/cl)local cn=c0-cm*cl;if cm<0 then if(cm+1)%2==0 then return cl-cn,-1 else return cn,1 end else if cm%2==0 then return cn,1 else return cl-cn,-1 end end end,VectorApproximatelyEquals=function(co,cp)return(co-cp).sqrMagnitude<1E-10 end,QuaternionApproximatelyEquals=function(co,cp)local cq=Quaternion.Dot(co,cp)return cq<1.0+1E-06 and cq>1.0-1E-06 end,QuaternionToAngleAxis=function(cr)local cm=cr.normalized;local cs=math.acos(cm.w)local ct=math.sin(cs)local cu=math.deg(cs*2.0)local cv;if math.abs(ct)<=Quaternion.kEpsilon then cv=Vector3.right else local F=1.0/ct;cv=Vector3.__new(cm.x*F,cm.y*F,cm.z*F)end;return cu,cv end,QuaternionTwist=function(cr,cw)if cw.sqrMagnitude<Vector3.kEpsilonNormalSqrt then return Quaternion.identity end;local cx=Vector3.__new(cr.x,cr.y,cr.z)if cx.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cy=Vector3.Project(cx,cw)if cy.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cz=Quaternion.__new(cy.x,cy.y,cy.z,cr.w)cz.Normalize()return cz else return Quaternion.AngleAxis(0,cw)end else local cA=a.QuaternionToAngleAxis(cr)return Quaternion.AngleAxis(cA,cw)end end,ApplyQuaternionToVector3=function(cr,cB)local cC=cr.w*cB.x+cr.y*cB.z-cr.z*cB.y;local cD=cr.w*cB.y-cr.x*cB.z+cr.z*cB.x;local cE=cr.w*cB.z+cr.x*cB.y-cr.y*cB.x;local cF=-cr.x*cB.x-cr.y*cB.y-cr.z*cB.z;return Vector3.__new(cF*-cr.x+cC*cr.w+cD*-cr.z-cE*-cr.y,cF*-cr.y-cC*-cr.z+cD*cr.w+cE*-cr.x,cF*-cr.z+cC*-cr.y-cD*-cr.x+cE*cr.w)end,RotateAround=function(cG,cH,cI,cJ)return cI+cJ*(cG-cI),cJ*cH end,Random32=function()return bit32.band(math.random(-2147483648,2147483646),0xFFFFFFFF)end,RandomUUID=function()return a.UUIDFromNumbers(a.Random32(),bit32.bor(0x4000,bit32.band(a.Random32(),0xFFFF0FFF)),bit32.bor(0x80000000,bit32.band(a.Random32(),0x3FFFFFFF)),a.Random32())end,UUIDString=function(cK)return ac.__tostring(cK)end,UUIDFromNumbers=function(...)local cL=...local c0=type(cL)local cM,cN,cO,cP;if c0=='table'then cM=cL[1]cN=cL[2]cO=cL[3]cP=cL[4]else cM,cN,cO,cP=...end;local cK={bit32.band(cM or 0,0xFFFFFFFF),bit32.band(cN or 0,0xFFFFFFFF),bit32.band(cO or 0,0xFFFFFFFF),bit32.band(cP or 0,0xFFFFFFFF)}setmetatable(cK,ac)return cK end,
UUIDFromString=function(z)local aE=string.len(z)if aE==32 then local cK=a.UUIDFromNumbers(0,0,0,0)for aa=1,4 do local F=1+(aa-1)*8;if not a.StringStartsWith(z,j,F)then return nil end;cK[aa]=tonumber(string.sub(z,F,F+7),16)end;return cK elseif aE==36 then if not a.StringStartsWith(z,j,1)then return nil end;local cM=tonumber(string.sub(z,1,8),16)if not a.StringStartsWith(z,'-',9)or not a.StringStartsWith(z,i,10)or not a.StringStartsWith(z,'-',14)or not a.StringStartsWith(z,i,15)then return nil end;local cN=tonumber(string.sub(z,10,13)..string.sub(z,15,18),16)if not a.StringStartsWith(z,'-',19)or not a.StringStartsWith(z,i,20)or not a.StringStartsWith(z,'-',24)or not a.StringStartsWith(z,i,25)then return nil end;local cO=tonumber(string.sub(z,20,23)..string.sub(z,25,28),16)if not a.StringStartsWith(z,j,29)then return nil end;local cP=tonumber(string.sub(z,29),16)return a.UUIDFromNumbers(cM,cN,cO,cP)else return nil end end,ParseUUID=function(z)return a.UUIDFromString(z)end,CreateCircularQueue=function(cQ)if type(cQ)~='number'or cQ<1 then error('CreateCircularQueue: Invalid argument: capacity = '..tostring(cQ),2)end;local self;local cR=math.floor(cQ)local aG={}local cS=0;local cT=0;local cU=0;self={Size=function()return cU end,Clear=function()cS=0;cT=0;cU=0 end,IsEmpty=function()return cU==0 end,Offer=function(cV)aG[cS+1]=cV;cS=(cS+1)%cR;if cU<cR then cU=cU+1 else cT=(cT+1)%cR end;return true end,OfferFirst=function(cV)cT=(cR+cT-1)%cR;aG[cT+1]=cV;if cU<cR then cU=cU+1 else cS=(cR+cS-1)%cR end;return true end,Poll=function()if cU==0 then return nil else local cV=aG[cT+1]cT=(cT+1)%cR;cU=cU-1;return cV end end,PollLast=function()if cU==0 then return nil else cS=(cR+cS-1)%cR;local cV=aG[cS+1]cU=cU-1;return cV end end,Peek=function()if cU==0 then return nil else return aG[cT+1]end end,PeekLast=function()if cU==0 then return nil else return aG[(cR+cS-1)%cR+1]end end,Get=function(cW)if cW<1 or cW>cU then a.LogError('CreateCircularQueue.Get: index is outside the range: '..cW)return nil end;return aG[(cT+cW-1)%cR+1]end,IsFull=function()return cU>=cR end,MaxSize=function()return cR end}return self end,DetectClicks=function(cX,cY,cZ)local bM=cX or 0;local c_=cZ or TimeSpan.FromMilliseconds(500)local d0=vci.me.Time;local d1=cY and d0>cY+c_ and 1 or bM+1;return d1,d0 end,ColorRGBToHSV=function(d2)local cn=math.max(0.0,math.min(d2.r,1.0))local d3=math.max(0.0,math.min(d2.g,1.0))local P=math.max(0.0,math.min(d2.b,1.0))local ck=math.max(cn,d3,P)local cj=math.min(cn,d3,P)local d4=ck-cj;local ap;if d4==0.0 then ap=0.0 elseif ck==cn then ap=(d3-P)/d4/6.0 elseif ck==d3 then ap=(2.0+(P-cn)/d4)/6.0 else ap=(4.0+(cn-d3)/d4)/6.0 end;if ap<0.0 then ap=ap+1.0 end;local d5=ck==0.0 and d4 or d4/ck;local ar=ck;return ap,d5,ar end,ColorFromARGB32=function(d6)local d7=type(d6)=='number'and d6 or 0xFF000000;return Color.__new(bit32.band(bit32.rshift(d7,16),0xFF)/0xFF,bit32.band(bit32.rshift(d7,8),0xFF)/0xFF,bit32.band(d7,0xFF)/0xFF,bit32.band(bit32.rshift(d7,24),0xFF)/0xFF)end,ColorToARGB32=function(d2)return bit32.bor(bit32.lshift(bit32.band(a.Round(0xFF*d2.a),0xFF),24),bit32.lshift(bit32.band(a.Round(0xFF*d2.r),0xFF),16),bit32.lshift(bit32.band(a.Round(0xFF*d2.g),0xFF),8),bit32.band(a.Round(0xFF*d2.b),0xFF))end,ColorFromIndex=function(d8,d9,da,db,dc)local dd=math.max(math.floor(d9 or a.ColorHueSamples),1)local de=dc and dd or dd-1;local df=math.max(math.floor(da or a.ColorSaturationSamples),1)local dg=math.max(math.floor(db or a.ColorBrightnessSamples),1)local cW=a.Clamp(math.floor(d8 or 0),0,dd*df*dg-1)local dh=cW%dd;local di=math.floor(cW/dd)local F=di%df;local dj=math.floor(di/df)if dc or dh~=de then local ap=dh/de;local d5=(df-F)/df;local ar=(dg-dj)/dg;return Color.HSVToRGB(ap,d5,ar)else local ar=(dg-dj)/dg*F/(df-1)return Color.HSVToRGB(0.0,0.0,ar)end end,ColorToIndex=function(d2,d9,da,db,dc)local dd=math.max(math.floor(d9 or a.ColorHueSamples),1)local de=dc and dd or dd-1;local df=math.max(math.floor(da or a.ColorSaturationSamples),1)local dg=math.max(math.floor(db or a.ColorBrightnessSamples),1)local ap,d5,ar=a.ColorRGBToHSV(d2)local F=a.Round(df*(1.0-d5))if dc or F<df then local dk=a.Round(de*ap)if dk>=de then dk=0 end;if F>=df then F=df-1 end;local dj=math.min(dg-1,a.Round(dg*(1.0-ar)))return dk+dd*(F+df*dj)else local dl=a.Round((df-1)*ar)if dl==0 then local dm=a.Round(dg*(1.0-ar))if dm>=dg then return dd-1 else return dd*(1+a.Round(ar*(df-1)/(dg-dm)*dg)+df*dm)-1 end else return dd*(1+dl+df*a.Round(dg*(1.0-ar*(df-1)/dl)))-1 end end end,ColorToTable=function(d2)return d2 and{[a.TypeParameterName]=a.ColorTypeName,r=d2.r,g=d2.g,b=d2.b,a=d2.a}or nil end,ColorFromTable=function(at)local P,az=as(at,a.ColorTypeName)return P and Color.__new(at.r,at.g,at.b,at.a)or nil,az end,Vector2ToTable=function(ad)return ad and{[a.TypeParameterName]=a.Vector2TypeName,x=ad.x,y=ad.y}or nil end,Vector2FromTable=function(at)local P,az=as(at,a.Vector2TypeName)return P and Vector2.__new(at.x,at.y)or nil,az end,Vector3ToTable=function(ad)return ad and{[a.TypeParameterName]=a.Vector3TypeName,x=ad.x,y=ad.y,z=ad.z}or nil end,Vector3FromTable=function(at)local P,az=as(at,a.Vector3TypeName)return P and Vector3.__new(at.x,at.y,at.z)or nil,az end,Vector4ToTable=function(ad)return ad and{[a.TypeParameterName]=a.Vector4TypeName,x=ad.x,y=ad.y,z=ad.z,w=ad.w}or nil end,Vector4FromTable=function(at)local P,az=as(at,a.Vector4TypeName)return P and Vector4.__new(at.x,at.y,at.z,at.w)or nil,az end,QuaternionToTable=function(ad)return ad and{[a.TypeParameterName]=a.QuaternionTypeName,x=ad.x,y=ad.y,z=ad.z,w=ad.w}or nil end,QuaternionFromTable=function(at)local P,az=as(at,a.QuaternionTypeName)return P and Quaternion.__new(at.x,at.y,at.z,at.w)or nil,az end,TableToSerializable=function(aM)return aL(aM)end,TableFromSerializable=function(aO,aT)return aS(aO,aT)end,TableToSerialiable=function(aM)return aL(aM)end,TableFromSerialiable=function(aO,aT)return aS(aO,aT)end,EmitMessage=function(bc,bg)local aO=a.NillableIfHasValueOrElse(bg,function(aM)if type(aM)~='table'then error('EmitMessage: Invalid argument: table expected',3)end;return a.TableToSerializable(aM)end,function()return{}end)local dn=a.InstanceID()if dn==''then a.LogWarn('EmitMessage: InstanceID is empty. Consider using the CreateUpdateRoutine function.')end;aO[a.InstanceIDParameterName]=dn;vci.message.Emit(bc,json.serialize(aO))end,OnMessage=function(bc,bj)local b3=function(b5,bm,bd)if type(bd)=='string'and string.startsWith(bd,'{')then local dp,aO=pcall(json.parse,bd)if dp and type(aO)=='table'and aO[a.InstanceIDParameterName]then local dq=a.TableFromSerializable(aO)bj(b4(b5,dq[a.MessageSenderOverride]),bm,dq)return end end;bj(b5,bm,{[a.MessageValueParameterName]=bd})end;vci.message.On(bc,b3)return{Off=function()if b3 then b3=nil end end}end,OnInstanceMessage=function(bc,bj)local b3=function(b5,bm,bg)local dn=a.InstanceID()if dn~=''and dn==bg[a.InstanceIDParameterName]then bj(b5,bm,bg)end end;return a.OnMessage(bc,b3)end,EmitCommentMessage=function(bd,b6)bb(a.DedicatedCommentMessageName,bd,b6,'comment')end,OnCommentMessage=function(bj)return bh(a.DedicatedCommentMessageName,'comment',bj)end,EmitNotificationMessage=function(bd,b6)bb(a.DedicatedNotificationMessageName,bd,b6,'notification')end,OnNotificationMessage=function(bj)return bh(a.DedicatedNotificationMessageName,'notification',bj)end,GetEffekseerEmitterMap=function(bc)local dr=vci.assets.GetEffekseerEmitters(bc)if not dr then return nil end;local cd={}for aa,ds in pairs(dr)do cd[ds.EffectName]=ds end;return cd end,ParseTagString=function(z)local bN=string.find(z,'#',1,true)if not bN then return{},z end;local dt={}local du=string.sub(z,1,bN-1)bN=bN+1;local aE=string.len(z)while bN<=aE do local dv,dw=a.StringStartsWith(z,k,bN)if dv then local dx=bN+dw;local dy=string.sub(z,bN,dx-1)local dz=dy;bN=dx;if bN<=aE and a.StringStartsWith(z,'=',bN)then bN=bN+1;local dA,dB=a.StringStartsWith(z,k,bN)if dA then local dC=bN+dB;dz=string.sub(z,bN,dC-1)bN=dC else dz=''end end;dt[dy]=dz end;bN=string.find(z,'#',bN,true)if not bN then break end;bN=bN+1 end;return dt,du end,
CalculateSIPrefix=(function()local dD=9;local dE={'y','z','a','f','p','n','u','m','','k','M','G','T','P','E','Z','Y'}local dF=#dE;return function(cg)local dG=cg==0 and 0 or a.Clamp(math.floor(math.log(math.abs(cg),1000)),1-dD,dF-dD)return dG==0 and cg or cg/1000^dG,dE[dD+dG],dG*3 end end)(),CreateLocalSharedProperties=function(dH,dI)local dJ=TimeSpan.FromSeconds(5)local dK='33657f0e-7c44-4ee7-acd9-92dd8b8d807a'local dL='__CYTANB_LOCAL_SHARED_PROPERTIES_LISTENER_MAP'if type(dH)~='string'or string.len(dH)<=0 or type(dI)~='string'or string.len(dI)<=0 then error('LocalSharedProperties: Invalid arguments',2)end;local dM=_G[dK]if not dM then dM={}_G[dK]=dM end;dM[dI]=vci.me.UnscaledTime;local dN=_G[dH]if not dN then dN={[dL]={}}_G[dH]=dN end;local dO=dN[dL]local self;self={GetLspID=function()return dH end,GetLoadID=function()return dI end,GetProperty=function(am,bo)local ad=dN[am]if ad==nil then return bo else return ad end end,SetProperty=function(am,ad)if am==dL then error('LocalSharedProperties: Invalid argument: key = ',am,2)end;local d0=vci.me.UnscaledTime;local dP=dN[am]dN[am]=ad;for dQ,dn in pairs(dO)do local c0=dM[dn]if c0 and c0+dJ>=d0 then dQ(self,am,ad,dP)else dQ(self,a.LOCAL_SHARED_PROPERTY_EXPIRED_KEY,true,false)dO[dQ]=nil;dM[dn]=nil end end end,Clear=function()for am,ad in pairs(dN)do if am~=dL then self.SetProperty(am,nil)end end end,Each=function(bj)for am,ad in pairs(dN)do if am~=dL and bj(ad,am,self)==false then return false end end end,AddListener=function(dQ)dO[dQ]=dI end,RemoveListener=function(dQ)dO[dQ]=nil end,UpdateAlive=function()dM[dI]=vci.me.UnscaledTime end}return self end,EstimateFixedTimestep=function(dR)local dS=1.0;local dT=1000.0;local dU=TimeSpan.FromSeconds(0.02)local dV=0xFFFF;local dW=a.CreateCircularQueue(64)local dX=TimeSpan.FromSeconds(5)local dY=TimeSpan.FromSeconds(30)local dZ=false;local d_=vci.me.Time;local e0=a.Random32()local e1=Vector3.__new(bit32.bor(0x400,bit32.band(e0,0x1FFF)),bit32.bor(0x400,bit32.band(bit32.rshift(e0,16),0x1FFF)),0.0)dR.SetPosition(e1)dR.SetRotation(Quaternion.identity)dR.SetVelocity(Vector3.zero)dR.SetAngularVelocity(Vector3.zero)dR.AddForce(Vector3.__new(0.0,0.0,dS*dT))local self={Timestep=function()return dU end,Precision=function()return dV end,IsFinished=function()return dZ end,Update=function()if dZ then return dU end;local e2=vci.me.Time-d_;local e3=e2.TotalSeconds;if e3<=Vector3.kEpsilon then return dU end;local e4=dR.GetPosition().z-e1.z;local e5=e4/e3;local e6=e5/dT;if e6<=Vector3.kEpsilon then return dU end;dW.Offer(e6)local e7=dW.Size()if e7>=2 and e2>=dX then local e8=0.0;for aa=1,e7 do e8=e8+dW.Get(aa)end;local e9=e8/e7;local ea=0.0;for aa=1,e7 do ea=ea+(dW.Get(aa)-e9)^2 end;local eb=ea/e7;if eb<dV then dV=eb;dU=TimeSpan.FromSeconds(e9)end;if e2>dY then dZ=true;dR.SetPosition(e1)dR.SetRotation(Quaternion.identity)dR.SetVelocity(Vector3.zero)dR.SetAngularVelocity(Vector3.zero)end else dU=TimeSpan.FromSeconds(e6)end;return dU end}return self end,AlignSubItemOrigin=function(ec,ed,ee)local ef=ec.GetRotation()if not a.QuaternionApproximatelyEquals(ed.GetRotation(),ef)then ed.SetRotation(ef)end;local eg=ec.GetPosition()if not a.VectorApproximatelyEquals(ed.GetPosition(),eg)then ed.SetPosition(eg)end;if ee then ed.SetVelocity(Vector3.zero)ed.SetAngularVelocity(Vector3.zero)end end,CreateSubItemGlue=function()local eh={}local self;self={Contains=function(ei,ej)return a.NillableIfHasValueOrElse(eh[ei],function(bR)return a.NillableHasValue(bR[ej])end,function()return false end)end,Add=function(ei,ek,ee)if not ei or not ek then local el='SubItemGlue.Add: Invalid arguments '..(not ei and', parent = '..tostring(ei)or'')..(not ek and', children = '..tostring(ek)or'')error(el,2)end;local bR=a.NillableIfHasValueOrElse(eh[ei],function(em)return em end,function()local em={}eh[ei]=em;return em end)if type(ek)=='table'then for am,a_ in pairs(ek)do bR[a_]={velocityReset=not not ee}end else bR[ek]={velocityReset=not not ee}end end,Remove=function(ei,ej)return a.NillableIfHasValueOrElse(eh[ei],function(bR)if a.NillableHasValue(bR[ej])then bR[ej]=nil;return true else return false end end,function()return false end)end,RemoveParent=function(ei)if a.NillableHasValue(eh[ei])then eh[ei]=nil;return true else return false end end,RemoveAll=function()eh={}return true end,Each=function(bj,en)return a.NillableIfHasValueOrElse(en,function(ei)return a.NillableIfHasValue(eh[ei],function(bR)for ej,eo in pairs(bR)do if bj(ej,ei,self)==false then return false end end end)end,function()for ei,bR in pairs(eh)do if self.Each(bj,ei)==false then return false end end end)end,Update=function(ep)for ei,bR in pairs(eh)do local eq=ei.GetPosition()local er=ei.GetRotation()for ej,eo in pairs(bR)do if ep or ej.IsMine then if not a.QuaternionApproximatelyEquals(ej.GetRotation(),er)then ej.SetRotation(er)end;if not a.VectorApproximatelyEquals(ej.GetPosition(),eq)then ej.SetPosition(eq)end;if eo.velocityReset then ej.SetVelocity(Vector3.zero)ej.SetAngularVelocity(Vector3.zero)end end end end end}return self end,CreateUpdateRoutine=function(es,et,eu,ev)return coroutine.wrap(function()local ew=ev or TimeSpan.FromSeconds(60)local ex=vci.me.UnscaledTime;local ey=ex;local cY=vci.me.Time;local ez=true;while a.InstanceID()==''do local eA=vci.me.UnscaledTime;if eA-ew>ex then local eB='TIMEOUT: Could not receive Instance ID.'a.LogError(eB)if eu then eu(eB)end;return-1 end;ey=eA;cY=vci.me.Time;ez=false;coroutine.yield(100)end;if ez then ey=vci.me.UnscaledTime;cY=vci.me.Time;coroutine.yield(100)end;if et then et()end;while true do local d0=vci.me.Time;local eC=d0-cY;local eA=vci.me.UnscaledTime;local eD=eA-ey;es(eC,eD)cY=d0;ey=eA;coroutine.yield(100)end end)end,
CreateSlideSwitch=function(eE)local eF=a.NillableValue(eE.colliderItem)local eG=a.NillableValue(eE.baseItem)local eH=a.NillableValue(eE.knobItem)local eI=a.NillableValueOrDefault(eE.minValue,0)local eJ=a.NillableValueOrDefault(eE.maxValue,10)if eI>=eJ then error('SlideSwitch: Invalid argument: minValue >= maxValue',2)end;local eK=(eI+eJ)*0.5;local eL=function(a_)local eM,eN=a.PingPong(a_-eI,eJ-eI)return eM+eI,eN end;local ad=eL(a.NillableValueOrDefault(eE.value,0))local eO=a.NillableIfHasValueOrElse(eE.tickFrequency,function(eP)if eP<=0 then error('SlideSwitch: Invalid argument: tickFrequency <= 0',3)end;return math.min(eP,eJ-eI)end,function()return(eJ-eI)/10.0 end)local eQ=a.NillableIfHasValueOrElse(eE.tickVector,function(cv)return Vector3.__new(cv.x,cv.y,cv.z)end,function()return Vector3.__new(0.01,0.0,0.0)end)local eR=eQ.magnitude;if eR<Vector3.kEpsilon then error('SlideSwitch: Invalid argument: tickVector is too small',2)end;local eS=a.NillableValueOrDefault(eE.snapToTick,true)local eT=eE.valueTextName;local eU=a.NillableValueOrDefault(eE.valueToText,tostring)local eV=TimeSpan.FromMilliseconds(1000)local eW=TimeSpan.FromMilliseconds(50)local eX,eY;local dO={}local self;local eZ=false;local e_=0;local f0=false;local f1=TimeSpan.Zero;local f2=TimeSpan.Zero;local f3=function(f4,f5)if f5 or f4~=ad then local dP=ad;ad=f4;for dQ,ar in pairs(dO)do dQ(self,ad,dP)end end;eH.SetLocalPosition((f4-eK)/eO*eQ)if eT then vci.assets.SetText(eT,eU(f4,self))end end;local f6=function()local f7=eX()local f8,f9=eL(f7)local fa=f7+eO;local fb,fc=eL(fa)assert(fb)local f4;if f9==fc or f8==eJ or f8==eI then f4=fa else f4=f9>=0 and eJ or eI end;f2=vci.me.UnscaledTime;if f4==eJ or f4==eI then f1=f2 end;eY(f4)end;a.NillableIfHasValueOrElse(eE.lsp,function(fd)if not a.NillableHasValue(eE.propertyName)then error('SlideSwitch: Invalid argument: propertyName is nil',3)end;local fe=a.NillableValue(eE.propertyName)eX=function()return fd.GetProperty(fe,ad)end;eY=function(a_)fd.SetProperty(fe,a_)end;fd.AddListener(function(bS,am,ff,fg)if am==fe then f3(eL(ff),true)end end)end,function()local ff=ad;eX=function()return ff end;eY=function(a_)ff=a_;f3(eL(a_),true)end end)self={GetColliderItem=function()return eF end,GetBaseItem=function()return eG end,GetKnobItem=function()return eH end,GetMinValue=function()return eI end,GetMaxValue=function()return eJ end,GetValue=function()return ad end,GetScaleValue=function(fh,fi)assert(fh<=fi)return fh+(fi-fh)*(ad-eI)/(eJ-eI)end,SetValue=function(a_)eY(eL(a_))end,GetTickFrequency=function()return eO end,IsSnapToTick=function()return eS end,AddListener=function(dQ)dO[dQ]=dQ end,RemoveListener=function(dQ)dO[dQ]=nil end,DoUse=function()if not eZ then f0=true;f1=vci.me.UnscaledTime;f6()end end,DoUnuse=function()f0=false end,DoGrab=function()if not f0 then eZ=true;e_=(ad-eK)/eO end end,DoUngrab=function()eZ=false end,Update=function()if eZ then local fj=eF.GetPosition()-eG.GetPosition()local fk=eH.GetRotation()*eQ;local fl=Vector3.Project(fj,fk)local fm=(Vector3.Dot(fk,fl)>=0 and 1 or-1)*fl.magnitude/eR+e_;local fn=(eS and a.Round(fm)or fm)*eO+eK;local f4=a.Clamp(fn,eI,eJ)if f4~=ad then eY(f4)end elseif f0 then local fo=vci.me.UnscaledTime;if fo>=f1+eV and fo>=f2+eW then f6()end elseif eF.IsMine then a.AlignSubItemOrigin(eG,eF)end end}f3(eL(eX()),false)return self end,CreateSubItemConnector=function()local fp=function(fq,ed,fr)fq.item=ed;fq.position=ed.GetPosition()fq.rotation=ed.GetRotation()fq.initialPosition=fq.position;fq.initialRotation=fq.rotation;fq.propagation=not not fr;return fq end;local fs=function(ft)for ed,fq in pairs(ft)do fp(fq,ed,fq.propagation)end end;local fu=function(u,cJ,fq,fv,fw)local fj=u-fq.initialPosition;local fx=cJ*Quaternion.Inverse(fq.initialRotation)fq.position=u;fq.rotation=cJ;for ed,fy in pairs(fv)do if ed~=fq.item and(not fw or fw(fy))then fy.position,fy.rotation=a.RotateAround(fy.initialPosition+fj,fy.initialRotation,u,fx)ed.SetPosition(fy.position)ed.SetRotation(fy.rotation)end end end;local fz={}local fA=true;local fB=false;local self;self={IsEnabled=function()return fA end,SetEnabled=function(c8)fA=c8;if c8 then fs(fz)fB=false end end,Contains=function(fC)return a.NillableHasValue(fz[fC])end,Add=function(fD,fE)if not fD then error('SubItemConnector.Add: Invalid argument: subItems = '..tostring(fD),2)end;local fF=type(fD)=='table'and fD or{fD}fs(fz)fB=false;for aA,ed in pairs(fF)do fz[ed]=fp({},ed,not fE)end end,Remove=function(fC)local P=a.NillableHasValue(fz[fC])fz[fC]=nil;return P end,RemoveAll=function()fz={}return true end,Each=function(bj)for ed,fq in pairs(fz)do if bj(ed,self)==false then return false end end end,GetItems=function()local fF={}for ed,fq in pairs(fz)do table.insert(fF,ed)end;return fF end,Update=function()if not fA then return end;local fG=false;for ed,fq in pairs(fz)do local bN=ed.GetPosition()local fH=ed.GetRotation()if not a.VectorApproximatelyEquals(bN,fq.position)or not a.QuaternionApproximatelyEquals(fH,fq.rotation)then if fq.propagation then if ed.IsMine then fu(bN,fH,fz[ed],fz,function(fy)if fy.item.IsMine then return true else fB=true;return false end end)fG=true;break else fB=true end else fB=true end end end;if not fG and fB then fs(fz)fB=false end end}return self end,UnixTime=function(c6)return a.PosixTime(c6)end,GetSubItemTransform=function(fC)local u=fC.GetPosition()local cJ=fC.GetRotation()local fI=fC.GetLocalScale()return{positionX=u.x,positionY=u.y,positionZ=u.z,rotationX=cJ.x,rotationY=cJ.y,rotationZ=cJ.z,rotationW=cJ.w,scaleX=fI.x,scaleY=fI.y,scaleZ=fI.z}end}a.SetConstEach(a,{LogLevelOff=0,LogLevelFatal=100,LogLevelError=200,LogLevelWarn=300,LogLevelInfo=400,LogLevelDebug=500,LogLevelTrace=600,LogLevelAll=0x7FFFFFFF,ColorHueSamples=10,ColorSaturationSamples=4,ColorBrightnessSamples=5,EscapeSequenceTag='#__CYTANB',SolidusTag='#__CYTANB_SOLIDUS',NegativeNumberTag='#__CYTANB_NEGATIVE_NUMBER',ArrayNumberTag='#__CYTANB_ARRAY_NUMBER',InstanceIDParameterName='__CYTANB_INSTANCE_ID',MessageValueParameterName='__CYTANB_MESSAGE_VALUE',MessageSenderOverride='__CYTANB_MESSAGE_SENDER_OVERRIDE',MessageOriginalSender='__CYTANB_MESSAGE_ORIGINAL_SENDER',TypeParameterName='__CYTANB_TYPE',ColorTypeName='Color',Vector2TypeName='Vector2',Vector3TypeName='Vector3',Vector4TypeName='Vector4',QuaternionTypeName='Quaternion',DedicatedCommentMessageName='cytanb.comment.a2a6a035-6b8d-4e06-b4f9-07e6209b0639',DedicatedNotificationMessageName='cytanb.notification.698ba55f-2b69-47f2-a68d-bc303994cff3',InstanceIDStatePatchingMessageName='cytanb.instance_id_state_patching.08504824-2041-42a2-9b2a-97448b4418b0',LOCAL_SHARED_PROPERTY_EXPIRED_KEY='__CYTANB_LOCAL_SHARED_PROPERTY_EXPIRED'})a.SetConstEach(a,{ColorMapSize=a.ColorHueSamples*a.ColorSaturationSamples*a.ColorBrightnessSamples,FatalLogLevel=a.LogLevelFatal,ErrorLogLevel=a.LogLevelError,WarnLogLevel=a.LogLevelWarn,InfoLogLevel=a.LogLevelInfo,DebugLogLevel=a.LogLevelDebug,TraceLogLevel=a.LogLevelTrace})f=a.MakeSearchPattern({'\t','\n','\v','\f','\r',' '},1,-1)g=a.MakeSearchPattern({'sprite=','SPRITE='})h=a.MakeSearchPattern({'0','1','2','3','4','5','6','7','8','9'},1,9)i,j=(function()local fJ={'A','B','C','D','E','F','a','b','c','d','e','f','0','1','2','3','4','5','6','7','8','9'}return a.MakeSearchPattern(fJ,4,4),a.MakeSearchPattern(fJ,8,8)end)()k=a.MakeSearchPattern({'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','_','-','.','(',')','!','~','*','\'','%'},1,-1)l={{tag=a.NegativeNumberTag,search=a.NegativeNumberTag,replacement=''},{tag=a.ArrayNumberTag,search=a.ArrayNumberTag,replacement=''},{tag=a.SolidusTag,search=a.SolidusTag,replacement='/'},{tag=a.EscapeSequenceTag,search=a.EscapeSequenceTag..a.EscapeSequenceTag,replacement=a.EscapeSequenceTag}}m={[a.ColorTypeName]={compositionFieldNames=a.ListToMap({'r','g','b','a'}),compositionFieldLength=4,toTableFunc=a.ColorToTable,fromTableFunc=a.ColorFromTable},[a.Vector2TypeName]={compositionFieldNames=a.ListToMap({'x','y'}),compositionFieldLength=2,toTableFunc=a.Vector2ToTable,fromTableFunc=a.Vector2FromTable},[a.Vector3TypeName]={compositionFieldNames=a.ListToMap({'x','y','z'}),compositionFieldLength=3,toTableFunc=a.Vector3ToTable,fromTableFunc=a.Vector3FromTable},[a.Vector4TypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.Vector4ToTable,fromTableFunc=a.Vector4FromTable},[a.QuaternionTypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.QuaternionToTable,fromTableFunc=a.QuaternionFromTable}}n=a.ListToMap({a.NegativeNumberTag,a.ArrayNumberTag})o=a.LogLevelInfo;q={[a.LogLevelFatal]='FATAL',[a.LogLevelError]='ERROR',[a.LogLevelWarn]='WARN',[a.LogLevelInfo]='INFO',[a.LogLevelDebug]='DEBUG',[a.LogLevelTrace]='TRACE'}r,s=(function()local dH='eff3a188-bfc7-4b0e-93cb-90fd1adc508c'local dN=_G[dH]if not dN then dN={}_G[dH]=dN end;local fK=dN.randomSeedValue;if not fK then fK=a.PosixTime()-os.clock()*10000;dN.randomSeedValue=fK;math.randomseed(fK)end;local fL=dN.clientID;if type(fL)~='string'then fL=tostring(a.RandomUUID())dN.clientID=fL end;local fM=vci.state.Get(c)or''if fM==''and vci.assets.IsMine then fM=tostring(a.RandomUUID())vci.state.Set(c,fM)end;return fM,fL end)()if d then vci.message.On(a.InstanceIDStatePatchingMessageName,function(b5,bm,bd)if vci.assets.IsMine and r~=''then vci.state.Set(c,r)end end)end;return a end;if __CYTANB_EXPORT_MODULE then return setmetatable({},{__call=function(self,fN)return b(fN)end})else return b(_ENV)end end)()if __CYTANB_EXPORT_MODULE then return cytanb end
