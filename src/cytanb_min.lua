-- SPDX-License-Identifier: MIT
-- Copyright (c) 2019 oO (https://github.com/oocytanb)
---@type cytanb @Final Version. See `cytanb_annotations.lua`
local cytanb=(function()local b=function(_ENV)if not require or not vci then error('Invalid _ENV: Enable `__CYTANB_EXPORT_MODULE = true` line and pass valid _ENV of VCI-main if use cytanb.lua as module.',3)end;local c;local d;local e;local f;local g;local h;local i;local j;local k;local l;local m=false;local n;local o=''local p;local a;local q=function(r,s)local t=r+s-1;return r,t,t+1 end;local u=function(r,s)local t=r-s+1;return t,r,t-1 end;local v=function(w,x,y,r,z)local A=y.searchMap;for B,s in pairs(y.lengthList)do if s<=0 then error('SearchPattern: Invalid parameter: searchLen <= 0')else local C,D,t=z(r,s)if C>=1 and D<=x then local E=string.sub(w,C,D)if A[E]then return true,s,t end end end end;return false,-1,-1 end;local F=function(w,y,r,z)if w==nil or y==nil then return false,-1 end;if y.hasEmptySearch then return true,0 end;local x=string.len(w)local G=y.repeatMin;local H=y.repeatMax;local I=H<0;local J=r;local K=0;local L=0;while I or L<H do local M,N,t=v(w,x,y,J,z)if M then if N<=0 then error('SearchPattern: Invalid parameter')end;J=t;K=K+N;L=L+1 else break end end;if L>=G then return true,K else return false,-1 end end;local O=function(w,P,r,Q,z,R)if w==nil or P==nil then return false,-1 end;local s=string.len(P)if Q then local M=R(w,P)return M,M and s or-1 else if s==0 then return true,s end;local x=string.len(w)local C,D=z(r,s)if C>=1 and D<=x then local E=string.sub(w,C,D)local M=R(E,P)return M,M and s or-1 else return false,-1 end end end;local S=function(w,T,U)if T<=U then local V=string.unicode(w,T,T)if V>=0xDC00 or V<=0xDFFF then return true,1,V end end;return false,-1,nil end;local W=function(w,T,U,X)if T<=U then local Y,Z=a.StringStartsWith(w,d,T)if Y then local _=T+Z;if _<=U then local a0,a1=a.StringStartsWith(w,e,_)if a0 then local a2=_+a1;if a2<=U and string.unicode(w,a2,a2)==0x3E then local a3=tonumber(string.sub(w,_,_+a1-1))if a3<=X then return true,a2-T+1,a3 end end end end end end;return false,-1,nil end;local a4=function(a5,a6)for a7=1,4 do local a8=a5[a7]-a6[a7]if a8~=0 then return a8 end end;return 0 end;local a9;a9={__eq=function(a5,a6)return a5[1]==a6[1]and a5[2]==a6[2]and a5[3]==a6[3]and a5[4]==a6[4]end,__lt=function(a5,a6)return a4(a5,a6)<0 end,__le=function(a5,a6)return a4(a5,a6)<=0 end,__tostring=function(aa)local ab=aa[2]or 0;local ac=aa[3]or 0;return string.format('%08x-%04x-%04x-%04x-%04x%08x',bit32.band(aa[1]or 0,0xFFFFFFFF),bit32.band(bit32.rshift(ab,16),0xFFFF),bit32.band(ab,0xFFFF),bit32.band(bit32.rshift(ac,16),0xFFFF),bit32.band(ac,0xFFFF),bit32.band(aa[4]or 0,0xFFFFFFFF))end,__concat=function(a5,a6)local ad=getmetatable(a5)local ae=ad==a9 or type(ad)=='table'and ad.__concat==a9.__concat;local af=getmetatable(a6)local ag=af==a9 or type(af)=='table'and af.__concat==a9.__concat;if not ae and not ag then error('UUID: attempt to concatenate illegal values',2)end;return(ae and a9.__tostring(a5)or a5)..(ag and a9.__tostring(a6)or a6)end}local ah='__CYTANB_CONST_VARIABLES'local ai=function(table,aj)local ak=getmetatable(table)if ak then local al=rawget(ak,ah)if al then local am=rawget(al,aj)if type(am)=='function'then return am(table,aj)else return am end end end;return nil end;local an=function(table,aj,ao)local ak=getmetatable(table)if ak then local al=rawget(ak,ah)if al then if rawget(al,aj)~=nil then error('Cannot assign to read only field "'..aj..'"',2)end end end;rawset(table,aj,ao)end;local ap=function(aq,ar)if not aq then return false,false end;local as=aq[a.TypeParameterName]if a.NillableHasValue(as)and a.NillableValue(as)~=ar then return false,false end;return a.NillableIfHasValueOrElse(j[ar],function(at)local au=at.compositionFieldNames;local av=at.compositionFieldLength;local aw=false;for ax,ao in pairs(aq)do if au[ax]then av=av-1;if av<=0 and aw then break end elseif ax~=a.TypeParameterName then aw=true;if av<=0 then break end end end;return av<=0,aw end,function()return false,false end)end;local ay=function(w)return a.StringReplace(a.StringReplace(w,a.EscapeSequenceTag,a.EscapeSequenceTag..a.EscapeSequenceTag),'/',a.SolidusTag)end;local az=function(w,aA)local aB=string.len(w)local aC=string.len(a.EscapeSequenceTag)if aC>aB then return w end;local aD=''local a7=1;while a7<aB do local D,aE=string.find(w,a.EscapeSequenceTag,a7,true)if not D then if a7==1 then aD=w else aD=aD..string.sub(w,a7)end;break end;if D>a7 then aD=aD..string.sub(w,a7,D-1)end;local aF=false;for aG,aH in ipairs(i)do local M=a.StringStartsWith(w,aH.search,D)if M then aD=aD..(aA and aA(aH.tag)or aH.replacement)a7=D+string.len(aH.search)aF=true;break end end;if not aF then aD=aD..a.EscapeSequenceTag;a7=aE+1 end end;return aD end;local aI;aI=function(aJ,aK)if type(aJ)~='table'then return aJ end;if not aK then aK={}end;if aK[aJ]then error('circular reference')end;aK[aJ]=true;local aL={}for ax,ao in pairs(aJ)do local aM=type(ax)local aN;if aM=='string'then aN=ay(ax)elseif aM=='number'then aN=tostring(ax)..a.ArrayNumberTag else aN=ax end;local aO=type(ao)if aO=='string'then aL[aN]=ay(ao)elseif aO=='number'and ao<0 then aL[tostring(aN)..a.NegativeNumberTag]=tostring(ao)else aL[aN]=aI(ao,aK)end end;aK[aJ]=nil;return aL end;local aP;aP=function(aL,aQ)if type(aL)~='table'then return aL end;local aJ={}for ax,ao in pairs(aL)do local aN;local aR=false;if type(ax)=='string'then local aS=false;aN=az(ax,function(aT)if aT==a.NegativeNumberTag then aR=true elseif aT==a.ArrayNumberTag then aS=true end;return nil end)if aS then aN=tonumber(aN)or aN end else aN=ax;aR=false end;if aR and type(ao)=='string'then aJ[aN]=tonumber(ao)elseif type(ao)=='string'then aJ[aN]=az(ao,function(aT)return k[aT]end)else aJ[aN]=aP(ao,aQ)end end;if not aQ then a.NillableIfHasValue(aJ[a.TypeParameterName],function(aU)a.NillableIfHasValue(j[aU],function(at)local aV,aw=at.fromTableFunc(aJ)if not aw then a.NillableIfHasValue(aV,function(aa)aJ=aa end)end end)end)end;return aJ end;local aW={['nil']=function(aX)return nil end,['number']=function(aX)return tonumber(aX)end,['string']=function(aX)return tostring(aX)end,['boolean']=function(aX)if aX then return true else return false end end}local aY=function(aX,aZ)local a_=type(aX)if a_==aZ then return aX else local b0=aW[aZ]if b0 then return b0(aX)else return nil end end end;local b1=function(b2,b3)if b3 and type(b3)=='table'then local b4={}for aj,aX in pairs(b2)do local b5=b3[aj]local b6;if b5==nil then b6=aX else local b7=aY(b5,type(aX))if b7==nil then b6=aX else b6=b7 end end;b4[aj]=b6 end;b4[a.MessageOriginalSender]=b2;return b4 else return b2 end end;local b8=function(b9)local aL=a.NillableIfHasValueOrElse(b9,function(aJ)if type(aJ)~='table'then error('MakeMessageData: Invalid argument: table expected',4)end;return a.TableToSerializable(aJ)end,function()return{}end)local ba=a.InstanceID()if ba==''then a.LogWarn('MakeMessageData: InstanceID is empty.')end;aL[a.InstanceIDParameterName]=ba;return json.serialize(aL)end;local bb=function(bc,bd,b3,be)local bf={type=be,name='',commentSource=''}local b9={[a.MessageValueParameterName]=tostring(bd),[a.MessageSenderOverride]=type(b3)=='table'and a.Extend(bf,b3,true)or bf}a.EmitMessage(bc,b9)end;local bg=function(bc,bh,bi)local bj,bk=(function()local b0=function(b2,bl,b9)local bd=tostring(b9[a.MessageValueParameterName]or'')bi(b2,bh,bd)end;local bj=a.OnMessage(bc,b0)local bk=a.OnMessage(bh,b0)return bj,bk end)()return{Off=function()bj.Off()bk.Off()end}end;a={InstanceID=function()return vci.assets.GetInstanceId()or''end,OwnID=function()if o==''then local bm=vci.studio.GetLocalAvatar()if bm then o=bm.GetId()or''end end;return o end,ClientID=function()return p end,NillableHasValue=function(bn)return bn~=nil end,NillableValue=function(bn)if bn==nil then error('nillable: value is nil',2)end;return bn end,NillableValueOrDefault=function(bn,bo)if bn==nil then if bo==nil then error('nillable: defaultValue is nil',2)end;return bo else return bn end end,NillableIfHasValue=function(bn,bi)if bn==nil then return nil else return bi(bn)end end,NillableIfHasValueOrElse=function(bn,bi,bp)if bn==nil then return bp()else return bi(bn)end end,MakeSearchPattern=function(bq,br,bs)local G=br and math.floor(br)or 1;if G<0 then error('SearchPattern: Invalid parameter: optRepeatMin < 0')end;local H=bs and math.floor(bs)or G;if H>=0 and H<G then error('SearchPattern: Invalid parameter: repeatMax < repeatMin')end;local bt=H==0;local A={}local bu={}local bv={}local bw=0;for bx,by in pairs(bq)do local s=string.len(by)if s==0 then bt=true else A[by]=s;if not bu[s]then bu[s]=true;bw=bw+1;bv[bw]=s end end end;table.sort(bv,function(bz,M)return bz>M end)return{hasEmptySearch=bt,searchMap=A,lengthList=bv,repeatMin=G,repeatMax=H}end,StringStartsWith=function(w,P,bA)local J=bA and math.max(1,math.floor(bA))or 1;if type(P)=='table'then return F(w,P,J,q)else return O(w,P,J,J==1,q,string.startsWith)end end,StringEndsWith=function(w,P,bB)if w==nil then return false,-1 end;local x=string.len(w)local J=bB and math.min(x,math.floor(bB))or x;if type(P)=='table'then return F(w,P,J,u)else return O(w,P,J,J==x,u,string.endsWith)end end,
StringTrimStart=function(w,bC)if w==nil or w==''then return w end;local M,N=a.StringStartsWith(w,bC or c)if M and N>=1 then return string.sub(w,N+1)else return w end end,StringTrimEnd=function(w,bC)if w==nil or w==''then return w end;local M,N=a.StringEndsWith(w,bC or c)if M and N>=1 then return string.sub(w,1,string.len(w)-N)else return w end end,StringTrim=function(w,bC)return a.StringTrimEnd(a.StringTrimStart(w,bC),bC)end,StringReplace=function(w,bD,bE)local bF;local aB=string.len(w)if bD==''then bF=bE;for a7=1,aB do bF=bF..string.sub(w,a7,a7)..bE end else bF=''local a7=1;while true do local C,D=string.find(w,bD,a7,true)if C then bF=bF..string.sub(w,a7,C-1)..bE;a7=D+1;if a7>aB then break end else bF=a7==1 and w or bF..string.sub(w,a7)break end end end;return bF end,StringEachCode=function(w,bi,bG,a7,bH,bI,bJ,bK)local aB=string.len(w)if aB==0 then return 0,0,0 end;local bL=a7 and math.floor(a7)or 1;local U=bH and math.floor(bH)or aB;local X=math.min(bK or 3182,0x1FFFFF)if bL<=0 or U>aB or bL>U then error('StringEachCode: invalid range')end;local bM=0;local bN=bL;local bO=bN;while bN<=U do local C=bN;local V=string.unicode(w,bN,bN)if V>=0xD800 and V<=0xDBFF then local M,N=S(w,bN+1,U)if M then bN=bN+N end elseif bI and V==0x3C then local M,N,a3=W(w,bN+1,U,X)if M and(not bJ or bJ(a3))then bN=bN+N end end;bM=bM+1;bO=bN;if bi and bi(string.sub(w,C,bN),bM,bG,C,bN)==false then break end;bN=bN+1 end;return bM,bL,bO end,SetConst=function(bD,bc,aa)if type(bD)~='table'then error('Cannot set const to non-table target',2)end;local bP=getmetatable(bD)local ak=bP or{}local bQ=rawget(ak,ah)if rawget(bD,bc)~=nil then error('Non-const field "'..bc..'" already exists',2)end;if not bQ then bQ={}rawset(ak,ah,bQ)ak.__index=ai;ak.__newindex=an end;rawset(bQ,bc,aa)if not bP then setmetatable(bD,ak)end;return bD end,SetConstEach=function(bD,bR)for ax,ao in pairs(bR)do a.SetConst(bD,ax,ao)end;return bD end,Extend=function(bD,bS,bT,bU,aK)if bD==bS or type(bD)~='table'or type(bS)~='table'then return bD end;if bT then if not aK then aK={}end;if aK[bS]then error('circular reference')end;aK[bS]=true end;for ax,ao in pairs(bS)do if bT and type(ao)=='table'then local bV=bD[ax]bD[ax]=a.Extend(type(bV)=='table'and bV or{},ao,bT,bU,aK)else bD[ax]=ao end end;if not bU then local bW=getmetatable(bS)if type(bW)=='table'then if bT then local bX=getmetatable(bD)setmetatable(bD,a.Extend(type(bX)=='table'and bX or{},bW,true))else setmetatable(bD,bW)end end end;if bT then aK[bS]=nil end;return bD end,Vars=function(ao,bY,bZ,aK)local b_;if bY then b_=bY~='__NOLF'else bY='  'b_=true end;if not bZ then bZ=''end;if not aK then aK={}end;local c0=type(ao)if c0=='table'then aK[ao]=aK[ao]and aK[ao]+1 or 1;local c1=b_ and bZ..bY or''local w='('..tostring(ao)..') {'local c2=true;for aj,aX in pairs(ao)do if c2 then c2=false else w=w..(b_ and','or', ')end;if b_ then w=w..'\n'..c1 end;if type(aX)=='table'and aK[aX]and aK[aX]>0 then w=w..aj..' = ('..tostring(aX)..')'else w=w..aj..' = '..a.Vars(aX,bY,c1,aK)end end;if not c2 and b_ then w=w..'\n'..bZ end;w=w..'}'aK[ao]=aK[ao]-1;if aK[ao]<=0 then aK[ao]=nil end;return w elseif c0=='function'or c0=='thread'or c0=='userdata'then return'('..c0 ..')'elseif c0=='string'then return'('..c0 ..') '..string.format('%q',ao)else return'('..c0 ..') '..tostring(ao)end end,PosixTime=(function()local c3=os.time({year=1970,month=1,day=2,hour=0,min=0,sec=0,isdst=false})if not c3 then error('unexpected')end;local c4=os.date('!*t',c3)local c5=(((c4.day-1)*24+c4.hour)*60+c4.min)*60+c4.sec;return function(c6)return os.difftime(c6 or os.time(),c3)+c5 end end)(),GetLogLevel=function()return l end,SetLogLevel=function(c7)l=c7 end,IsOutputLogLevelEnabled=function()return m end,SetOutputLogLevelEnabled=function(c8)m=not not c8 end,Log=function(c7,...)if c7<=l then local c9=m and(n[c7]or'LOG LEVEL '..tostring(c7))..' | 'or''local ca=table.pack(...)if ca.n==1 then local ao=ca[1]if ao~=nil then local w=type(ao)=='table'and a.Vars(ao)or tostring(ao)print(m and c9 ..w or w)else print(c9)end else local w=c9;for a7=1,ca.n do local ao=ca[a7]if ao~=nil then w=w..(type(ao)=='table'and a.Vars(ao)or tostring(ao))end end;print(w)end end end,LogFatal=function(...)a.Log(a.LogLevelFatal,...)end,LogError=function(...)a.Log(a.LogLevelError,...)end,LogWarn=function(...)a.Log(a.LogLevelWarn,...)end,LogInfo=function(...)a.Log(a.LogLevelInfo,...)end,LogDebug=function(...)a.Log(a.LogLevelDebug,...)end,LogTrace=function(...)a.Log(a.LogLevelTrace,...)end,FatalLog=function(...)a.LogFatal(...)end,ErrorLog=function(...)a.LogError(...)end,WarnLog=function(...)a.LogWarn(...)end,InfoLog=function(...)a.LogInfo(...)end,DebugLog=function(...)a.LogDebug(...)end,TraceLog=function(...)a.LogTrace(...)end,ListToMap=function(cb,cc)local cd={}if cc==nil then for ax,ao in pairs(cb)do cd[ao]=ao end elseif type(cc)=='function'then for ax,ao in pairs(cb)do local ce,cf=cc(ao)cd[ce]=cf end else for ax,ao in pairs(cb)do cd[ao]=cc end end;return cd end,Round=function(cg,ch)if ch then local ci=10^ch;return math.floor(cg*ci+0.5)/ci else return math.floor(cg+0.5)end end,Clamp=function(aa,cj,ck)return math.max(cj,math.min(aa,ck))end,Lerp=function(bz,M,c0)if c0<=0.0 then return bz elseif c0>=1.0 then return M else return bz+(M-bz)*c0 end end,LerpUnclamped=function(bz,M,c0)if c0==0.0 then return bz elseif c0==1.0 then return M else return bz+(M-bz)*c0 end end,PingPong=function(c0,cl)if cl==0 then return 0,1 end;local cm=math.floor(c0/cl)local cn=c0-cm*cl;if cm<0 then if(cm+1)%2==0 then return cl-cn,-1 else return cn,1 end else if cm%2==0 then return cn,1 else return cl-cn,-1 end end end,VectorApproximatelyEquals=function(co,cp)return(co-cp).sqrMagnitude<1E-10 end,QuaternionApproximatelyEquals=function(co,cp)local cq=Quaternion.Dot(co,cp)return cq<1.0+1E-06 and cq>1.0-1E-06 end,QuaternionToAngleAxis=function(cr)local cm=cr.normalized;local cs=math.acos(cm.w)local ct=math.sin(cs)local cu=math.deg(cs*2.0)local cv;if math.abs(ct)<=Quaternion.kEpsilon then cv=Vector3.right else local C=1.0/ct;cv=Vector3.__new(cm.x*C,cm.y*C,cm.z*C)end;return cu,cv end,QuaternionTwist=function(cr,cw)if cw.sqrMagnitude<Vector3.kEpsilonNormalSqrt then return Quaternion.identity end;local cx=Vector3.__new(cr.x,cr.y,cr.z)if cx.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cy=Vector3.Project(cx,cw)if cy.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cz=Quaternion.__new(cy.x,cy.y,cy.z,cr.w)cz.Normalize()return cz else return Quaternion.AngleAxis(0,cw)end else local cA=a.QuaternionToAngleAxis(cr)return Quaternion.AngleAxis(cA,cw)end end,ApplyQuaternionToVector3=function(cr,cB)local cC=cr.w*cB.x+cr.y*cB.z-cr.z*cB.y;local cD=cr.w*cB.y-cr.x*cB.z+cr.z*cB.x;local cE=cr.w*cB.z+cr.x*cB.y-cr.y*cB.x;local cF=-cr.x*cB.x-cr.y*cB.y-cr.z*cB.z;return Vector3.__new(cF*-cr.x+cC*cr.w+cD*-cr.z-cE*-cr.y,cF*-cr.y-cC*-cr.z+cD*cr.w+cE*-cr.x,cF*-cr.z+cC*-cr.y-cD*-cr.x+cE*cr.w)end,RotateAround=function(cG,cH,cI,cJ)return cI+cJ*(cG-cI),cJ*cH end,Random32=function()return bit32.band(math.random(-2147483648,2147483646)+2147483648,0xFFFFFFFF)end,RandomUUID=function()return a.UUIDFromNumbers(a.Random32(),bit32.bor(0x4000,bit32.band(a.Random32(),0xFFFF0FFF)),bit32.bor(0x80000000,bit32.band(a.Random32(),0x3FFFFFFF)),a.Random32())end,UUIDString=function(cK)return a9.__tostring(cK)end,UUIDFromNumbers=function(...)local cL=...local c0=type(cL)local cM,cN,cO,cP;if c0=='table'then cM=cL[1]cN=cL[2]cO=cL[3]cP=cL[4]else cM,cN,cO,cP=...end;local cK={bit32.band(cM or 0,0xFFFFFFFF),bit32.band(cN or 0,0xFFFFFFFF),bit32.band(cO or 0,0xFFFFFFFF),bit32.band(cP or 0,0xFFFFFFFF)}setmetatable(cK,a9)return cK end,
UUIDFromString=function(w)local aB=string.len(w)if aB==32 then local cK=a.UUIDFromNumbers(0,0,0,0)for a7=1,4 do local C=1+(a7-1)*8;if not a.StringStartsWith(w,g,C)then return nil end;cK[a7]=tonumber(string.sub(w,C,C+7),16)end;return cK elseif aB==36 then if not a.StringStartsWith(w,g,1)then return nil end;local cM=tonumber(string.sub(w,1,8),16)if not a.StringStartsWith(w,'-',9)or not a.StringStartsWith(w,f,10)or not a.StringStartsWith(w,'-',14)or not a.StringStartsWith(w,f,15)then return nil end;local cN=tonumber(string.sub(w,10,13)..string.sub(w,15,18),16)if not a.StringStartsWith(w,'-',19)or not a.StringStartsWith(w,f,20)or not a.StringStartsWith(w,'-',24)or not a.StringStartsWith(w,f,25)then return nil end;local cO=tonumber(string.sub(w,20,23)..string.sub(w,25,28),16)if not a.StringStartsWith(w,g,29)then return nil end;local cP=tonumber(string.sub(w,29),16)return a.UUIDFromNumbers(cM,cN,cO,cP)else return nil end end,ParseUUID=function(w)return a.UUIDFromString(w)end,CreateCircularQueue=function(cQ)if type(cQ)~='number'or cQ<1 then error('CreateCircularQueue: Invalid argument: capacity = '..tostring(cQ),2)end;local self;local cR=math.floor(cQ)local aD={}local cS=0;local cT=0;local cU=0;self={Size=function()return cU end,Clear=function()cS=0;cT=0;cU=0 end,IsEmpty=function()return cU==0 end,Offer=function(cV)aD[cS+1]=cV;cS=(cS+1)%cR;if cU<cR then cU=cU+1 else cT=(cT+1)%cR end;return true end,OfferFirst=function(cV)cT=(cR+cT-1)%cR;aD[cT+1]=cV;if cU<cR then cU=cU+1 else cS=(cR+cS-1)%cR end;return true end,Poll=function()if cU==0 then return nil else local cV=aD[cT+1]cT=(cT+1)%cR;cU=cU-1;return cV end end,PollLast=function()if cU==0 then return nil else cS=(cR+cS-1)%cR;local cV=aD[cS+1]cU=cU-1;return cV end end,Peek=function()if cU==0 then return nil else return aD[cT+1]end end,PeekLast=function()if cU==0 then return nil else return aD[(cR+cS-1)%cR+1]end end,Get=function(cW)if cW<1 or cW>cU then a.LogError('CreateCircularQueue.Get: index is outside the range: '..cW)return nil end;return aD[(cT+cW-1)%cR+1]end,IsFull=function()return cU>=cR end,MaxSize=function()return cR end}return self end,DetectClicks=function(cX,cY,cZ)local bM=cX or 0;local c_=cZ or TimeSpan.FromMilliseconds(500)local d0=vci.me.Time;local d1=cY and d0>cY+c_ and 1 or bM+1;return d1,d0 end,ColorRGBToHSV=function(d2)local d3,am,d4,ao=Color.RGBToHSV(d2)return am,d4,ao end,ColorFromARGB32=function(d5)local d6=type(d5)=='number'and d5 or 0xFF000000;return Color.__new(bit32.band(bit32.rshift(d6,16),0xFF)/0xFF,bit32.band(bit32.rshift(d6,8),0xFF)/0xFF,bit32.band(d6,0xFF)/0xFF,bit32.band(bit32.rshift(d6,24),0xFF)/0xFF)end,ColorToARGB32=function(d2)return bit32.bor(bit32.lshift(bit32.band(a.Round(0xFF*d2.a),0xFF),24),bit32.lshift(bit32.band(a.Round(0xFF*d2.r),0xFF),16),bit32.lshift(bit32.band(a.Round(0xFF*d2.g),0xFF),8),bit32.band(a.Round(0xFF*d2.b),0xFF))end,ColorFromIndex=function(d7,d8,d9,da,db)local dc=math.max(math.floor(d8 or a.ColorHueSamples),1)local dd=db and dc or dc-1;local de=math.max(math.floor(d9 or a.ColorSaturationSamples),1)local df=math.max(math.floor(da or a.ColorBrightnessSamples),1)local cW=a.Clamp(math.floor(d7 or 0),0,dc*de*df-1)local dg=cW%dc;local dh=math.floor(cW/dc)local C=dh%de;local di=math.floor(dh/de)if db or dg~=dd then local am=dg/dd;local d4=(de-C)/de;local ao=(df-di)/df;return Color.HSVToRGB(am,d4,ao)else local ao=(df-di)/df*C/(de-1)return Color.HSVToRGB(0.0,0.0,ao)end end,ColorToIndex=function(d2,d8,d9,da,db)local dc=math.max(math.floor(d8 or a.ColorHueSamples),1)local dd=db and dc or dc-1;local de=math.max(math.floor(d9 or a.ColorSaturationSamples),1)local df=math.max(math.floor(da or a.ColorBrightnessSamples),1)local am,d4,ao=a.ColorRGBToHSV(d2)local C=a.Round(de*(1.0-d4))if db or C<de then local dj=a.Round(dd*am)if dj>=dd then dj=0 end;if C>=de then C=de-1 end;local di=math.min(df-1,a.Round(df*(1.0-ao)))return dj+dc*(C+de*di)else local dk=a.Round((de-1)*ao)if dk==0 then local dl=a.Round(df*(1.0-ao))if dl>=df then return dc-1 else return dc*(1+a.Round(ao*(de-1)/(df-dl)*df)+de*dl)-1 end else return dc*(1+dk+de*a.Round(df*(1.0-ao*(de-1)/dk)))-1 end end end,ColorToTable=function(d2)return d2 and{[a.TypeParameterName]=a.ColorTypeName,r=d2.r,g=d2.g,b=d2.b,a=d2.a}or nil end,ColorFromTable=function(aq)local M,aw=ap(aq,a.ColorTypeName)return M and Color.__new(aq.r,aq.g,aq.b,aq.a)or nil,aw end,Vector2ToTable=function(aa)return aa and{[a.TypeParameterName]=a.Vector2TypeName,x=aa.x,y=aa.y}or nil end,Vector2FromTable=function(aq)local M,aw=ap(aq,a.Vector2TypeName)return M and Vector2.__new(aq.x,aq.y)or nil,aw end,Vector3ToTable=function(aa)return aa and{[a.TypeParameterName]=a.Vector3TypeName,x=aa.x,y=aa.y,z=aa.z}or nil end,Vector3FromTable=function(aq)local M,aw=ap(aq,a.Vector3TypeName)return M and Vector3.__new(aq.x,aq.y,aq.z)or nil,aw end,Vector4ToTable=function(aa)return aa and{[a.TypeParameterName]=a.Vector4TypeName,x=aa.x,y=aa.y,z=aa.z,w=aa.w}or nil end,Vector4FromTable=function(aq)local M,aw=ap(aq,a.Vector4TypeName)return M and Vector4.__new(aq.x,aq.y,aq.z,aq.w)or nil,aw end,QuaternionToTable=function(aa)return aa and{[a.TypeParameterName]=a.QuaternionTypeName,x=aa.x,y=aa.y,z=aa.z,w=aa.w}or nil end,QuaternionFromTable=function(aq)local M,aw=ap(aq,a.QuaternionTypeName)return M and Quaternion.__new(aq.x,aq.y,aq.z,aq.w)or nil,aw end,TableToSerializable=function(aJ)return aI(aJ)end,TableFromSerializable=function(aL,aQ)return aP(aL,aQ)end,TableToSerialiable=function(aJ)return aI(aJ)end,TableFromSerialiable=function(aL,aQ)return aP(aL,aQ)end,EmitMessage=function(bc,b9)vci.message.Emit(bc,b8(b9))end,EmitMessageTo=function(bc,b9,dm)if dm~=nil and dm~=''then vci.message.EmitWithId(bc,b8(b9),dm)else a.LogWarn('EmitMessageTo: targetID is not specified: '..tostring(dm))end end,EmitInstanceMessage=function(bc,b9)a.EmitMessageTo(bc,b9,a.InstanceID())end,OnMessage=function(bc,bi)local b0=function(b2,bl,bd)if type(bd)=='string'and string.startsWith(bd,'{')then local dn,aL=pcall(json.parse,bd)if dn and type(aL)=='table'and aL[a.InstanceIDParameterName]then local dp=a.TableFromSerializable(aL)bi(b1(b2,dp[a.MessageSenderOverride]),bl,dp)return end end;bi(b2,bl,{[a.MessageValueParameterName]=bd})end;vci.message.On(bc,b0)return{Off=function()if b0 then b0=nil end end}end,OnInstanceMessage=function(bc,bi)local b0=function(b2,bl,b9)local ba=a.InstanceID()if ba~=''and ba==b9[a.InstanceIDParameterName]then bi(b2,bl,b9)end end;return a.OnMessage(bc,b0)end,EmitCommentMessage=function(bd,b3)bb(a.DedicatedCommentMessageName,bd,b3,'comment')end,OnCommentMessage=function(bi)return bg(a.DedicatedCommentMessageName,'comment',bi)end,EmitNotificationMessage=function(bd,b3)bb(a.DedicatedNotificationMessageName,bd,b3,'notification')end,OnNotificationMessage=function(bi)return bg(a.DedicatedNotificationMessageName,'notification',bi)end,GetEffekseerEmitterMap=function(bc)local dq=vci.assets.GetEffekseerEmitters(bc)if not dq then return nil end;local cd={}for a7,dr in pairs(dq)do cd[dr.EffectName]=dr end;return cd end,GetAudioSourceMap=function(ds)local cd={}for d3,dt in pairs(ds.GetAudioSources()or{})do cd[dt.ClipName or'']=dt end;return cd end,ParseTagString=function(w)local bN=string.find(w,'#',1,true)if not bN then return{},w end;local du={}local dv=string.sub(w,1,bN-1)bN=bN+1;local aB=string.len(w)while bN<=aB do local dw,dx=a.StringStartsWith(w,h,bN)if dw then local dy=bN+dx;local dz=string.sub(w,bN,dy-1)local dA=dz;bN=dy;if bN<=aB and a.StringStartsWith(w,'=',bN)then bN=bN+1;local dB,dC=a.StringStartsWith(w,h,bN)if dB then local dD=bN+dC;dA=string.sub(w,bN,dD-1)bN=dD else dA=''end end;du[dz]=dA end;bN=string.find(w,'#',bN,true)if not bN then break end;bN=bN+1 end;return du,dv end,
CalculateSIPrefix=(function()local dE=9;local dF={'y','z','a','f','p','n','u','m','','k','M','G','T','P','E','Z','Y'}local dG=#dF;return function(cg)local dH=cg==0 and 0 or a.Clamp(math.floor(math.log(math.abs(cg),1000)),1-dE,dG-dE)return dH==0 and cg or cg/1000^dH,dF[dE+dH],dH*3 end end)(),CreateLocalSharedProperties=function(dI,dJ)local dK=TimeSpan.FromSeconds(5)local dL='33657f0e-7c44-4ee7-acd9-92dd8b8d807a'local dM='__CYTANB_LOCAL_SHARED_PROPERTIES_LISTENER_MAP'if type(dI)~='string'or string.len(dI)<=0 or type(dJ)~='string'or string.len(dJ)<=0 then error('LocalSharedProperties: Invalid arguments',2)end;local dN=_G[dL]if not dN then dN={}_G[dL]=dN end;dN[dJ]=vci.me.UnscaledTime;local dO=_G[dI]if not dO then dO={[dM]={}}_G[dI]=dO end;local dP=dO[dM]local self;self={GetLspID=function()return dI end,GetLoadID=function()return dJ end,GetProperty=function(aj,bo)local aa=dO[aj]if aa==nil then return bo else return aa end end,SetProperty=function(aj,aa)if aj==dM then error('LocalSharedProperties: Invalid argument: key = ',aj,2)end;local d0=vci.me.UnscaledTime;local dQ=dO[aj]dO[aj]=aa;for dR,ba in pairs(dP)do local c0=dN[ba]if c0 and c0+dK>=d0 then dR(self,aj,aa,dQ)else dR(self,a.LOCAL_SHARED_PROPERTY_EXPIRED_KEY,true,false)dP[dR]=nil;dN[ba]=nil end end end,Clear=function()for aj,aa in pairs(dO)do if aj~=dM then self.SetProperty(aj,nil)end end end,Each=function(bi)for aj,aa in pairs(dO)do if aj~=dM and bi(aa,aj,self)==false then return false end end end,AddListener=function(dR)dP[dR]=dJ end,RemoveListener=function(dR)dP[dR]=nil end,UpdateAlive=function()dN[dJ]=vci.me.UnscaledTime end}return self end,EstimateFixedTimestep=function(dS,dT)local dU=dT or{}local dV=dU.mass or 1;if dV<=0 then error('EstimateFixedTimestep: Invalid argument: mass <= 0',2)end;local dW=dU.acceleration or 1000;if dW<=0 then error('EstimateFixedTimestep: Invalid argument: acceleration <= 0',2)end;local dX=dU.startCalcTime or TimeSpan.FromSeconds(5)local dY=dU.stopCalcTime or TimeSpan.FromSeconds(30)if dX<TimeSpan.Zero or dX>dY then error('EstimateFixedTimestep: Invalid argument: startCalcTime < Zero or startCalcTime > stopCalcTime',2)end;local dZ=dU.minCalcInterval or TimeSpan.MaxValue;local d_=dU.maxCalcInterval or TimeSpan.MaxValue;if dZ<=TimeSpan.Zero or dZ>d_ then error('EstimateFixedTimestep: Invalid argument: minCalcInterval <= Zero or minCalcInterval > maxCalcInterval',2)end;local e0=dZ;local e1=dZ<TimeSpan.MaxValue;local e2=dU.defaultTimestep or TimeSpan.FromSeconds(0.02)local e3=e2;if e2<=TimeSpan.Zero then error('EstimateFixedTimestep: Invalid argument: timestep <= Zero',2)end;local e4=0xFFFF;local e5=e4;local e6=e4;local e7=a.CreateCircularQueue(dU.queueSize or 64)if e7.MaxSize()<=1 then error('EstimateFixedTimestep: Invalid argument: queueSize <= 1',2)end;local e8=vci.me.Time;local e9=e8;local ea=e8;local eb=a.Random32()local ec=Vector3.__new(bit32.bor(0x100,bit32.band(eb,0x3F)),bit32.bor(0x100,bit32.band(bit32.rshift(eb,8),0x3F)),0)local ed=1;local ee=function(cj,ck)local ef=cj==dZ and 120 or 1200;local ct=cj.TotalSeconds;return TimeSpan.FromSeconds(math.min(ct+math.random()*math.min(ef,ck.TotalSeconds-ct),TimeSpan.MaxValue.TotalSeconds-1))end;local eg={function()e7.Clear()dS.SetPosition(ec)dS.SetRotation(Quaternion.identity)dS.SetVelocity(Vector3.zero)dS.SetAngularVelocity(Vector3.zero)ed=ed+1;return e2 end,function()dS.AddForce(Vector3.__new(0.0,0.0,dV*dW))e8=vci.me.Time;ea=e8;ed=ed+1;return e2 end,function()local eh=ea;ea=vci.me.Time;local ei=eh-e8;local ej=ei.TotalSeconds;if ej<=1E-10 then return e2 end;local ek=dS.GetPosition().z-ec.z;local el=ek/ej/dW;if el<=1E-10 then return e2 end;e7.Offer(el)local em=e7.Size()if em>=2 and ei>=dX then local en=0.0;for a7=1,em do en=en+e7.Get(a7)end;local eo=en/em;local ep=0.0;for a7=1,em do ep=ep+(e7.Get(a7)-eo)^2 end;local eq=ep/em;if eq<e6 then e6=eq;e3=TimeSpan.FromSeconds(eo)e9=eh end;if ei>dY then if math.abs((e3-e2).TotalSeconds)>=0.001 or e6<e5 then e2=e3;e5=e6 end;e9=eh;if e0<TimeSpan.MaxValue then e0=ee(e0,d_)end;dS.SetPosition(ec)dS.SetRotation(Quaternion.identity)dS.SetVelocity(Vector3.zero)dS.SetAngularVelocity(Vector3.zero)ed=ed+1 end else e3=TimeSpan.FromSeconds(el)e9=eh end;if e5>=e4 then e5=e6;e2=e3 end;return e2 end,function()ea=vci.me.Time;return e2 end}local er=#eg;local self={Timestep=function()return e2 end,Precision=function()return e5 end,IsFinished=function()return ed==er end,Update=function()if e1 and ed==er and ea-e0>=e9 then ed=1 end;return eg[ed]()end}return self end,AlignSubItemOrigin=function(es,ds,et)local eu=es.GetRotation()if not a.QuaternionApproximatelyEquals(ds.GetRotation(),eu)then ds.SetRotation(eu)end;local ev=es.GetPosition()if not a.VectorApproximatelyEquals(ds.GetPosition(),ev)then ds.SetPosition(ev)end;if et then ds.SetVelocity(Vector3.zero)ds.SetAngularVelocity(Vector3.zero)end end,CreateSubItemGlue=function()local ew={}local self;self={Contains=function(ex,ey)return a.NillableIfHasValueOrElse(ew[ex],function(bR)return a.NillableHasValue(bR[ey])end,function()return false end)end,Add=function(ex,ez,et)if not ex or not ez then local eA='SubItemGlue.Add: Invalid arguments '..(not ex and', parent = '..tostring(ex)or'')..(not ez and', children = '..tostring(ez)or'')error(eA,2)end;local bR=a.NillableIfHasValueOrElse(ew[ex],function(eB)return eB end,function()local eB={}ew[ex]=eB;return eB end)if type(ez)=='table'then for aj,aX in pairs(ez)do bR[aX]={velocityReset=not not et}end else bR[ez]={velocityReset=not not et}end end,Remove=function(ex,ey)return a.NillableIfHasValueOrElse(ew[ex],function(bR)if a.NillableHasValue(bR[ey])then bR[ey]=nil;return true else return false end end,function()return false end)end,RemoveParent=function(ex)if a.NillableHasValue(ew[ex])then ew[ex]=nil;return true else return false end end,RemoveAll=function()ew={}return true end,Each=function(bi,eC)return a.NillableIfHasValueOrElse(eC,function(ex)return a.NillableIfHasValue(ew[ex],function(bR)for ey,dT in pairs(bR)do if bi(ey,ex,self)==false then return false end end end)end,function()for ex,bR in pairs(ew)do if self.Each(bi,ex)==false then return false end end end)end,Update=function(eD)for ex,bR in pairs(ew)do local eE=ex.GetPosition()local eF=ex.GetRotation()for ey,dT in pairs(bR)do if eD or ey.IsMine then if not a.QuaternionApproximatelyEquals(ey.GetRotation(),eF)then ey.SetRotation(eF)end;if not a.VectorApproximatelyEquals(ey.GetPosition(),eE)then ey.SetPosition(eE)end;if dT.velocityReset then ey.SetVelocity(Vector3.zero)ey.SetAngularVelocity(Vector3.zero)end end end end end}return self end,CreateUpdateRoutine=function(eG,eH,eI,eJ)return coroutine.wrap(function()local eK=eJ or TimeSpan.FromSeconds(60)local eL=vci.me.UnscaledTime;local eM=eL;local cY=vci.me.Time;local eN=true;while a.InstanceID()==''or a.OwnID()==''do local eO=vci.me.UnscaledTime;if eO-eK>eL then local eP='TIMEOUT: Could not get '..(a.InstanceID()==''and'Instance ID'or'Own ID')a.LogError(eP)if eI then eI(eP)end;return-1 end;eM=eO;cY=vci.me.Time;eN=false;coroutine.yield(100)end;if eN then eM=vci.me.UnscaledTime;cY=vci.me.Time;coroutine.yield(100)end;if eH then eH()end;while true do local d0=vci.me.Time;local eQ=d0-cY;local eO=vci.me.UnscaledTime;local eR=eO-eM;eG(eQ,eR)cY=d0;eM=eO;coroutine.yield(100)end end)end,
CreateSlideSwitch=function(eS)local eT=a.NillableValue(eS.colliderItem)local eU=a.NillableValue(eS.baseItem)local eV=a.NillableValue(eS.knobItem)local eW=a.NillableValueOrDefault(eS.minValue,0)local eX=a.NillableValueOrDefault(eS.maxValue,10)if eW>=eX then error('SlideSwitch: Invalid argument: minValue >= maxValue',2)end;local eY=(eW+eX)*0.5;local eZ=function(aX)local e_,f0=a.PingPong(aX-eW,eX-eW)return e_+eW,f0 end;local aa=eZ(a.NillableValueOrDefault(eS.value,0))local f1=a.NillableIfHasValueOrElse(eS.tickFrequency,function(f2)if f2<=0 then error('SlideSwitch: Invalid argument: tickFrequency <= 0',3)end;return math.min(f2,eX-eW)end,function()return(eX-eW)/10.0 end)local f3=a.NillableIfHasValueOrElse(eS.tickVector,function(cv)return Vector3.__new(cv.x,cv.y,cv.z)end,function()return Vector3.__new(0.01,0.0,0.0)end)local f4=f3.magnitude;if f4<Vector3.kEpsilon then error('SlideSwitch: Invalid argument: tickVector is too small',2)end;local f5=a.NillableValueOrDefault(eS.snapToTick,true)local f6=eS.valueTextName;local f7=a.NillableValueOrDefault(eS.valueToText,tostring)local f8=TimeSpan.FromMilliseconds(1000)local f9=TimeSpan.FromMilliseconds(50)local fa=a.NillableValueOrDefault(eS.alignPeriod,TimeSpan.FromMilliseconds(500))local fb,fc;local dP={}local self;local fd=false;local fe=0;local ff=false;local fg=TimeSpan.Zero;local fh=TimeSpan.Zero;local fi=TimeSpan.Zero;local fj=function(fk,fl)if fl or fk~=aa then local dQ=aa;aa=fk;for dR,ao in pairs(dP)do dR(self,aa,dQ)end end;eV.SetLocalPosition((fk-eY)/f1*f3)if f6 then vci.assets.SetText(f6,f7(fk,self))end end;local fm=function()local fn=fb()local fo,fp=eZ(fn)local fq=fn+f1;local fr,fs=eZ(fq)assert(fr)local fk;if fp==fs or fo==eX or fo==eW then fk=fq else fk=fp>=0 and eX or eW end;fh=vci.me.UnscaledTime;if fk==eX or fk==eW then fg=fh end;fc(fk)end;a.NillableIfHasValueOrElse(eS.lsp,function(ft)if not a.NillableHasValue(eS.propertyName)then error('SlideSwitch: Invalid argument: propertyName is nil',3)end;local fu=a.NillableValue(eS.propertyName)fb=function()return ft.GetProperty(fu,aa)end;fc=function(aX)ft.SetProperty(fu,aX)end;ft.AddListener(function(bS,aj,fv,fw)if aj==fu then fj(eZ(fv),true)end end)end,function()local fv=aa;fb=function()return fv end;fc=function(aX)fv=aX;fj(eZ(aX),true)end end)self={GetColliderItem=function()return eT end,GetBaseItem=function()return eU end,GetKnobItem=function()return eV end,GetMinValue=function()return eW end,GetMaxValue=function()return eX end,GetValue=function()return aa end,GetScaleValue=function(fx,fy)assert(fx<=fy)return fx+(fy-fx)*(aa-eW)/(eX-eW)end,SetValue=function(aX)fc(eZ(aX))end,GetTickFrequency=function()return f1 end,IsSnapToTick=function()return f5 end,AddListener=function(dR)dP[dR]=dR end,RemoveListener=function(dR)dP[dR]=nil end,DoUse=function()if not fd then ff=true;fg=vci.me.UnscaledTime;fm()end end,DoUnuse=function()ff=false end,DoGrab=function()if not ff then fd=true;fe=(aa-eY)/f1 end end,DoUngrab=function()fd=false end,Update=function()if fd then if eT.IsMine then local fz=eT.GetPosition()-eU.GetPosition()local fA=eV.GetRotation()*f3;local fB=Vector3.Project(fz,fA)local fC=(Vector3.Dot(fA,fB)>=0 and 1 or-1)*fB.magnitude/f4+fe;local fD=fC+eY/f1;local fE=(f5 and a.Round(fD)or fD)*f1;local fk=a.Clamp(fE,eW,eX)if fk~=aa then fc(fk)end else fd=false end elseif ff then if eT.IsMine then local fF=vci.me.UnscaledTime;if fF>=fg+f8 and fF>=fh+f9 then fm()end else ff=false end elseif eT.IsMine then local fF=vci.me.UnscaledTime;if fF-fa>=fi then fi=fF;a.AlignSubItemOrigin(eU,eT)end end end}fj(eZ(fb()),false)return self end,CreateSubItemConnector=function()local fG=function(fH,ds,fI)fH.item=ds;fH.position=ds.GetPosition()fH.rotation=ds.GetRotation()fH.initialPosition=fH.position;fH.initialRotation=fH.rotation;fH.propagation=not not fI;return fH end;local fJ=function(fK)for ds,fH in pairs(fK)do fG(fH,ds,fH.propagation)end end;local fL=function(r,cJ,fH,fM,fN)local fz=r-fH.initialPosition;local fO=cJ*Quaternion.Inverse(fH.initialRotation)fH.position=r;fH.rotation=cJ;for ds,fP in pairs(fM)do if ds~=fH.item and(not fN or fN(fP))then fP.position,fP.rotation=a.RotateAround(fP.initialPosition+fz,fP.initialRotation,r,fO)ds.SetPosition(fP.position)ds.SetRotation(fP.rotation)end end end;local fQ={}local fR=true;local fS=false;local self;self={IsEnabled=function()return fR end,SetEnabled=function(c8)fR=c8;if c8 then fJ(fQ)fS=false end end,Contains=function(fT)return a.NillableHasValue(fQ[fT])end,Add=function(fU,fV)if not fU then error('SubItemConnector.Add: Invalid argument: subItems = '..tostring(fU),2)end;local fW=type(fU)=='table'and fU or{fU}fJ(fQ)fS=false;for ax,ds in pairs(fW)do fQ[ds]=fG({},ds,not fV)end end,Remove=function(fT)local M=a.NillableHasValue(fQ[fT])fQ[fT]=nil;return M end,RemoveAll=function()fQ={}return true end,Each=function(bi)for ds,fH in pairs(fQ)do if bi(ds,self)==false then return false end end end,GetItems=function()local fW={}for ds,fH in pairs(fQ)do table.insert(fW,ds)end;return fW end,Update=function()if not fR then return end;local fX=false;for ds,fH in pairs(fQ)do local bN=ds.GetPosition()local fY=ds.GetRotation()if not a.VectorApproximatelyEquals(bN,fH.position)or not a.QuaternionApproximatelyEquals(fY,fH.rotation)then if fH.propagation then if ds.IsMine then fL(bN,fY,fQ[ds],fQ,function(fP)if fP.item.IsMine then return true else fS=true;return false end end)fX=true;break else fS=true end else fS=true end end end;if not fX and fS then fJ(fQ)fS=false end end}return self end,UnixTime=function(c6)return a.PosixTime(c6)end,GetSubItemTransform=function(fT)local r=fT.GetPosition()local cJ=fT.GetRotation()local fZ=fT.GetLocalScale()return{positionX=r.x,positionY=r.y,positionZ=r.z,rotationX=cJ.x,rotationY=cJ.y,rotationZ=cJ.z,rotationW=cJ.w,scaleX=fZ.x,scaleY=fZ.y,scaleZ=fZ.z}end}a.SetConstEach(a,{LogLevelOff=0,LogLevelFatal=100,LogLevelError=200,LogLevelWarn=300,LogLevelInfo=400,LogLevelDebug=500,LogLevelTrace=600,LogLevelAll=0x7FFFFFFF,ColorHueSamples=10,ColorSaturationSamples=4,ColorBrightnessSamples=5,EscapeSequenceTag='#__CYTANB',SolidusTag='#__CYTANB_SOLIDUS',NegativeNumberTag='#__CYTANB_NEGATIVE_NUMBER',ArrayNumberTag='#__CYTANB_ARRAY_NUMBER',InstanceIDParameterName='__CYTANB_INSTANCE_ID',MessageValueParameterName='__CYTANB_MESSAGE_VALUE',MessageSenderOverride='__CYTANB_MESSAGE_SENDER_OVERRIDE',MessageOriginalSender='__CYTANB_MESSAGE_ORIGINAL_SENDER',TypeParameterName='__CYTANB_TYPE',ColorTypeName='Color',Vector2TypeName='Vector2',Vector3TypeName='Vector3',Vector4TypeName='Vector4',QuaternionTypeName='Quaternion',DedicatedCommentMessageName='cytanb.comment.a2a6a035-6b8d-4e06-b4f9-07e6209b0639',DedicatedNotificationMessageName='cytanb.notification.698ba55f-2b69-47f2-a68d-bc303994cff3',InstanceIDStatePatchingMessageName='cytanb.instance_id_state_patching.08504824-2041-42a2-9b2a-97448b4418b0',LOCAL_SHARED_PROPERTY_EXPIRED_KEY='__CYTANB_LOCAL_SHARED_PROPERTY_EXPIRED'})a.SetConstEach(a,{ColorMapSize=a.ColorHueSamples*a.ColorSaturationSamples*a.ColorBrightnessSamples,FatalLogLevel=a.LogLevelFatal,ErrorLogLevel=a.LogLevelError,WarnLogLevel=a.LogLevelWarn,InfoLogLevel=a.LogLevelInfo,DebugLogLevel=a.LogLevelDebug,TraceLogLevel=a.LogLevelTrace})c=a.MakeSearchPattern({'\t','\n','\v','\f','\r',' '},1,-1)d=a.MakeSearchPattern({'sprite=','SPRITE='})e=a.MakeSearchPattern({'0','1','2','3','4','5','6','7','8','9'},1,9)f,g=(function()local f_={'A','B','C','D','E','F','a','b','c','d','e','f','0','1','2','3','4','5','6','7','8','9'}return a.MakeSearchPattern(f_,4,4),a.MakeSearchPattern(f_,8,8)end)()h=a.MakeSearchPattern({'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','_','-','.','(',')','!','~','*','\'','%'},1,-1)i={{tag=a.NegativeNumberTag,search=a.NegativeNumberTag,replacement=''},{tag=a.ArrayNumberTag,search=a.ArrayNumberTag,replacement=''},{tag=a.SolidusTag,search=a.SolidusTag,replacement='/'},{tag=a.EscapeSequenceTag,search=a.EscapeSequenceTag..a.EscapeSequenceTag,replacement=a.EscapeSequenceTag}}j={[a.ColorTypeName]={compositionFieldNames=a.ListToMap({'r','g','b','a'}),compositionFieldLength=4,toTableFunc=a.ColorToTable,fromTableFunc=a.ColorFromTable},[a.Vector2TypeName]={compositionFieldNames=a.ListToMap({'x','y'}),compositionFieldLength=2,toTableFunc=a.Vector2ToTable,fromTableFunc=a.Vector2FromTable},[a.Vector3TypeName]={compositionFieldNames=a.ListToMap({'x','y','z'}),compositionFieldLength=3,toTableFunc=a.Vector3ToTable,fromTableFunc=a.Vector3FromTable},[a.Vector4TypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.Vector4ToTable,fromTableFunc=a.Vector4FromTable},[a.QuaternionTypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.QuaternionToTable,fromTableFunc=a.QuaternionFromTable}}k=a.ListToMap({a.NegativeNumberTag,a.ArrayNumberTag})l=a.LogLevelInfo;n={[a.LogLevelFatal]='FATAL',[a.LogLevelError]='ERROR',[a.LogLevelWarn]='WARN',[a.LogLevelInfo]='INFO',[a.LogLevelDebug]='DEBUG',[a.LogLevelTrace]='TRACE'}p=(function()local dI='eff3a188-bfc7-4b0e-93cb-90fd1adc508c'local dO=_G[dI]if not dO then dO={}_G[dI]=dO end;local g0=dO.clientID;if type(g0)~='string'then g0=tostring(a.RandomUUID())dO.clientID=g0 end;return g0 end)()return a end;if __CYTANB_EXPORT_MODULE then return setmetatable({},{__call=function(self,g1)return b(g1)end})else return b(_ENV)end end)()if __CYTANB_EXPORT_MODULE then return cytanb end
