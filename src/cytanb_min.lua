--! SPDX-License-Identifier: MIT
--! Copyright (c) 2019 oO (https://github.com/oocytanb)
---@type cytanb @Final Version. See `cytanb_annotations.lua`
local cytanb=(function()local a=function(_ENV)if not require or not vci then error('Invalid _ENV: Enable `__CYTANB_EXPORT_MODULE = true` line and pass valid _ENV of VCI-main if use cytanb.lua as module.',3)end;local b;local c;local d;local e;local f;local g;local h;local i;local j;local k;local l=false;local m;local n=''local o;local p;local q=function(r,s)local t=r+s-1;return r,t,t+1 end;local u=function(r,s)local t=r-s+1;return t,r,t-1 end;local v=function(w,x,y,r,z)local A=y.searchMap;for B,s in pairs(y.lengthList)do if s<=0 then error('SearchPattern: Invalid parameter: searchLen <= 0')else local C,D,t=z(r,s)if C>=1 and D<=x then local E=string.sub(w,C,D)if A[E]then return true,s,t end end end end;return false,-1,-1 end;local F=function(w,y,r,z)if w==nil or y==nil then return false,-1 end;if y.hasEmptySearch then return true,0 end;local x=string.len(w)local G=y.repeatMin;local H=y.repeatMax;local I=H<0;local J=r;local K=0;local L=0;while I or L<H do local M,N,t=v(w,x,y,J,z)if M then if N<=0 then error('SearchPattern: Invalid parameter')end;J=t;K=K+N;L=L+1 else break end end;if L>=G then return true,K else return false,-1 end end;local O=function(w,P,r,Q,z,R)if w==nil or P==nil then return false,-1 end;local s=string.len(P)if Q then local M=R(w,P)return M,M and s or-1 else if s==0 then return true,s end;local x=string.len(w)local C,D=z(r,s)if C>=1 and D<=x then local E=string.sub(w,C,D)local M=R(E,P)return M,M and s or-1 else return false,-1 end end end;local S=function(w,T,U)if T<=U then local V=string.unicode(w,T,T)if V>=0xDC00 or V<=0xDFFF then return true,1,V end end;return false,-1,nil end;local W=function(w,T,U,X)if T<=U then local Y,Z=p.StringStartsWith(w,c,T)if Y then local _=T+Z;if _<=U then local a0,a1=p.StringStartsWith(w,d,_)if a0 then local a2=_+a1;if a2<=U and string.unicode(w,a2,a2)==0x3E then local a3=tonumber(string.sub(w,_,_+a1-1))if a3<=X then return true,a2-T+1,a3 end end end end end end;return false,-1,nil end;local a4=function(a5,a6)for a7=1,4 do local a8=a5[a7]-a6[a7]if a8~=0 then return a8 end end;return 0 end;local a9;a9={__eq=function(a5,a6)return a5[1]==a6[1]and a5[2]==a6[2]and a5[3]==a6[3]and a5[4]==a6[4]end,__lt=function(a5,a6)return a4(a5,a6)<0 end,__le=function(a5,a6)return a4(a5,a6)<=0 end,__tostring=function(aa)local ab=aa[2]or 0;local ac=aa[3]or 0;return string.format('%08x-%04x-%04x-%04x-%04x%08x',bit32.band(aa[1]or 0,0xFFFFFFFF),bit32.band(bit32.rshift(ab,16),0xFFFF),bit32.band(ab,0xFFFF),bit32.band(bit32.rshift(ac,16),0xFFFF),bit32.band(ac,0xFFFF),bit32.band(aa[4]or 0,0xFFFFFFFF))end,__concat=function(a5,a6)local ad=getmetatable(a5)local ae=ad==a9 or type(ad)=='table'and ad.__concat==a9.__concat;local af=getmetatable(a6)local ag=af==a9 or type(af)=='table'and af.__concat==a9.__concat;if not ae and not ag then error('UUID: attempt to concatenate illegal values',2)end;return(ae and a9.__tostring(a5)or a5)..(ag and a9.__tostring(a6)or a6)end}local ah='__CYTANB_CONST_VARIABLES'local ai=function(table,aj)local ak=getmetatable(table)if ak then local al=rawget(ak,ah)if al then local am=rawget(al,aj)if type(am)=='function'then return am(table,aj)else return am end end end;return nil end;local an=function(table,aj,ao)local ak=getmetatable(table)if ak then local al=rawget(ak,ah)if al then if rawget(al,aj)~=nil then error('Cannot assign to read only field "'..aj..'"',2)end end end;rawset(table,aj,ao)end;local ap=function(aq,ar)if not aq then return false,false end;local as=aq[p.TypeParameterName]if p.NillableHasValue(as)and p.NillableValue(as)~=ar then return false,false end;return p.NillableIfHasValueOrElse(i[ar],function(at)local au=at.compositionFieldNames;local av=at.compositionFieldLength;local aw=false;for ax,ao in pairs(aq)do if au[ax]then av=av-1;if av<=0 and aw then break end elseif ax~=p.TypeParameterName then aw=true;if av<=0 then break end end end;return av<=0,aw end,function()return false,false end)end;local ay=function(w)return p.StringReplace(p.StringReplace(w,p.EscapeSequenceTag,p.EscapeSequenceTag..p.EscapeSequenceTag),'/',p.SolidusTag)end;local az=function(w,aA)local aB=string.len(w)local aC=string.len(p.EscapeSequenceTag)if aC>aB then return w end;local aD=''local a7=1;while a7<aB do local D,aE=string.find(w,p.EscapeSequenceTag,a7,true)if not D then if a7==1 then aD=w else aD=aD..string.sub(w,a7)end;break end;if D>a7 then aD=aD..string.sub(w,a7,D-1)end;local aF=false;for aG,aH in ipairs(h)do local M=p.StringStartsWith(w,aH.search,D)if M then aD=aD..(aA and aA(aH.tag)or aH.replacement)a7=D+string.len(aH.search)aF=true;break end end;if not aF then aD=aD..p.EscapeSequenceTag;a7=aE+1 end end;return aD end;local aI;aI=function(aJ,aK)if type(aJ)~='table'then return aJ end;if not aK then aK={}end;if aK[aJ]then error('circular reference')end;aK[aJ]=true;local aL={}for ax,ao in pairs(aJ)do local aM=type(ax)local aN;if aM=='string'then aN=ay(ax)elseif aM=='number'then aN=tostring(ax)..p.ArrayNumberTag else aN=ax end;local aO=type(ao)if aO=='string'then aL[aN]=ay(ao)elseif aO=='number'and ao<0 then aL[tostring(aN)..p.NegativeNumberTag]=tostring(ao)else aL[aN]=aI(ao,aK)end end;aK[aJ]=nil;return aL end;local aP;aP=function(aL,aQ)if type(aL)~='table'then return aL end;local aJ={}for ax,ao in pairs(aL)do local aN;local aR=false;if type(ax)=='string'then local aS=false;aN=az(ax,function(aT)if aT==p.NegativeNumberTag then aR=true elseif aT==p.ArrayNumberTag then aS=true end;return nil end)if aS then aN=tonumber(aN)or aN end else aN=ax;aR=false end;if aR and type(ao)=='string'then aJ[aN]=tonumber(ao)elseif type(ao)=='string'then aJ[aN]=az(ao,function(aT)return j[aT]end)else aJ[aN]=aP(ao,aQ)end end;if not aQ then p.NillableIfHasValue(aJ[p.TypeParameterName],function(aU)p.NillableIfHasValue(i[aU],function(at)local aV,aw=at.fromTableFunc(aJ)if not aw then p.NillableIfHasValue(aV,function(aa)aJ=aa end)end end)end)end;return aJ end;local aW={['nil']=function(aX)return nil end,['number']=function(aX)return tonumber(aX)end,['string']=function(aX)return tostring(aX)end,['boolean']=function(aX)if aX then return true else return false end end}local aY=function(aX,aZ)local a_=type(aX)if a_==aZ then return aX else local b0=aW[aZ]if b0 then return b0(aX)else return nil end end end;local b1=function(b2,b3)if b3 and type(b3)=='table'then local b4={}for aj,aX in pairs(b2)do local b5=b3[aj]local b6;if b5==nil then b6=aX else local b7=aY(b5,type(aX))if b7==nil then b6=aX else b6=b7 end end;b4[aj]=b6 end;b4[p.MessageOriginalSender]=b2;return b4 else return b2 end end;local b8=function(b9)local aL=p.NillableIfHasValueOrElse(b9,function(aJ)if type(aJ)~='table'then error('MakeMessageData: Invalid argument: table expected',4)end;return p.TableToSerializable(aJ)end,function()return{}end)local ba=p.InstanceID()if ba==''then p.LogWarn('MakeMessageData: InstanceID is empty.')end;aL[p.InstanceIDParameterName]=ba;return json.serialize(aL)end;local bb=function(bc,bd,b3,be)local bf={type=be,name='',commentSource=''}local b9={[p.MessageValueParameterName]=tostring(bd),[p.MessageSenderOverride]=type(b3)=='table'and p.Extend(bf,b3,true)or bf}p.EmitMessage(bc,b9)end;local bg=function(bc,bh,bi)local bj,bk=(function()local b0=function(b2,bl,b9)local bd=tostring(b9[p.MessageValueParameterName]or'')bi(b2,bh,bd)end;local bj=p.OnMessage(bc,b0)local bk=p.OnMessage(bh,b0)return bj,bk end)()return{Off=function()bj.Off()bk.Off()end}end;p={InstanceID=function()return vci.assets.GetInstanceId()or''end,OwnID=function()if n==''then local bm=vci.studio.GetLocalAvatar()if bm then n=bm.GetId()or''end end;return n end,ClientID=function()return o end,NillableHasValue=function(bn)return bn~=nil end,NillableValue=function(bn)if bn==nil then error('nillable: value is nil',2)end;return bn end,NillableValueOrDefault=function(bn,bo)if bn==nil then if bo==nil then error('nillable: defaultValue is nil',2)end;return bo else return bn end end,NillableIfHasValue=function(bn,bi)if bn==nil then return nil else return bi(bn)end end,NillableIfHasValueOrElse=function(bn,bi,bp)if bn==nil then return bp()else return bi(bn)end end,MakeSearchPattern=function(bq,br,bs)local G=br and math.floor(br)or 1;if G<0 then error('SearchPattern: Invalid parameter: optRepeatMin < 0')end;local H=bs and math.floor(bs)or G;if H>=0 and H<G then error('SearchPattern: Invalid parameter: repeatMax < repeatMin')end;local bt=H==0;local A={}local bu={}local bv={}local bw=0;for bx,by in pairs(bq)do local s=string.len(by)if s==0 then bt=true else A[by]=s;if not bu[s]then bu[s]=true;bw=bw+1;bv[bw]=s end end end;table.sort(bv,function(bz,M)return bz>M end)return{hasEmptySearch=bt,searchMap=A,lengthList=bv,repeatMin=G,repeatMax=H}end,StringStartsWith=function(w,P,bA)local J=bA and math.max(1,math.floor(bA))or 1;if type(P)=='table'then return F(w,P,J,q)else return O(w,P,J,J==1,q,string.startsWith)end end,StringEndsWith=function(w,P,bB)if w==nil then return false,-1 end;local x=string.len(w)local J=bB and math.min(x,math.floor(bB))or x;if type(P)=='table'then return F(w,P,J,u)else return O(w,P,J,J==x,u,string.endsWith)end end,StringTrimStart=function(w,bC)if w==nil or w==''then return w end;local M,N=p.StringStartsWith(w,bC or b)if M and N>=1 then return string.sub(w,N+1)else return w end end,StringTrimEnd=function(w,bC)if w==nil or w==''then return w end;local M,N=p.StringEndsWith(w,bC or b)if M and N>=1 then return string.sub(w,1,string.len(w)-N)else return w end end,StringTrim=function(w,bC)return p.StringTrimEnd(p.StringTrimStart(w,bC),bC)end,StringReplace=function(w,bD,bE)local bF;local aB=string.len(w)if bD==''then bF=bE;for a7=1,aB do bF=bF..string.sub(w,a7,a7)..bE end else bF=''local a7=1;while true do local C,D=string.find(w,bD,a7,true)if C then bF=bF..string.sub(w,a7,C-1)..bE;a7=D+1;if a7>aB then break end else bF=a7==1 and w or bF..string.sub(w,a7)break end end end;return bF end,
StringEachCode=function(w,bi,bG,a7,bH,bI,bJ,bK)local aB=string.len(w)if aB==0 then return 0,0,0 end;local bL=a7 and math.floor(a7)or 1;local U=bH and math.floor(bH)or aB;local X=math.min(bK or 3182,0x1FFFFF)if bL<=0 or U>aB or bL>U then error('StringEachCode: invalid range')end;local bM=0;local bN=bL;local bO=bN;while bN<=U do local C=bN;local V=string.unicode(w,bN,bN)if V>=0xD800 and V<=0xDBFF then local M,N=S(w,bN+1,U)if M then bN=bN+N end elseif bI and V==0x3C then local M,N,a3=W(w,bN+1,U,X)if M and(not bJ or bJ(a3))then bN=bN+N end end;bM=bM+1;bO=bN;if bi and bi(string.sub(w,C,bN),bM,bG,C,bN)==false then break end;bN=bN+1 end;return bM,bL,bO end,SetConst=function(bD,bc,aa)if type(bD)~='table'then error('Cannot set const to non-table target',2)end;local bP=getmetatable(bD)local ak=bP or{}local bQ=rawget(ak,ah)if rawget(bD,bc)~=nil then error('Non-const field "'..bc..'" already exists',2)end;if not bQ then bQ={}rawset(ak,ah,bQ)ak.__index=ai;ak.__newindex=an end;rawset(bQ,bc,aa)if not bP then setmetatable(bD,ak)end;return bD end,SetConstEach=function(bD,bR)for ax,ao in pairs(bR)do p.SetConst(bD,ax,ao)end;return bD end,Extend=function(bD,bS,bT,bU,aK)if bD==bS or type(bD)~='table'or type(bS)~='table'then return bD end;if bT then if not aK then aK={}end;if aK[bS]then error('circular reference')end;aK[bS]=true end;for ax,ao in pairs(bS)do if bT and type(ao)=='table'then local bV=bD[ax]bD[ax]=p.Extend(type(bV)=='table'and bV or{},ao,bT,bU,aK)else bD[ax]=ao end end;if not bU then local bW=getmetatable(bS)if type(bW)=='table'then if bT then local bX=getmetatable(bD)setmetatable(bD,p.Extend(type(bX)=='table'and bX or{},bW,true))else setmetatable(bD,bW)end end end;if bT then aK[bS]=nil end;return bD end,Vars=function(ao,bY,bZ,aK)local b_;if bY then b_=bY~='__NOLF'else bY='  'b_=true end;if not bZ then bZ=''end;if not aK then aK={}end;local c0=type(ao)if c0=='table'then aK[ao]=aK[ao]and aK[ao]+1 or 1;local c1=b_ and bZ..bY or''local w='('..tostring(ao)..') {'local c2=true;for aj,aX in pairs(ao)do if c2 then c2=false else w=w..(b_ and','or', ')end;if b_ then w=w..'\n'..c1 end;local c3=type(aj)local c4=(c3=='function'or c3=='thread'or c3=='userdata'or c3=='table')and'('..c3 ..')'or tostring(aj)if type(aX)=='table'and aK[aX]and aK[aX]>0 then w=w..c4 ..' = ('..tostring(aX)..')'else w=w..c4 ..' = '..p.Vars(aX,bY,c1,aK)end end;if not c2 and b_ then w=w..'\n'..bZ end;w=w..'}'aK[ao]=aK[ao]-1;if aK[ao]<=0 then aK[ao]=nil end;return w elseif c0=='function'or c0=='thread'or c0=='userdata'then return'('..c0 ..')'elseif c0=='string'then return'('..c0 ..') '..string.format('%q',ao)else return'('..c0 ..') '..tostring(ao)end end,PosixTime=(function()local c5=os.time({year=1970,month=1,day=2,hour=0,min=0,sec=0,isdst=false})if not c5 then error('unexpected')end;local c6=os.date('!*t',c5)local c7=(((c6.day-1)*24+c6.hour)*60+c6.min)*60+c6.sec;return function(c8)return os.difftime(c8 or os.time(),c5)+c7 end end)(),GetLogLevel=function()return k end,SetLogLevel=function(c9)k=c9 end,IsOutputLogLevelEnabled=function()return l end,SetOutputLogLevelEnabled=function(ca)l=not not ca end,Log=function(c9,...)if c9<=k then local cb=l and(m[c9]or'LOG LEVEL '..tostring(c9))..' | 'or''local cc=table.pack(...)if cc.n==1 then local ao=cc[1]if ao~=nil then local w=type(ao)=='table'and p.Vars(ao)or tostring(ao)print(l and cb..w or w)else print(cb)end else local w=cb;for a7=1,cc.n do local ao=cc[a7]if ao~=nil then w=w..(type(ao)=='table'and p.Vars(ao)or tostring(ao))end end;print(w)end end end,LogFatal=function(...)p.Log(p.LogLevelFatal,...)end,LogError=function(...)p.Log(p.LogLevelError,...)end,LogWarn=function(...)p.Log(p.LogLevelWarn,...)end,LogInfo=function(...)p.Log(p.LogLevelInfo,...)end,LogDebug=function(...)p.Log(p.LogLevelDebug,...)end,LogTrace=function(...)p.Log(p.LogLevelTrace,...)end,FatalLog=function(...)p.LogFatal(...)end,ErrorLog=function(...)p.LogError(...)end,WarnLog=function(...)p.LogWarn(...)end,InfoLog=function(...)p.LogInfo(...)end,DebugLog=function(...)p.LogDebug(...)end,TraceLog=function(...)p.LogTrace(...)end,ListToMap=function(cd,ce)local cf={}if ce==nil then for ax,ao in pairs(cd)do cf[ao]=ao end elseif type(ce)=='function'then for ax,ao in pairs(cd)do local cg,ch=ce(ao)cf[cg]=ch end else for ax,ao in pairs(cd)do cf[ao]=ce end end;return cf end,Round=function(ci,cj)if cj then local ck=10^cj;return math.floor(ci*ck+0.5)/ck else return math.floor(ci+0.5)end end,Clamp=function(aa,cl,cm)return math.max(cl,math.min(aa,cm))end,Lerp=function(bz,M,c0)if c0<=0.0 then return bz elseif c0>=1.0 then return M else return bz+(M-bz)*c0 end end,LerpUnclamped=function(bz,M,c0)if c0==0.0 then return bz elseif c0==1.0 then return M else return bz+(M-bz)*c0 end end,PingPong=function(c0,cn)if cn==0 then return 0,1 end;local co=math.floor(c0/cn)local cp=c0-co*cn;if co<0 then if(co+1)%2==0 then return cn-cp,-1 else return cp,1 end else if co%2==0 then return cp,1 else return cn-cp,-1 end end end,VectorApproximatelyEquals=function(cq,cr)return(cq-cr).sqrMagnitude<1E-10 end,QuaternionApproximatelyEquals=function(cq,cr)local cs=Quaternion.Dot(cq,cr)return cs<1.0+1E-06 and cs>1.0-1E-06 end,QuaternionToAngleAxis=function(ct)local co=ct.normalized;local cu=math.acos(co.w)local cv=math.sin(cu)local cw=math.deg(cu*2.0)local cx;if math.abs(cv)<=Quaternion.kEpsilon then cx=Vector3.right else local C=1.0/cv;cx=Vector3.__new(co.x*C,co.y*C,co.z*C)end;return cw,cx end,QuaternionTwist=function(ct,cy)if cy.sqrMagnitude<Vector3.kEpsilonNormalSqrt then return Quaternion.identity end;local cz=Vector3.__new(ct.x,ct.y,ct.z)if cz.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cA=Vector3.Project(cz,cy)if cA.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cB=Quaternion.__new(cA.x,cA.y,cA.z,ct.w)cB.Normalize()return cB else return Quaternion.AngleAxis(0,cy)end else local cC=p.QuaternionToAngleAxis(ct)return Quaternion.AngleAxis(cC,cy)end end,ApplyQuaternionToVector3=function(ct,cD)local cE=ct.w*cD.x+ct.y*cD.z-ct.z*cD.y;local cF=ct.w*cD.y-ct.x*cD.z+ct.z*cD.x;local cG=ct.w*cD.z+ct.x*cD.y-ct.y*cD.x;local cH=-ct.x*cD.x-ct.y*cD.y-ct.z*cD.z;return Vector3.__new(cH*-ct.x+cE*ct.w+cF*-ct.z-cG*-ct.y,cH*-ct.y-cE*-ct.z+cF*ct.w+cG*-ct.x,cH*-ct.z+cE*-ct.y-cF*-ct.x+cG*ct.w)end,RotateAround=function(cI,cJ,cK,cL)return cK+cL*(cI-cK),cL*cJ end,Random32=function()return bit32.band(math.random(-2147483648,2147483646)+2147483648,0xFFFFFFFF)end,RandomUUID=function()return p.UUIDFromNumbers(p.Random32(),bit32.bor(0x4000,bit32.band(p.Random32(),0xFFFF0FFF)),bit32.bor(0x80000000,bit32.band(p.Random32(),0x3FFFFFFF)),p.Random32())end,UUIDString=function(cM)return a9.__tostring(cM)end,UUIDFromNumbers=function(...)local cN=...local c0=type(cN)local cO,cP,cQ,cR;if c0=='table'then cO=cN[1]cP=cN[2]cQ=cN[3]cR=cN[4]else cO,cP,cQ,cR=...end;local cM={bit32.band(cO or 0,0xFFFFFFFF),bit32.band(cP or 0,0xFFFFFFFF),bit32.band(cQ or 0,0xFFFFFFFF),bit32.band(cR or 0,0xFFFFFFFF)}setmetatable(cM,a9)return cM end,UUIDFromString=function(w)local aB=string.len(w)if aB==32 then local cM=p.UUIDFromNumbers(0,0,0,0)for a7=1,4 do local C=1+(a7-1)*8;if not p.StringStartsWith(w,f,C)then return nil end;cM[a7]=tonumber(string.sub(w,C,C+7),16)end;return cM elseif aB==36 then if not p.StringStartsWith(w,f,1)then return nil end;local cO=tonumber(string.sub(w,1,8),16)if not p.StringStartsWith(w,'-',9)or not p.StringStartsWith(w,e,10)or not p.StringStartsWith(w,'-',14)or not p.StringStartsWith(w,e,15)then return nil end;local cP=tonumber(string.sub(w,10,13)..string.sub(w,15,18),16)if not p.StringStartsWith(w,'-',19)or not p.StringStartsWith(w,e,20)or not p.StringStartsWith(w,'-',24)or not p.StringStartsWith(w,e,25)then return nil end;local cQ=tonumber(string.sub(w,20,23)..string.sub(w,25,28),16)if not p.StringStartsWith(w,f,29)then return nil end;local cR=tonumber(string.sub(w,29),16)return p.UUIDFromNumbers(cO,cP,cQ,cR)else return nil end end,ParseUUID=function(w)return p.UUIDFromString(w)end,CreateCircularQueue=function(cS)if type(cS)~='number'or cS<1 then error('CreateCircularQueue: Invalid argument: capacity = '..tostring(cS),2)end;local self;local cT=math.floor(cS)local aD={}local cU=0;local cV=0;local cW=0;self={Size=function()return cW end,Clear=function()cU=0;cV=0;cW=0 end,IsEmpty=function()return cW==0 end,Offer=function(cX)aD[cU+1]=cX;cU=(cU+1)%cT;if cW<cT then cW=cW+1 else cV=(cV+1)%cT end;return true end,OfferFirst=function(cX)cV=(cT+cV-1)%cT;aD[cV+1]=cX;if cW<cT then cW=cW+1 else cU=(cT+cU-1)%cT end;return true end,Poll=function()if cW==0 then return nil else local cX=aD[cV+1]cV=(cV+1)%cT;cW=cW-1;return cX end end,PollLast=function()if cW==0 then return nil else cU=(cT+cU-1)%cT;local cX=aD[cU+1]cW=cW-1;return cX end end,Peek=function()if cW==0 then return nil else return aD[cV+1]end end,PeekLast=function()if cW==0 then return nil else return aD[(cT+cU-1)%cT+1]end end,Get=function(cY)if cY<1 or cY>cW then p.LogError('CreateCircularQueue.Get: index is outside the range: '..cY)return nil end;return aD[(cV+cY-1)%cT+1]end,IsFull=function()return cW>=cT end,MaxSize=function()return cT end}return self end,DetectClicks=function(cZ,c_,d0)local bM=cZ or 0;local d1=d0 or TimeSpan.FromMilliseconds(500)local d2=vci.me.Time;local d3=c_ and d2>c_+d1 and 1 or bM+1;return d3,d2 end,ColorRGBToHSV=function(d4)local d5,am,d6,ao=Color.RGBToHSV(d4)return am,d6,ao end,ColorFromARGB32=function(d7)local d8=type(d7)=='number'and d7 or 0xFF000000;return Color.__new(bit32.band(bit32.rshift(d8,16),0xFF)/0xFF,bit32.band(bit32.rshift(d8,8),0xFF)/0xFF,bit32.band(d8,0xFF)/0xFF,bit32.band(bit32.rshift(d8,24),0xFF)/0xFF)end,ColorToARGB32=function(d4)return bit32.bor(bit32.lshift(bit32.band(p.Round(0xFF*d4.a),0xFF),24),bit32.lshift(bit32.band(p.Round(0xFF*d4.r),0xFF),16),bit32.lshift(bit32.band(p.Round(0xFF*d4.g),0xFF),8),bit32.band(p.Round(0xFF*d4.b),0xFF))end,
ColorFromIndex=function(d9,da,db,dc,dd)local de=math.max(math.floor(da or p.ColorHueSamples),1)local df=dd and de or de-1;local dg=math.max(math.floor(db or p.ColorSaturationSamples),1)local dh=math.max(math.floor(dc or p.ColorBrightnessSamples),1)local cY=p.Clamp(math.floor(d9 or 0),0,de*dg*dh-1)local di=cY%de;local dj=math.floor(cY/de)local C=dj%dg;local dk=math.floor(dj/dg)if dd or di~=df then local am=di/df;local d6=(dg-C)/dg;local ao=(dh-dk)/dh;return Color.HSVToRGB(am,d6,ao)else local ao=(dh-dk)/dh*C/(dg-1)return Color.HSVToRGB(0.0,0.0,ao)end end,ColorToIndex=function(d4,da,db,dc,dd)local de=math.max(math.floor(da or p.ColorHueSamples),1)local df=dd and de or de-1;local dg=math.max(math.floor(db or p.ColorSaturationSamples),1)local dh=math.max(math.floor(dc or p.ColorBrightnessSamples),1)local am,d6,ao=p.ColorRGBToHSV(d4)local C=p.Round(dg*(1.0-d6))if dd or C<dg then local dl=p.Round(df*am)if dl>=df then dl=0 end;if C>=dg then C=dg-1 end;local dk=math.min(dh-1,p.Round(dh*(1.0-ao)))return dl+de*(C+dg*dk)else local dm=p.Round((dg-1)*ao)if dm==0 then local dn=p.Round(dh*(1.0-ao))if dn>=dh then return de-1 else return de*(1+p.Round(ao*(dg-1)/(dh-dn)*dh)+dg*dn)-1 end else return de*(1+dm+dg*p.Round(dh*(1.0-ao*(dg-1)/dm)))-1 end end end,ColorToTable=function(d4)return d4 and{[p.TypeParameterName]=p.ColorTypeName,r=d4.r,g=d4.g,b=d4.b,a=d4.a}or nil end,ColorFromTable=function(aq)local M,aw=ap(aq,p.ColorTypeName)return M and Color.__new(aq.r,aq.g,aq.b,aq.a)or nil,aw end,Vector2ToTable=function(aa)return aa and{[p.TypeParameterName]=p.Vector2TypeName,x=aa.x,y=aa.y}or nil end,Vector2FromTable=function(aq)local M,aw=ap(aq,p.Vector2TypeName)return M and Vector2.__new(aq.x,aq.y)or nil,aw end,Vector3ToTable=function(aa)return aa and{[p.TypeParameterName]=p.Vector3TypeName,x=aa.x,y=aa.y,z=aa.z}or nil end,Vector3FromTable=function(aq)local M,aw=ap(aq,p.Vector3TypeName)return M and Vector3.__new(aq.x,aq.y,aq.z)or nil,aw end,Vector4ToTable=function(aa)return aa and{[p.TypeParameterName]=p.Vector4TypeName,x=aa.x,y=aa.y,z=aa.z,w=aa.w}or nil end,Vector4FromTable=function(aq)local M,aw=ap(aq,p.Vector4TypeName)return M and Vector4.__new(aq.x,aq.y,aq.z,aq.w)or nil,aw end,QuaternionToTable=function(aa)return aa and{[p.TypeParameterName]=p.QuaternionTypeName,x=aa.x,y=aa.y,z=aa.z,w=aa.w}or nil end,QuaternionFromTable=function(aq)local M,aw=ap(aq,p.QuaternionTypeName)return M and Quaternion.__new(aq.x,aq.y,aq.z,aq.w)or nil,aw end,TableToSerializable=function(aJ)return aI(aJ)end,TableFromSerializable=function(aL,aQ)return aP(aL,aQ)end,TableToSerialiable=function(aJ)return aI(aJ)end,TableFromSerialiable=function(aL,aQ)return aP(aL,aQ)end,EmitMessage=function(bc,b9)vci.message.Emit(bc,b8(b9))end,EmitMessageTo=function(bc,b9,dp)if dp~=nil and dp~=''then vci.message.EmitWithId(bc,b8(b9),dp)else p.LogWarn('EmitMessageTo: targetID is not specified: '..tostring(dp))end end,EmitInstanceMessage=function(bc,b9)p.EmitMessageTo(bc,b9,p.InstanceID())end,OnMessage=function(bc,bi)local b0=function(b2,bl,bd)if type(bd)=='string'and string.startsWith(bd,'{')then local dq,aL=pcall(json.parse,bd)if dq and type(aL)=='table'and aL[p.InstanceIDParameterName]then local dr=p.TableFromSerializable(aL)bi(b1(b2,dr[p.MessageSenderOverride]),bl,dr)return end end;bi(b2,bl,{[p.MessageValueParameterName]=bd})end;vci.message.On(bc,b0)return{Off=function()if b0 then b0=nil end end}end,OnInstanceMessage=function(bc,bi)local b0=function(b2,bl,b9)local ba=p.InstanceID()if ba~=''and ba==b9[p.InstanceIDParameterName]then bi(b2,bl,b9)end end;return p.OnMessage(bc,b0)end,EmitCommentMessage=function(bd,b3)bb(p.DedicatedCommentMessageName,bd,b3,'comment')end,OnCommentMessage=function(bi)return bg(p.DedicatedCommentMessageName,'comment',bi)end,EmitNotificationMessage=function(bd,b3)bb(p.DedicatedNotificationMessageName,bd,b3,'notification')end,OnNotificationMessage=function(bi)return bg(p.DedicatedNotificationMessageName,'notification',bi)end,GetEffekseerEmitterMap=function(bc)local ds=vci.assets.GetEffekseerEmitters(bc)if not ds then return nil end;local cf={}for a7,dt in pairs(ds)do cf[dt.EffectName]=dt end;return cf end,GetAudioSourceMap=function(du)local cf={}for d5,dv in pairs(du.GetAudioSources()or{})do cf[dv.ClipName or'']=dv end;return cf end,ParseTagString=function(w)local bN=string.find(w,'#',1,true)if not bN then return{},w end;local dw={}local dx=string.sub(w,1,bN-1)bN=bN+1;local aB=string.len(w)while bN<=aB do local dy,dz=p.StringStartsWith(w,g,bN)if dy then local dA=bN+dz;local dB=string.sub(w,bN,dA-1)local dC=dB;bN=dA;if bN<=aB and p.StringStartsWith(w,'=',bN)then bN=bN+1;local dD,dE=p.StringStartsWith(w,g,bN)if dD then local dF=bN+dE;dC=string.sub(w,bN,dF-1)bN=dF else dC=''end end;dw[dB]=dC end;bN=string.find(w,'#',bN,true)if not bN then break end;bN=bN+1 end;return dw,dx end,CalculateSIPrefix=(function()local dG=9;local dH={'y','z','a','f','p','n','u','m','','k','M','G','T','P','E','Z','Y'}local dI=#dH;return function(ci)local dJ=ci==0 and 0 or p.Clamp(math.floor(math.log(math.abs(ci),1000)),1-dG,dI-dG)return dJ==0 and ci or ci/1000^dJ,dH[dG+dJ],dJ*3 end end)(),CreateLocalSharedProperties=function(dK,dL)local dM=TimeSpan.FromSeconds(5)local dN='33657f0e-7c44-4ee7-acd9-92dd8b8d807a'local dO='__CYTANB_LOCAL_SHARED_PROPERTIES_LISTENER_MAP'if type(dK)~='string'or string.len(dK)<=0 or type(dL)~='string'or string.len(dL)<=0 then error('LocalSharedProperties: Invalid arguments',2)end;local dP=_G[dN]if not dP then dP={}_G[dN]=dP end;dP[dL]=vci.me.UnscaledTime;local dQ=_G[dK]if not dQ then dQ={[dO]={}}_G[dK]=dQ end;local dR=dQ[dO]local self;self={GetLspID=function()return dK end,GetLoadID=function()return dL end,GetProperty=function(aj,bo)local aa=dQ[aj]if aa==nil then return bo else return aa end end,SetProperty=function(aj,aa)if aj==dO then error('LocalSharedProperties: Invalid argument: key = ',aj,2)end;local d2=vci.me.UnscaledTime;local dS=dQ[aj]dQ[aj]=aa;for dT,ba in pairs(dR)do local c0=dP[ba]if c0 and c0+dM>=d2 then dT(self,aj,aa,dS)else dT(self,p.LOCAL_SHARED_PROPERTY_EXPIRED_KEY,true,false)dR[dT]=nil;dP[ba]=nil end end end,Clear=function()for aj,aa in pairs(dQ)do if aj~=dO then self.SetProperty(aj,nil)end end end,Each=function(bi)for aj,aa in pairs(dQ)do if aj~=dO and bi(aa,aj,self)==false then return false end end end,AddListener=function(dT)dR[dT]=dL end,RemoveListener=function(dT)dR[dT]=nil end,UpdateAlive=function()dP[dL]=vci.me.UnscaledTime end}return self end,EstimateFixedTimestep=function(dU,dV)local dW=dV or{}local dX=dW.mass or 1;if dX<=0 then error('EstimateFixedTimestep: Invalid argument: mass <= 0',2)end;local dY=dW.acceleration or 1000;if dY<=0 then error('EstimateFixedTimestep: Invalid argument: acceleration <= 0',2)end;local dZ=dW.startCalcTime or TimeSpan.FromSeconds(5)local d_=dW.stopCalcTime or TimeSpan.FromSeconds(30)if dZ<TimeSpan.Zero or dZ>d_ then error('EstimateFixedTimestep: Invalid argument: startCalcTime < Zero or startCalcTime > stopCalcTime',2)end;local e0=dW.minCalcInterval or TimeSpan.MaxValue;local e1=dW.maxCalcInterval or TimeSpan.MaxValue;if e0<=TimeSpan.Zero or e0>e1 then error('EstimateFixedTimestep: Invalid argument: minCalcInterval <= Zero or minCalcInterval > maxCalcInterval',2)end;local e2=e0;local e3=e0<TimeSpan.MaxValue;local e4=dW.defaultTimestep or TimeSpan.FromSeconds(0.02)local e5=e4;if e4<=TimeSpan.Zero then error('EstimateFixedTimestep: Invalid argument: timestep <= Zero',2)end;local e6=0xFFFF;local e7=e6;local e8=e6;local e9=p.CreateCircularQueue(dW.queueSize or 64)if e9.MaxSize()<=1 then error('EstimateFixedTimestep: Invalid argument: queueSize <= 1',2)end;local ea=vci.me.Time;local eb=ea;local ec=ea;local ed=p.Random32()local ee=Vector3.__new(bit32.bor(0x100,bit32.band(ed,0x3F)),bit32.bor(0x100,bit32.band(bit32.rshift(ed,8),0x3F)),0)local ef=1;local eg=function(cl,cm)local eh=cl==e0 and 120 or 1200;local cv=cl.TotalSeconds;return TimeSpan.FromSeconds(math.min(cv+math.random()*math.min(eh,cm.TotalSeconds-cv),TimeSpan.MaxValue.TotalSeconds-1))end;local ei={function()e9.Clear()dU.SetPosition(ee)dU.SetRotation(Quaternion.identity)dU.SetVelocity(Vector3.zero)dU.SetAngularVelocity(Vector3.zero)ef=ef+1;return e4 end,function()dU.AddForce(Vector3.__new(0.0,0.0,dX*dY))ea=vci.me.Time;ec=ea;ef=ef+1;return e4 end,function()local ej=ec;ec=vci.me.Time;local ek=ej-ea;local el=ek.TotalSeconds;if el<=1E-10 then return e4 end;local em=dU.GetPosition().z-ee.z;local en=em/el/dY;if en<=1E-10 then return e4 end;e9.Offer(en)local eo=e9.Size()if eo>=2 and ek>=dZ then local ep=0.0;for a7=1,eo do ep=ep+e9.Get(a7)end;local eq=ep/eo;local er=0.0;for a7=1,eo do er=er+(e9.Get(a7)-eq)^2 end;local es=er/eo;if es<e8 then e8=es;e5=TimeSpan.FromSeconds(eq)eb=ej end;if ek>d_ then if math.abs((e5-e4).TotalSeconds)>=0.001 or e8<e7 then e4=e5;e7=e8 end;eb=ej;if e2<TimeSpan.MaxValue then e2=eg(e2,e1)end;dU.SetPosition(ee)dU.SetRotation(Quaternion.identity)dU.SetVelocity(Vector3.zero)dU.SetAngularVelocity(Vector3.zero)ef=ef+1 end else e5=TimeSpan.FromSeconds(en)eb=ej end;if e7>=e6 then e7=e8;e4=e5 end;return e4 end,function()ec=vci.me.Time;return e4 end}local et=#ei;local self={Timestep=function()return e4 end,Precision=function()return e7 end,IsFinished=function()return ef==et end,Update=function()if e3 and ef==et and ec-e2>=eb then ef=1 end;return ei[ef]()end}return self end,AlignSubItemOrigin=function(eu,du,ev)local ew=eu.GetRotation()if not p.QuaternionApproximatelyEquals(du.GetRotation(),ew)then du.SetRotation(ew)end;local ex=eu.GetPosition()if not p.VectorApproximatelyEquals(du.GetPosition(),ex)then du.SetPosition(ex)end;if ev then du.SetVelocity(Vector3.zero)du.SetAngularVelocity(Vector3.zero)end end,
CreateSubItemGlue=function()local ey={}local self;self={Contains=function(ez,eA)return p.NillableIfHasValueOrElse(ey[ez],function(bR)return p.NillableHasValue(bR[eA])end,function()return false end)end,Add=function(ez,eB,ev)if not ez or not eB then local eC='SubItemGlue.Add: Invalid arguments '..(not ez and', parent = '..tostring(ez)or'')..(not eB and', children = '..tostring(eB)or'')error(eC,2)end;local bR=p.NillableIfHasValueOrElse(ey[ez],function(eD)return eD end,function()local eD={}ey[ez]=eD;return eD end)if type(eB)=='table'then for aj,aX in pairs(eB)do bR[aX]={velocityReset=not not ev}end else bR[eB]={velocityReset=not not ev}end end,Remove=function(ez,eA)return p.NillableIfHasValueOrElse(ey[ez],function(bR)if p.NillableHasValue(bR[eA])then bR[eA]=nil;return true else return false end end,function()return false end)end,RemoveParent=function(ez)if p.NillableHasValue(ey[ez])then ey[ez]=nil;return true else return false end end,RemoveAll=function()ey={}return true end,Each=function(bi,eE)return p.NillableIfHasValueOrElse(eE,function(ez)return p.NillableIfHasValue(ey[ez],function(bR)for eA,dV in pairs(bR)do if bi(eA,ez,self)==false then return false end end end)end,function()for ez,bR in pairs(ey)do if self.Each(bi,ez)==false then return false end end end)end,Update=function(eF)for ez,bR in pairs(ey)do local eG=ez.GetPosition()local eH=ez.GetRotation()for eA,dV in pairs(bR)do if eF or eA.IsMine then if not p.QuaternionApproximatelyEquals(eA.GetRotation(),eH)then eA.SetRotation(eH)end;if not p.VectorApproximatelyEquals(eA.GetPosition(),eG)then eA.SetPosition(eG)end;if dV.velocityReset then eA.SetVelocity(Vector3.zero)eA.SetAngularVelocity(Vector3.zero)end end end end end}return self end,CreateUpdateRoutine=function(eI,eJ,eK,eL)return coroutine.wrap(function()local eM=eL or TimeSpan.FromSeconds(60)local eN=vci.me.UnscaledTime;local eO=eN;local c_=vci.me.Time;local eP=true;while p.InstanceID()==''or p.OwnID()==''do local eQ=vci.me.UnscaledTime;if eQ-eM>eN then local eR='TIMEOUT: Could not get '..(p.InstanceID()==''and'Instance ID'or'Own ID')p.LogError(eR)if eK then eK(eR)end;return-1 end;eO=eQ;c_=vci.me.Time;eP=false;coroutine.yield(100)end;if eP then eO=vci.me.UnscaledTime;c_=vci.me.Time;coroutine.yield(100)end;if eJ then eJ()end;while true do local d2=vci.me.Time;local eS=d2-c_;local eQ=vci.me.UnscaledTime;local eT=eQ-eO;eI(eS,eT)c_=d2;eO=eQ;coroutine.yield(100)end end)end,CreateSlideSwitch=function(eU)local eV=p.NillableValue(eU.colliderItem)local eW=p.NillableValue(eU.baseItem)local eX=p.NillableValue(eU.knobItem)local eY=p.NillableValueOrDefault(eU.minValue,0)local eZ=p.NillableValueOrDefault(eU.maxValue,10)if eY>=eZ then error('SlideSwitch: Invalid argument: minValue >= maxValue',2)end;local e_=(eY+eZ)*0.5;local f0=function(aX)local f1,f2=p.PingPong(aX-eY,eZ-eY)return f1+eY,f2 end;local aa=f0(p.NillableValueOrDefault(eU.value,0))local f3=p.NillableIfHasValueOrElse(eU.tickFrequency,function(f4)if f4<=0 then error('SlideSwitch: Invalid argument: tickFrequency <= 0',3)end;return math.min(f4,eZ-eY)end,function()return(eZ-eY)/10.0 end)local f5=p.NillableIfHasValueOrElse(eU.tickVector,function(cx)return Vector3.__new(cx.x,cx.y,cx.z)end,function()return Vector3.__new(0.01,0.0,0.0)end)local f6=f5.magnitude;if f6<Vector3.kEpsilon then error('SlideSwitch: Invalid argument: tickVector is too small',2)end;local f7=p.NillableValueOrDefault(eU.snapToTick,true)local f8=eU.valueTextName;local f9=p.NillableValueOrDefault(eU.valueToText,tostring)local fa=TimeSpan.FromMilliseconds(1000)local fb=TimeSpan.FromMilliseconds(50)local fc=p.NillableValueOrDefault(eU.alignPeriod,TimeSpan.FromMilliseconds(500))local fd,fe;local dR={}local self;local ff=false;local fg=0;local fh=false;local fi=TimeSpan.Zero;local fj=TimeSpan.Zero;local fk=TimeSpan.Zero;local fl=function(fm,fn)eX.SetLocalPosition((fm-e_)/f3*f5)if f8 then vci.assets.SetText(f8,f9(fm,self))end;if fn or fm~=aa then local dS=aa;aa=fm;for dT,ao in pairs(dR)do dT(self,aa,dS)end end end;local fo=function()local fp=fd()local fq,fr=f0(fp)local fs=fp+f3;local ft,fu=f0(fs)assert(ft)local fm;if fr==fu or fq==eZ or fq==eY then fm=fs else fm=fr>=0 and eZ or eY end;fj=vci.me.UnscaledTime;if fm==eZ or fm==eY then fi=fj end;fe(fm)end;p.NillableIfHasValueOrElse(eU.lsp,function(fv)if not p.NillableHasValue(eU.propertyName)then error('SlideSwitch: Invalid argument: propertyName is nil',3)end;local fw=p.NillableValue(eU.propertyName)fd=function()return fv.GetProperty(fw,aa)end;fe=function(aX)fv.SetProperty(fw,aX)end;fv.AddListener(function(bS,aj,fx,fy)if aj==fw then fl(f0(fx),true)end end)end,function()local fx=aa;fd=function()return fx end;fe=function(aX)fx=aX;fl(f0(aX),true)end end)self={GetColliderItem=function()return eV end,GetBaseItem=function()return eW end,GetKnobItem=function()return eX end,GetMinValue=function()return eY end,GetMaxValue=function()return eZ end,GetValue=function()return aa end,GetScaleValue=function(fz,fA)assert(fz<=fA)return fz+(fA-fz)*(aa-eY)/(eZ-eY)end,SetValue=function(aX)fe(f0(aX))end,GetTickFrequency=function()return f3 end,IsSnapToTick=function()return f7 end,AddListener=function(dT)dR[dT]=dT end,RemoveListener=function(dT)dR[dT]=nil end,DoUse=function()if not ff then fh=true;fi=vci.me.UnscaledTime;fo()end end,DoUnuse=function()fh=false end,DoGrab=function()if not fh then ff=true;fg=(aa-e_)/f3 end end,DoUngrab=function()ff=false end,Update=function()if ff then if eV.IsMine then local fB=eV.GetPosition()-eW.GetPosition()local fC=eX.GetRotation()*f5;local fD=Vector3.Project(fB,fC)local fE=(Vector3.Dot(fC,fD)>=0 and 1 or-1)*fD.magnitude/f6+fg;local fF=fE+e_/f3;local fG=(f7 and p.Round(fF)or fF)*f3;local fm=p.Clamp(fG,eY,eZ)if fm~=aa then fe(fm)end else ff=false end elseif fh then if eV.IsMine then local fH=vci.me.UnscaledTime;if fH>=fi+fa and fH>=fj+fb then fo()end else fh=false end elseif eV.IsMine then local fH=vci.me.UnscaledTime;if fH-fc>=fk then fk=fH;p.AlignSubItemOrigin(eW,eV)end end end}fl(f0(fd()),false)return self end,CreateSubItemConnector=function()local fI=function(fJ,du,fK)fJ.item=du;fJ.position=du.GetPosition()fJ.rotation=du.GetRotation()fJ.initialPosition=fJ.position;fJ.initialRotation=fJ.rotation;fJ.propagation=not not fK;return fJ end;local fL=function(fM)for du,fJ in pairs(fM)do fI(fJ,du,fJ.propagation)end end;local fN=function(r,cL,fJ,fO,fP)local fB=r-fJ.initialPosition;local fQ=cL*Quaternion.Inverse(fJ.initialRotation)fJ.position=r;fJ.rotation=cL;for du,fR in pairs(fO)do if du~=fJ.item and(not fP or fP(fR))then fR.position,fR.rotation=p.RotateAround(fR.initialPosition+fB,fR.initialRotation,r,fQ)du.SetPosition(fR.position)du.SetRotation(fR.rotation)end end end;local fS={}local fT=true;local fU=false;local self;self={IsEnabled=function()return fT end,SetEnabled=function(ca)fT=ca;if ca then fL(fS)fU=false end end,Contains=function(fV)return p.NillableHasValue(fS[fV])end,Add=function(fW,fX)if not fW then error('SubItemConnector.Add: Invalid argument: subItems = '..tostring(fW),2)end;local fY=type(fW)=='table'and fW or{fW}fL(fS)fU=false;for ax,du in pairs(fY)do fS[du]=fI({},du,not fX)end end,Remove=function(fV)local M=p.NillableHasValue(fS[fV])fS[fV]=nil;return M end,RemoveAll=function()fS={}return true end,Each=function(bi)for du,fJ in pairs(fS)do if bi(du,self)==false then return false end end end,GetItems=function()local fY={}for du,fJ in pairs(fS)do table.insert(fY,du)end;return fY end,Update=function()if not fT then return end;local fZ=false;for du,fJ in pairs(fS)do local bN=du.GetPosition()local f_=du.GetRotation()if not p.VectorApproximatelyEquals(bN,fJ.position)or not p.QuaternionApproximatelyEquals(f_,fJ.rotation)then if fJ.propagation then if du.IsMine then fN(bN,f_,fS[du],fS,function(fR)if fR.item.IsMine then return true else fU=true;return false end end)fZ=true;break else fU=true end else fU=true end end end;if not fZ and fU then fL(fS)fU=false end end}return self end,UnixTime=function(c8)return p.PosixTime(c8)end,
GetSubItemTransform=function(fV)local r=fV.GetPosition()local cL=fV.GetRotation()local g0=fV.GetLocalScale()return{positionX=r.x,positionY=r.y,positionZ=r.z,rotationX=cL.x,rotationY=cL.y,rotationZ=cL.z,rotationW=cL.w,scaleX=g0.x,scaleY=g0.y,scaleZ=g0.z}end}p.SetConstEach(p,{LogLevelOff=0,LogLevelFatal=100,LogLevelError=200,LogLevelWarn=300,LogLevelInfo=400,LogLevelDebug=500,LogLevelTrace=600,LogLevelAll=0x7FFFFFFF,ColorHueSamples=10,ColorSaturationSamples=4,ColorBrightnessSamples=5,EscapeSequenceTag='#__CYTANB',SolidusTag='#__CYTANB_SOLIDUS',NegativeNumberTag='#__CYTANB_NEGATIVE_NUMBER',ArrayNumberTag='#__CYTANB_ARRAY_NUMBER',InstanceIDParameterName='__CYTANB_INSTANCE_ID',MessageValueParameterName='__CYTANB_MESSAGE_VALUE',MessageSenderOverride='__CYTANB_MESSAGE_SENDER_OVERRIDE',MessageOriginalSender='__CYTANB_MESSAGE_ORIGINAL_SENDER',TypeParameterName='__CYTANB_TYPE',ColorTypeName='Color',Vector2TypeName='Vector2',Vector3TypeName='Vector3',Vector4TypeName='Vector4',QuaternionTypeName='Quaternion',DedicatedCommentMessageName='cytanb.comment.a2a6a035-6b8d-4e06-b4f9-07e6209b0639',DedicatedNotificationMessageName='cytanb.notification.698ba55f-2b69-47f2-a68d-bc303994cff3',InstanceIDStatePatchingMessageName='cytanb.instance_id_state_patching.08504824-2041-42a2-9b2a-97448b4418b0',LOCAL_SHARED_PROPERTY_EXPIRED_KEY='__CYTANB_LOCAL_SHARED_PROPERTY_EXPIRED'})p.SetConstEach(p,{ColorMapSize=p.ColorHueSamples*p.ColorSaturationSamples*p.ColorBrightnessSamples,FatalLogLevel=p.LogLevelFatal,ErrorLogLevel=p.LogLevelError,WarnLogLevel=p.LogLevelWarn,InfoLogLevel=p.LogLevelInfo,DebugLogLevel=p.LogLevelDebug,TraceLogLevel=p.LogLevelTrace})b=p.MakeSearchPattern({'\t','\n','\v','\f','\r',' '},1,-1)c=p.MakeSearchPattern({'sprite=','SPRITE='})d=p.MakeSearchPattern({'0','1','2','3','4','5','6','7','8','9'},1,9)e,f=(function()local g1={'A','B','C','D','E','F','a','b','c','d','e','f','0','1','2','3','4','5','6','7','8','9'}return p.MakeSearchPattern(g1,4,4),p.MakeSearchPattern(g1,8,8)end)()g=p.MakeSearchPattern({'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','_','-','.','(',')','!','~','*','\'','%'},1,-1)h={{tag=p.NegativeNumberTag,search=p.NegativeNumberTag,replacement=''},{tag=p.ArrayNumberTag,search=p.ArrayNumberTag,replacement=''},{tag=p.SolidusTag,search=p.SolidusTag,replacement='/'},{tag=p.EscapeSequenceTag,search=p.EscapeSequenceTag..p.EscapeSequenceTag,replacement=p.EscapeSequenceTag}}i={[p.ColorTypeName]={compositionFieldNames=p.ListToMap({'r','g','b','a'}),compositionFieldLength=4,toTableFunc=p.ColorToTable,fromTableFunc=p.ColorFromTable},[p.Vector2TypeName]={compositionFieldNames=p.ListToMap({'x','y'}),compositionFieldLength=2,toTableFunc=p.Vector2ToTable,fromTableFunc=p.Vector2FromTable},[p.Vector3TypeName]={compositionFieldNames=p.ListToMap({'x','y','z'}),compositionFieldLength=3,toTableFunc=p.Vector3ToTable,fromTableFunc=p.Vector3FromTable},[p.Vector4TypeName]={compositionFieldNames=p.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=p.Vector4ToTable,fromTableFunc=p.Vector4FromTable},[p.QuaternionTypeName]={compositionFieldNames=p.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=p.QuaternionToTable,fromTableFunc=p.QuaternionFromTable}}j=p.ListToMap({p.NegativeNumberTag,p.ArrayNumberTag})k=p.LogLevelInfo;m={[p.LogLevelFatal]='FATAL',[p.LogLevelError]='ERROR',[p.LogLevelWarn]='WARN',[p.LogLevelInfo]='INFO',[p.LogLevelDebug]='DEBUG',[p.LogLevelTrace]='TRACE'}o=(function()local dK='eff3a188-bfc7-4b0e-93cb-90fd1adc508c'local dQ=_G[dK]if not dQ then dQ={}_G[dK]=dQ end;local g2=dQ.clientID;if type(g2)~='string'then g2=tostring(p.RandomUUID())dQ.clientID=g2 end;return g2 end)()return p end;if __CYTANB_EXPORT_MODULE then return setmetatable({},{__call=function(self,g3)return a(g3)end})else return a(_ENV)end end)()if __CYTANB_EXPORT_MODULE then return cytanb end
