-- SPDX-License-Identifier: MIT
-- Copyright (c) 2019 oO (https://github.com/oocytanb)
---@type cytanb @See `cytanb_annotations.lua`
local cytanb=(function()local b=function(_ENV)if not require or not vci then error('Invalid _ENV: Enable `__CYTANB_EXPORT_MODULE = true` line and pass valid _ENV of VCI-main if use cytanb.lua as module.',3)end;local c='__CYTANB_INSTANCE_ID'local d=true;local e=false;local f;local g;local h;local i;local j;local k;local l;local m;local n;local o;local p=false;local q;local r;local s;local a;local t=function(u,v)local w=u+v-1;return u,w,w+1 end;local x=function(u,v)local w=u-v+1;return w,u,w-1 end;local y=function(z,A,B,u,C)local D=B.searchMap;for E,v in pairs(B.lengthList)do if v<=0 then error('SearchPattern: Invalid parameter: searchLen <= 0')else local F,G,w=C(u,v)if F>=1 and G<=A then local H=string.sub(z,F,G)if D[H]then return true,v,w end end end end;return false,-1,-1 end;local I=function(z,B,u,C)if z==nil or B==nil then return false,-1 end;if B.hasEmptySearch then return true,0 end;local A=string.len(z)local J=B.repeatMin;local K=B.repeatMax;local L=K<0;local M=u;local N=0;local O=0;while L or O<K do local P,Q,w=y(z,A,B,M,C)if P then if Q<=0 then error('SearchPattern: Invalid parameter')end;M=w;N=N+Q;O=O+1 else break end end;if O>=J then return true,N else return false,-1 end end;local R=function(z,S,u,T,C,U)if z==nil or S==nil then return false,-1 end;local v=string.len(S)if T then local P=U(z,S)return P,P and v or-1 else if v==0 then return true,v end;local A=string.len(z)local F,G=C(u,v)if F>=1 and G<=A then local H=string.sub(z,F,G)local P=U(H,S)return P,P and v or-1 else return false,-1 end end end;local V=function(z,W,X)if W<=X then local Y=string.unicode(z,W,W)if Y>=0xDC00 or Y<=0xDFFF then return true,1,Y end end;return false,-1,nil end;local Z=function(z,W,X,_)if W<=X then local a0,a1=a.StringStartsWith(z,g,W)if a0 then local a2=W+a1;if a2<=X then local a3,a4=a.StringStartsWith(z,h,a2)if a3 then local a5=a2+a4;if a5<=X and string.unicode(z,a5,a5)==0x3E then local a6=tonumber(string.sub(z,a2,a2+a4-1))if a6<=_ then return true,a5-W+1,a6 end end end end end end;return false,-1,nil end;local a7=function(a8,a9)for aa=1,4 do local ab=a8[aa]-a9[aa]if ab~=0 then return ab end end;return 0 end;local ac;ac={__eq=function(a8,a9)return a8[1]==a9[1]and a8[2]==a9[2]and a8[3]==a9[3]and a8[4]==a9[4]end,__lt=function(a8,a9)return a7(a8,a9)<0 end,__le=function(a8,a9)return a7(a8,a9)<=0 end,__tostring=function(ad)local ae=ad[2]or 0;local af=ad[3]or 0;return string.format('%08x-%04x-%04x-%04x-%04x%08x',bit32.band(ad[1]or 0,0xFFFFFFFF),bit32.band(bit32.rshift(ae,16),0xFFFF),bit32.band(ae,0xFFFF),bit32.band(bit32.rshift(af,16),0xFFFF),bit32.band(af,0xFFFF),bit32.band(ad[4]or 0,0xFFFFFFFF))end,__concat=function(a8,a9)local ag=getmetatable(a8)local ah=ag==ac or type(ag)=='table'and ag.__concat==ac.__concat;local ai=getmetatable(a9)local aj=ai==ac or type(ai)=='table'and ai.__concat==ac.__concat;if not ah and not aj then error('UUID: attempt to concatenate illegal values',2)end;return(ah and ac.__tostring(a8)or a8)..(aj and ac.__tostring(a9)or a9)end}local ak='__CYTANB_CONST_VARIABLES'local al=function(table,am)local an=getmetatable(table)if an then local ao=rawget(an,ak)if ao then local ap=rawget(ao,am)if type(ap)=='function'then return ap(table,am)else return ap end end end;return nil end;local aq=function(table,am,ar)local an=getmetatable(table)if an then local ao=rawget(an,ak)if ao then if rawget(ao,am)~=nil then error('Cannot assign to read only field "'..am..'"',2)end end end;rawset(table,am,ar)end;local as=function(at,au)local av=at[a.TypeParameterName]if a.NillableHasValue(av)and a.NillableValue(av)~=au then return false,false end;return a.NillableIfHasValueOrElse(m[au],function(aw)local ax=aw.compositionFieldNames;local ay=aw.compositionFieldLength;local az=false;for aA,ar in pairs(at)do if ax[aA]then ay=ay-1;if ay<=0 and az then break end elseif aA~=a.TypeParameterName then az=true;if ay<=0 then break end end end;return ay<=0,az end,function()return false,false end)end;local aB=function(z)return a.StringReplace(a.StringReplace(z,a.EscapeSequenceTag,a.EscapeSequenceTag..a.EscapeSequenceTag),'/',a.SolidusTag)end;local aC=function(z,aD)local aE=string.len(z)local aF=string.len(a.EscapeSequenceTag)if aF>aE then return z end;local aG=''local aa=1;while aa<aE do local G,aH=string.find(z,a.EscapeSequenceTag,aa,true)if not G then if aa==1 then aG=z else aG=aG..string.sub(z,aa)end;break end;if G>aa then aG=aG..string.sub(z,aa,G-1)end;local aI=false;for aJ,aK in ipairs(l)do local P=a.StringStartsWith(z,aK.search,G)if P then aG=aG..(aD and aD(aK.tag)or aK.replacement)aa=G+string.len(aK.search)aI=true;break end end;if not aI then aG=aG..a.EscapeSequenceTag;aa=aH+1 end end;return aG end;local aL;aL=function(aM,aN)if type(aM)~='table'then return aM end;if not aN then aN={}end;if aN[aM]then error('circular reference')end;aN[aM]=true;local aO={}for aA,ar in pairs(aM)do local aP=type(aA)local aQ;if aP=='string'then aQ=aB(aA)elseif aP=='number'then aQ=tostring(aA)..a.ArrayNumberTag else aQ=aA end;local aR=type(ar)if aR=='string'then aO[aQ]=aB(ar)elseif aR=='number'and ar<0 then aO[tostring(aQ)..a.NegativeNumberTag]=tostring(ar)else aO[aQ]=aL(ar,aN)end end;aN[aM]=nil;return aO end;local aS;aS=function(aO,aT)if type(aO)~='table'then return aO end;local aM={}for aA,ar in pairs(aO)do local aQ;local aU=false;if type(aA)=='string'then local aV=false;aQ=aC(aA,function(aW)if aW==a.NegativeNumberTag then aU=true elseif aW==a.ArrayNumberTag then aV=true end;return nil end)if aV then aQ=tonumber(aQ)or aQ end else aQ=aA;aU=false end;if aU and type(ar)=='string'then aM[aQ]=tonumber(ar)elseif type(ar)=='string'then aM[aQ]=aC(ar,function(aW)return n[aW]end)else aM[aQ]=aS(ar,aT)end end;if not aT then a.NillableIfHasValue(aM[a.TypeParameterName],function(aX)a.NillableIfHasValue(m[aX],function(aw)local aY,az=aw.fromTableFunc(aM)if not az then a.NillableIfHasValue(aY,function(ad)aM=ad end)end end)end)end;return aM end;local aZ={['nil']=function(a_)return nil end,['number']=function(a_)return tonumber(a_)end,['string']=function(a_)return tostring(a_)end,['boolean']=function(a_)if a_ then return true else return false end end}local b0=function(a_,b1)local b2=type(a_)if b2==b1 then return a_ else local b3=aZ[b1]if b3 then return b3(a_)else return nil end end end;local b4=function(b5,b6)if b6 and type(b6)=='table'then local b7={}for am,a_ in pairs(b5)do local b8=b6[am]local b9;if b8==nil then b9=a_ else local ba=b0(b8,type(a_))if ba==nil then b9=a_ else b9=ba end end;b7[am]=b9 end;b7[a.MessageOriginalSender]=b5;return b7 else return b5 end end;local bb=function(bc,bd,b6,be)local bf={type=be,name='',commentSource=''}local bg={[a.MessageValueParameterName]=tostring(bd),[a.MessageSenderOverride]=type(b6)=='table'and a.Extend(bf,b6,true)or bf}a.EmitMessage(bc,bg)end;local bh=function(bc,bi,bj)local bk,bl=(function()local b3=function(b5,bm,bg)local bd=tostring(bg[a.MessageValueParameterName]or'')bj(b5,bi,bd)end;local bk=a.OnMessage(bc,b3)local bl=a.OnMessage(bi,b3)return bk,bl end)()return{Off=function()bk.Off()bl.Off()end}end;a={InstanceID=function()if r==''then r=vci.state.Get(c)or''if d and not e and r==''then e=true;vci.message.Emit(a.InstanceIDStatePatchingMessageName,'')end end;return r end,NillableHasValue=function(bn)return bn~=nil end,NillableValue=function(bn)if bn==nil then error('nillable: value is nil',2)end;return bn end,NillableValueOrDefault=function(bn,bo)if bn==nil then if bo==nil then error('nillable: defaultValue is nil',2)end;return bo else return bn end end,NillableIfHasValue=function(bn,bj)if bn==nil then return nil else return bj(bn)end end,NillableIfHasValueOrElse=function(bn,bj,bp)if bn==nil then return bp()else return bj(bn)end end,MakeSearchPattern=function(bq,br,bs)local J=br and math.floor(br)or 1;if J<0 then error('SearchPattern: Invalid parameter: optRepeatMin < 0')end;local K=bs and math.floor(bs)or J;if K>=0 and K<J then error('SearchPattern: Invalid parameter: repeatMax < repeatMin')end;local bt=K==0;local D={}local bu={}local bv={}local bw=0;for bx,by in pairs(bq)do local v=string.len(by)if v==0 then bt=true else D[by]=v;if not bu[v]then bu[v]=true;bw=bw+1;bv[bw]=v end end end;table.sort(bv,function(bz,P)return bz>P end)return{hasEmptySearch=bt,searchMap=D,lengthList=bv,repeatMin=J,repeatMax=K}end,StringStartsWith=function(z,S,bA)local M=bA and math.max(1,math.floor(bA))or 1;if type(S)=='table'then return I(z,S,M,t)else return R(z,S,M,M==1,t,string.startsWith)end end,StringEndsWith=function(z,S,bB)if z==nil then return false,-1 end;local A=string.len(z)local M=bB and math.min(A,math.floor(bB))or A;if type(S)=='table'then return I(z,S,M,x)else return R(z,S,M,M==A,x,string.endsWith)end end,
StringTrimStart=function(z,bC)if z==nil or z==''then return z end;local P,Q=a.StringStartsWith(z,bC or f)if P and Q>=1 then return string.sub(z,Q+1)else return z end end,StringTrimEnd=function(z,bC)if z==nil or z==''then return z end;local P,Q=a.StringEndsWith(z,bC or f)if P and Q>=1 then return string.sub(z,1,string.len(z)-Q)else return z end end,StringTrim=function(z,bC)return a.StringTrimEnd(a.StringTrimStart(z,bC),bC)end,StringReplace=function(z,bD,bE)local bF;local aE=string.len(z)if bD==''then bF=bE;for aa=1,aE do bF=bF..string.sub(z,aa,aa)..bE end else bF=''local aa=1;while true do local F,G=string.find(z,bD,aa,true)if F then bF=bF..string.sub(z,aa,F-1)..bE;aa=G+1;if aa>aE then break end else bF=aa==1 and z or bF..string.sub(z,aa)break end end end;return bF end,StringEachCode=function(z,bj,bG,aa,bH,bI,bJ,bK)local aE=string.len(z)if aE==0 then return 0,0,0 end;local bL=aa and math.floor(aa)or 1;local X=bH and math.floor(bH)or aE;local _=math.min(bK or 3182,0x1FFFFF)if bL<=0 or X>aE or bL>X then error('StringEachCode: invalid range')end;local bM=0;local bN=bL;local bO=bN;while bN<=X do local F=bN;local Y=string.unicode(z,bN,bN)if Y>=0xD800 and Y<=0xDBFF then local P,Q=V(z,bN+1,X)if P then bN=bN+Q end elseif bI and Y==0x3C then local P,Q,a6=Z(z,bN+1,X,_)if P and(not bJ or bJ(a6))then bN=bN+Q end end;bM=bM+1;bO=bN;if bj and bj(string.sub(z,F,bN),bM,bG,F,bN)==false then break end;bN=bN+1 end;return bM,bL,bO end,SetConst=function(bD,bc,ad)if type(bD)~='table'then error('Cannot set const to non-table target',2)end;local bP=getmetatable(bD)local an=bP or{}local bQ=rawget(an,ak)if rawget(bD,bc)~=nil then error('Non-const field "'..bc..'" already exists',2)end;if not bQ then bQ={}rawset(an,ak,bQ)an.__index=al;an.__newindex=aq end;rawset(bQ,bc,ad)if not bP then setmetatable(bD,an)end;return bD end,SetConstEach=function(bD,bR)for aA,ar in pairs(bR)do a.SetConst(bD,aA,ar)end;return bD end,Extend=function(bD,bS,bT,bU,aN)if bD==bS or type(bD)~='table'or type(bS)~='table'then return bD end;if bT then if not aN then aN={}end;if aN[bS]then error('circular reference')end;aN[bS]=true end;for aA,ar in pairs(bS)do if bT and type(ar)=='table'then local bV=bD[aA]bD[aA]=a.Extend(type(bV)=='table'and bV or{},ar,bT,bU,aN)else bD[aA]=ar end end;if not bU then local bW=getmetatable(bS)if type(bW)=='table'then if bT then local bX=getmetatable(bD)setmetatable(bD,a.Extend(type(bX)=='table'and bX or{},bW,true))else setmetatable(bD,bW)end end end;if bT then aN[bS]=nil end;return bD end,Vars=function(ar,bY,bZ,aN)local b_;if bY then b_=bY~='__NOLF'else bY='  'b_=true end;if not bZ then bZ=''end;if not aN then aN={}end;local c0=type(ar)if c0=='table'then aN[ar]=aN[ar]and aN[ar]+1 or 1;local c1=b_ and bZ..bY or''local z='('..tostring(ar)..') {'local c2=true;for am,a_ in pairs(ar)do if c2 then c2=false else z=z..(b_ and','or', ')end;if b_ then z=z..'\n'..c1 end;if type(a_)=='table'and aN[a_]and aN[a_]>0 then z=z..am..' = ('..tostring(a_)..')'else z=z..am..' = '..a.Vars(a_,bY,c1,aN)end end;if not c2 and b_ then z=z..'\n'..bZ end;z=z..'}'aN[ar]=aN[ar]-1;if aN[ar]<=0 then aN[ar]=nil end;return z elseif c0=='function'or c0=='thread'or c0=='userdata'then return'('..c0 ..')'elseif c0=='string'then return'('..c0 ..') '..string.format('%q',ar)else return'('..c0 ..') '..tostring(ar)end end,GetLogLevel=function()return o end,SetLogLevel=function(c3)o=c3 end,IsOutputLogLevelEnabled=function()return p end,SetOutputLogLevelEnabled=function(c4)p=not not c4 end,Log=function(c3,...)if c3<=o then local c5=p and(q[c3]or'LOG LEVEL '..tostring(c3))..' | 'or''local c6=table.pack(...)if c6.n==1 then local ar=c6[1]if ar~=nil then local z=type(ar)=='table'and a.Vars(ar)or tostring(ar)print(p and c5 ..z or z)else print(c5)end else local z=c5;for aa=1,c6.n do local ar=c6[aa]if ar~=nil then z=z..(type(ar)=='table'and a.Vars(ar)or tostring(ar))end end;print(z)end end end,LogFatal=function(...)a.Log(a.LogLevelFatal,...)end,LogError=function(...)a.Log(a.LogLevelError,...)end,LogWarn=function(...)a.Log(a.LogLevelWarn,...)end,LogInfo=function(...)a.Log(a.LogLevelInfo,...)end,LogDebug=function(...)a.Log(a.LogLevelDebug,...)end,LogTrace=function(...)a.Log(a.LogLevelTrace,...)end,FatalLog=function(...)a.LogFatal(...)end,ErrorLog=function(...)a.LogError(...)end,WarnLog=function(...)a.LogWarn(...)end,InfoLog=function(...)a.LogInfo(...)end,DebugLog=function(...)a.LogDebug(...)end,TraceLog=function(...)a.LogTrace(...)end,ListToMap=function(c7,c8)local c9={}if c8==nil then for aA,ar in pairs(c7)do c9[ar]=ar end elseif type(c8)=='function'then for aA,ar in pairs(c7)do local ca,cb=c8(ar)c9[ca]=cb end else for aA,ar in pairs(c7)do c9[ar]=c8 end end;return c9 end,Round=function(cc,cd)if cd then local ce=10^cd;return math.floor(cc*ce+0.5)/ce else return math.floor(cc+0.5)end end,Clamp=function(ad,cf,cg)return math.max(cf,math.min(ad,cg))end,Lerp=function(bz,P,c0)if c0<=0.0 then return bz elseif c0>=1.0 then return P else return bz+(P-bz)*c0 end end,LerpUnclamped=function(bz,P,c0)if c0==0.0 then return bz elseif c0==1.0 then return P else return bz+(P-bz)*c0 end end,PingPong=function(c0,ch)if ch==0 then return 0,1 end;local ci=math.floor(c0/ch)local cj=c0-ci*ch;if ci<0 then if(ci+1)%2==0 then return ch-cj,-1 else return cj,1 end else if ci%2==0 then return cj,1 else return ch-cj,-1 end end end,VectorApproximatelyEquals=function(ck,cl)return(ck-cl).sqrMagnitude<1E-10 end,QuaternionApproximatelyEquals=function(ck,cl)local cm=Quaternion.Dot(ck,cl)return cm<1.0+1E-06 and cm>1.0-1E-06 end,QuaternionToAngleAxis=function(cn)local ci=cn.normalized;local co=math.acos(ci.w)local cp=math.sin(co)local cq=math.deg(co*2.0)local cr;if math.abs(cp)<=Quaternion.kEpsilon then cr=Vector3.right else local F=1.0/cp;cr=Vector3.__new(ci.x*F,ci.y*F,ci.z*F)end;return cq,cr end,QuaternionTwist=function(cn,cs)if cs.sqrMagnitude<Vector3.kEpsilonNormalSqrt then return Quaternion.identity end;local ct=Vector3.__new(cn.x,cn.y,cn.z)if ct.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cu=Vector3.Project(ct,cs)if cu.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cv=Quaternion.__new(cu.x,cu.y,cu.z,cn.w)cv.Normalize()return cv else return Quaternion.AngleAxis(0,cs)end else local cw=a.QuaternionToAngleAxis(cn)return Quaternion.AngleAxis(cw,cs)end end,ApplyQuaternionToVector3=function(cn,cx)local cy=cn.w*cx.x+cn.y*cx.z-cn.z*cx.y;local cz=cn.w*cx.y-cn.x*cx.z+cn.z*cx.x;local cA=cn.w*cx.z+cn.x*cx.y-cn.y*cx.x;local cB=-cn.x*cx.x-cn.y*cx.y-cn.z*cx.z;return Vector3.__new(cB*-cn.x+cy*cn.w+cz*-cn.z-cA*-cn.y,cB*-cn.y-cy*-cn.z+cz*cn.w+cA*-cn.x,cB*-cn.z+cy*-cn.y-cz*-cn.x+cA*cn.w)end,RotateAround=function(cC,cD,cE,cF)return cE+cF*(cC-cE),cF*cD end,Random32=function()return bit32.band(math.random(-2147483648,2147483646),0xFFFFFFFF)end,RandomUUID=function()return a.UUIDFromNumbers(a.Random32(),bit32.bor(0x4000,bit32.band(a.Random32(),0xFFFF0FFF)),bit32.bor(0x80000000,bit32.band(a.Random32(),0x3FFFFFFF)),a.Random32())end,UUIDString=function(cG)return ac.__tostring(cG)end,UUIDFromNumbers=function(...)local cH=...local c0=type(cH)local cI,cJ,cK,cL;if c0=='table'then cI=cH[1]cJ=cH[2]cK=cH[3]cL=cH[4]else cI,cJ,cK,cL=...end;local cG={bit32.band(cI or 0,0xFFFFFFFF),bit32.band(cJ or 0,0xFFFFFFFF),bit32.band(cK or 0,0xFFFFFFFF),bit32.band(cL or 0,0xFFFFFFFF)}setmetatable(cG,ac)return cG end,
UUIDFromString=function(z)local aE=string.len(z)if aE==32 then local cG=a.UUIDFromNumbers(0,0,0,0)for aa=1,4 do local F=1+(aa-1)*8;if not a.StringStartsWith(z,j,F)then return nil end;cG[aa]=tonumber(string.sub(z,F,F+7),16)end;return cG elseif aE==36 then if not a.StringStartsWith(z,j,1)then return nil end;local cI=tonumber(string.sub(z,1,8),16)if not a.StringStartsWith(z,'-',9)or not a.StringStartsWith(z,i,10)or not a.StringStartsWith(z,'-',14)or not a.StringStartsWith(z,i,15)then return nil end;local cJ=tonumber(string.sub(z,10,13)..string.sub(z,15,18),16)if not a.StringStartsWith(z,'-',19)or not a.StringStartsWith(z,i,20)or not a.StringStartsWith(z,'-',24)or not a.StringStartsWith(z,i,25)then return nil end;local cK=tonumber(string.sub(z,20,23)..string.sub(z,25,28),16)if not a.StringStartsWith(z,j,29)then return nil end;local cL=tonumber(string.sub(z,29),16)return a.UUIDFromNumbers(cI,cJ,cK,cL)else return nil end end,ParseUUID=function(z)return a.UUIDFromString(z)end,CreateCircularQueue=function(cM)if type(cM)~='number'or cM<1 then error('CreateCircularQueue: Invalid argument: capacity = '..tostring(cM),2)end;local self;local cN=math.floor(cM)local aG={}local cO=0;local cP=0;local cQ=0;self={Size=function()return cQ end,Clear=function()cO=0;cP=0;cQ=0 end,IsEmpty=function()return cQ==0 end,Offer=function(cR)aG[cO+1]=cR;cO=(cO+1)%cN;if cQ<cN then cQ=cQ+1 else cP=(cP+1)%cN end;return true end,OfferFirst=function(cR)cP=(cN+cP-1)%cN;aG[cP+1]=cR;if cQ<cN then cQ=cQ+1 else cO=(cN+cO-1)%cN end;return true end,Poll=function()if cQ==0 then return nil else local cR=aG[cP+1]cP=(cP+1)%cN;cQ=cQ-1;return cR end end,PollLast=function()if cQ==0 then return nil else cO=(cN+cO-1)%cN;local cR=aG[cO+1]cQ=cQ-1;return cR end end,Peek=function()if cQ==0 then return nil else return aG[cP+1]end end,PeekLast=function()if cQ==0 then return nil else return aG[(cN+cO-1)%cN+1]end end,Get=function(cS)if cS<1 or cS>cQ then a.LogError('CreateCircularQueue.Get: index is outside the range: '..cS)return nil end;return aG[(cP+cS-1)%cN+1]end,IsFull=function()return cQ>=cN end,MaxSize=function()return cN end}return self end,DetectClicks=function(cT,cU,cV)local bM=cT or 0;local cW=cV or TimeSpan.FromMilliseconds(500)local cX=vci.me.Time;local cY=cU and cX>cU+cW and 1 or bM+1;return cY,cX end,ColorRGBToHSV=function(cZ)local cj=math.max(0.0,math.min(cZ.r,1.0))local c_=math.max(0.0,math.min(cZ.g,1.0))local P=math.max(0.0,math.min(cZ.b,1.0))local cg=math.max(cj,c_,P)local cf=math.min(cj,c_,P)local d0=cg-cf;local ap;if d0==0.0 then ap=0.0 elseif cg==cj then ap=(c_-P)/d0/6.0 elseif cg==c_ then ap=(2.0+(P-cj)/d0)/6.0 else ap=(4.0+(cj-c_)/d0)/6.0 end;if ap<0.0 then ap=ap+1.0 end;local d1=cg==0.0 and d0 or d0/cg;local ar=cg;return ap,d1,ar end,ColorFromARGB32=function(d2)local d3=type(d2)=='number'and d2 or 0xFF000000;return Color.__new(bit32.band(bit32.rshift(d3,16),0xFF)/0xFF,bit32.band(bit32.rshift(d3,8),0xFF)/0xFF,bit32.band(d3,0xFF)/0xFF,bit32.band(bit32.rshift(d3,24),0xFF)/0xFF)end,ColorToARGB32=function(cZ)return bit32.bor(bit32.lshift(bit32.band(a.Round(0xFF*cZ.a),0xFF),24),bit32.lshift(bit32.band(a.Round(0xFF*cZ.r),0xFF),16),bit32.lshift(bit32.band(a.Round(0xFF*cZ.g),0xFF),8),bit32.band(a.Round(0xFF*cZ.b),0xFF))end,ColorFromIndex=function(d4,d5,d6,d7,d8)local d9=math.max(math.floor(d5 or a.ColorHueSamples),1)local da=d8 and d9 or d9-1;local db=math.max(math.floor(d6 or a.ColorSaturationSamples),1)local dc=math.max(math.floor(d7 or a.ColorBrightnessSamples),1)local cS=a.Clamp(math.floor(d4 or 0),0,d9*db*dc-1)local dd=cS%d9;local de=math.floor(cS/d9)local F=de%db;local df=math.floor(de/db)if d8 or dd~=da then local ap=dd/da;local d1=(db-F)/db;local ar=(dc-df)/dc;return Color.HSVToRGB(ap,d1,ar)else local ar=(dc-df)/dc*F/(db-1)return Color.HSVToRGB(0.0,0.0,ar)end end,ColorToIndex=function(cZ,d5,d6,d7,d8)local d9=math.max(math.floor(d5 or a.ColorHueSamples),1)local da=d8 and d9 or d9-1;local db=math.max(math.floor(d6 or a.ColorSaturationSamples),1)local dc=math.max(math.floor(d7 or a.ColorBrightnessSamples),1)local ap,d1,ar=a.ColorRGBToHSV(cZ)local F=a.Round(db*(1.0-d1))if d8 or F<db then local dg=a.Round(da*ap)if dg>=da then dg=0 end;if F>=db then F=db-1 end;local df=math.min(dc-1,a.Round(dc*(1.0-ar)))return dg+d9*(F+db*df)else local dh=a.Round((db-1)*ar)if dh==0 then local di=a.Round(dc*(1.0-ar))if di>=dc then return d9-1 else return d9*(1+a.Round(ar*(db-1)/(dc-di)*dc)+db*di)-1 end else return d9*(1+dh+db*a.Round(dc*(1.0-ar*(db-1)/dh)))-1 end end end,ColorToTable=function(cZ)return{[a.TypeParameterName]=a.ColorTypeName,r=cZ.r,g=cZ.g,b=cZ.b,a=cZ.a}end,ColorFromTable=function(at)local P,az=as(at,a.ColorTypeName)return P and Color.__new(at.r,at.g,at.b,at.a)or nil,az end,Vector2ToTable=function(ad)return{[a.TypeParameterName]=a.Vector2TypeName,x=ad.x,y=ad.y}end,Vector2FromTable=function(at)local P,az=as(at,a.Vector2TypeName)return P and Vector2.__new(at.x,at.y)or nil,az end,Vector3ToTable=function(ad)return{[a.TypeParameterName]=a.Vector3TypeName,x=ad.x,y=ad.y,z=ad.z}end,Vector3FromTable=function(at)local P,az=as(at,a.Vector3TypeName)return P and Vector3.__new(at.x,at.y,at.z)or nil,az end,Vector4ToTable=function(ad)return{[a.TypeParameterName]=a.Vector4TypeName,x=ad.x,y=ad.y,z=ad.z,w=ad.w}end,Vector4FromTable=function(at)local P,az=as(at,a.Vector4TypeName)return P and Vector4.__new(at.x,at.y,at.z,at.w)or nil,az end,QuaternionToTable=function(ad)return{[a.TypeParameterName]=a.QuaternionTypeName,x=ad.x,y=ad.y,z=ad.z,w=ad.w}end,QuaternionFromTable=function(at)local P,az=as(at,a.QuaternionTypeName)return P and Quaternion.__new(at.x,at.y,at.z,at.w)or nil,az end,TableToSerializable=function(aM)return aL(aM)end,TableFromSerializable=function(aO,aT)return aS(aO,aT)end,TableToSerialiable=function(aM)return aL(aM)end,TableFromSerialiable=function(aO,aT)return aS(aO,aT)end,EmitMessage=function(bc,bg)local aO=a.NillableIfHasValueOrElse(bg,function(aM)if type(aM)~='table'then error('EmitMessage: Invalid argument: table expected',3)end;return a.TableToSerializable(aM)end,function()return{}end)aO[a.InstanceIDParameterName]=a.InstanceID()vci.message.Emit(bc,json.serialize(aO))end,OnMessage=function(bc,bj)local b3=function(b5,bm,bd)if type(bd)=='string'and string.startsWith(bd,'{')then local dj,aO=pcall(json.parse,bd)if dj and type(aO)=='table'and aO[a.InstanceIDParameterName]then local dk=a.TableFromSerializable(aO)bj(b4(b5,dk[a.MessageSenderOverride]),bm,dk)return end end;bj(b5,bm,{[a.MessageValueParameterName]=bd})end;vci.message.On(bc,b3)return{Off=function()if b3 then b3=nil end end}end,OnInstanceMessage=function(bc,bj)local b3=function(b5,bm,bg)local dl=a.InstanceID()if dl~=''and dl==bg[a.InstanceIDParameterName]then bj(b5,bm,bg)end end;return a.OnMessage(bc,b3)end,EmitCommentMessage=function(bd,b6)bb(a.DedicatedCommentMessageName,bd,b6,'comment')end,OnCommentMessage=function(bj)return bh(a.DedicatedCommentMessageName,'comment',bj)end,EmitNotificationMessage=function(bd,b6)bb(a.DedicatedNotificationMessageName,bd,b6,'notification')end,OnNotificationMessage=function(bj)return bh(a.DedicatedNotificationMessageName,'notification',bj)end,GetEffekseerEmitterMap=function(bc)local dm=vci.assets.GetEffekseerEmitters(bc)if not dm then return nil end;local c9={}for aa,dn in pairs(dm)do c9[dn.EffectName]=dn end;return c9 end,ClientID=function()return s end,ParseTagString=function(z)local bN=string.find(z,'#',1,true)if not bN then return{},z end;local dp={}local dq=string.sub(z,1,bN-1)bN=bN+1;local aE=string.len(z)while bN<=aE do local dr,ds=a.StringStartsWith(z,k,bN)if dr then local dt=bN+ds;local du=string.sub(z,bN,dt-1)local dv=du;bN=dt;if bN<=aE and a.StringStartsWith(z,'=',bN)then bN=bN+1;local dw,dx=a.StringStartsWith(z,k,bN)if dw then local dy=bN+dx;dv=string.sub(z,bN,dy-1)bN=dy else dv=''end end;dp[du]=dv end;bN=string.find(z,'#',bN,true)if not bN then break end;bN=bN+1 end;return dp,dq end,CalculateSIPrefix=(function()local dz=9;local dA={'y','z','a','f','p','n','u','m','','k','M','G','T','P','E','Z','Y'}local dB=#dA;return function(cc)local dC=cc==0 and 0 or a.Clamp(math.floor(math.log(math.abs(cc),1000)),1-dz,dB-dz)return dC==0 and cc or cc/1000^dC,dA[dz+dC],dC*3 end end)(),
UnixTime=(function()local dD=os.time({year=1970,month=1,day=2,hour=0,min=0,sec=0,isdst=false})if not dD then error('unexpected')end;local dE=os.date('!*t',dD)local dF=(((dE.day-1)*24+dE.hour)*60+dE.min)*60+dE.sec;return function(dG)local dH=dG and dG or os.time()return os.difftime(dH,dD)+dF end end)(),CreateLocalSharedProperties=function(dI,dJ)local dK=TimeSpan.FromSeconds(5)local dL='33657f0e-7c44-4ee7-acd9-92dd8b8d807a'local dM='__CYTANB_LOCAL_SHARED_PROPERTIES_LISTENER_MAP'if type(dI)~='string'or string.len(dI)<=0 or type(dJ)~='string'or string.len(dJ)<=0 then error('LocalSharedProperties: Invalid arguments',2)end;local dN=_G[dL]if not dN then dN={}_G[dL]=dN end;dN[dJ]=vci.me.UnscaledTime;local dO=_G[dI]if not dO then dO={[dM]={}}_G[dI]=dO end;local dP=dO[dM]local self;self={GetLspID=function()return dI end,GetLoadID=function()return dJ end,GetProperty=function(am,bo)local ad=dO[am]if ad==nil then return bo else return ad end end,SetProperty=function(am,ad)if am==dM then error('LocalSharedProperties: Invalid argument: key = ',am,2)end;local cX=vci.me.UnscaledTime;local dQ=dO[am]dO[am]=ad;for dR,dl in pairs(dP)do local c0=dN[dl]if c0 and c0+dK>=cX then dR(self,am,ad,dQ)else dR(self,a.LOCAL_SHARED_PROPERTY_EXPIRED_KEY,true,false)dP[dR]=nil;dN[dl]=nil end end end,Clear=function()for am,ad in pairs(dO)do if am~=dM then self.SetProperty(am,nil)end end end,Each=function(bj)for am,ad in pairs(dO)do if am~=dM and bj(ad,am,self)==false then return false end end end,AddListener=function(dR)dP[dR]=dJ end,RemoveListener=function(dR)dP[dR]=nil end,UpdateAlive=function()dN[dJ]=vci.me.UnscaledTime end}return self end,EstimateFixedTimestep=function(dS)local dT=1.0;local dU=1000.0;local dV=TimeSpan.FromSeconds(0.02)local dW=0xFFFF;local dX=a.CreateCircularQueue(64)local dY=TimeSpan.FromSeconds(5)local dZ=TimeSpan.FromSeconds(30)local d_=false;local e0=vci.me.Time;local e1=a.Random32()local e2=Vector3.__new(bit32.bor(0x400,bit32.band(e1,0x1FFF)),bit32.bor(0x400,bit32.band(bit32.rshift(e1,16),0x1FFF)),0.0)dS.SetPosition(e2)dS.SetRotation(Quaternion.identity)dS.SetVelocity(Vector3.zero)dS.SetAngularVelocity(Vector3.zero)dS.AddForce(Vector3.__new(0.0,0.0,dT*dU))local self={Timestep=function()return dV end,Precision=function()return dW end,IsFinished=function()return d_ end,Update=function()if d_ then return dV end;local e3=vci.me.Time-e0;local e4=e3.TotalSeconds;if e4<=Vector3.kEpsilon then return dV end;local e5=dS.GetPosition().z-e2.z;local e6=e5/e4;local e7=e6/dU;if e7<=Vector3.kEpsilon then return dV end;dX.Offer(e7)local e8=dX.Size()if e8>=2 and e3>=dY then local e9=0.0;for aa=1,e8 do e9=e9+dX.Get(aa)end;local ea=e9/e8;local eb=0.0;for aa=1,e8 do eb=eb+(dX.Get(aa)-ea)^2 end;local ec=eb/e8;if ec<dW then dW=ec;dV=TimeSpan.FromSeconds(ea)end;if e3>dZ then d_=true;dS.SetPosition(e2)dS.SetRotation(Quaternion.identity)dS.SetVelocity(Vector3.zero)dS.SetAngularVelocity(Vector3.zero)end else dV=TimeSpan.FromSeconds(e7)end;return dV end}return self end,AlignSubItemOrigin=function(ed,ee,ef)local eg=ed.GetRotation()if not a.QuaternionApproximatelyEquals(ee.GetRotation(),eg)then ee.SetRotation(eg)end;local eh=ed.GetPosition()if not a.VectorApproximatelyEquals(ee.GetPosition(),eh)then ee.SetPosition(eh)end;if ef then ee.SetVelocity(Vector3.zero)ee.SetAngularVelocity(Vector3.zero)end end,CreateSubItemGlue=function()local ei={}local self;self={Contains=function(ej,ek)return a.NillableIfHasValueOrElse(ei[ej],function(bR)return a.NillableHasValue(bR[ek])end,function()return false end)end,Add=function(ej,el,ef)if not ej or not el then local em='SubItemGlue.Add: Invalid arguments '..(not ej and', parent = '..tostring(ej)or'')..(not el and', children = '..tostring(el)or'')error(em,2)end;local bR=a.NillableIfHasValueOrElse(ei[ej],function(en)return en end,function()local en={}ei[ej]=en;return en end)if type(el)=='table'then for am,a_ in pairs(el)do bR[a_]={velocityReset=not not ef}end else bR[el]={velocityReset=not not ef}end end,Remove=function(ej,ek)return a.NillableIfHasValueOrElse(ei[ej],function(bR)if a.NillableHasValue(bR[ek])then bR[ek]=nil;return true else return false end end,function()return false end)end,RemoveParent=function(ej)if a.NillableHasValue(ei[ej])then ei[ej]=nil;return true else return false end end,RemoveAll=function()ei={}return true end,Each=function(bj,eo)return a.NillableIfHasValueOrElse(eo,function(ej)return a.NillableIfHasValue(ei[ej],function(bR)for ek,ep in pairs(bR)do if bj(ek,ej,self)==false then return false end end end)end,function()for ej,bR in pairs(ei)do if self.Each(bj,ej)==false then return false end end end)end,Update=function(eq)for ej,bR in pairs(ei)do local er=ej.GetPosition()local es=ej.GetRotation()for ek,ep in pairs(bR)do if eq or ek.IsMine then if not a.QuaternionApproximatelyEquals(ek.GetRotation(),es)then ek.SetRotation(es)end;if not a.VectorApproximatelyEquals(ek.GetPosition(),er)then ek.SetPosition(er)end;if ep.velocityReset then ek.SetVelocity(Vector3.zero)ek.SetAngularVelocity(Vector3.zero)end end end end end}return self end,CreateUpdateRoutine=function(et,eu,ev,ew)return coroutine.wrap(function()local ex=ew or TimeSpan.FromSeconds(60)local ey=vci.me.UnscaledTime;local ez=ey;local cU=vci.me.Time;local eA=true;while a.InstanceID()==''do local eB=vci.me.UnscaledTime;if eB-ex>ey then local eC='TIMEOUT: Could not receive Instance ID.'a.LogError(eC)if ev then ev(eC)end;return-1 end;ez=eB;cU=vci.me.Time;eA=false;coroutine.yield(100)end;if eA then ez=vci.me.UnscaledTime;cU=vci.me.Time;coroutine.yield(100)end;if eu then eu()end;while true do local cX=vci.me.Time;local eD=cX-cU;local eB=vci.me.UnscaledTime;local eE=eB-ez;et(eD,eE)cU=cX;ez=eB;coroutine.yield(100)end end)end,CreateSlideSwitch=function(eF)local eG=a.NillableValue(eF.colliderItem)local eH=a.NillableValue(eF.baseItem)local eI=a.NillableValue(eF.knobItem)local eJ=a.NillableValueOrDefault(eF.minValue,0)local eK=a.NillableValueOrDefault(eF.maxValue,10)if eJ>=eK then error('SlideSwitch: Invalid argument: minValue >= maxValue',2)end;local eL=(eJ+eK)*0.5;local eM=function(a_)local eN,eO=a.PingPong(a_-eJ,eK-eJ)return eN+eJ,eO end;local ad=eM(a.NillableValueOrDefault(eF.value,0))local eP=a.NillableIfHasValueOrElse(eF.tickFrequency,function(eQ)if eQ<=0 then error('SlideSwitch: Invalid argument: tickFrequency <= 0',3)end;return math.min(eQ,eK-eJ)end,function()return(eK-eJ)/10.0 end)local eR=a.NillableIfHasValueOrElse(eF.tickVector,function(cr)return Vector3.__new(cr.x,cr.y,cr.z)end,function()return Vector3.__new(0.01,0.0,0.0)end)local eS=eR.magnitude;if eS<Vector3.kEpsilon then error('SlideSwitch: Invalid argument: tickVector is too small',2)end;local eT=a.NillableValueOrDefault(eF.snapToTick,true)local eU=eF.valueTextName;local eV=a.NillableValueOrDefault(eF.valueToText,tostring)local eW=TimeSpan.FromMilliseconds(1000)local eX=TimeSpan.FromMilliseconds(50)local eY,eZ;local dP={}local self;local e_=false;local f0=0;local f1=false;local f2=TimeSpan.Zero;local f3=TimeSpan.Zero;local f4=function(f5,f6)if f6 or f5~=ad then local dQ=ad;ad=f5;for dR,ar in pairs(dP)do dR(self,ad,dQ)end end;eI.SetLocalPosition((f5-eL)/eP*eR)if eU then vci.assets.SetText(eU,eV(f5,self))end end;local f7=function()local f8=eY()local f9,fa=eM(f8)local fb=f8+eP;local fc,fd=eM(fb)assert(fc)local f5;if fa==fd or f9==eK or f9==eJ then f5=fb else f5=fa>=0 and eK or eJ end;f3=vci.me.UnscaledTime;if f5==eK or f5==eJ then f2=f3 end;eZ(f5)end;a.NillableIfHasValueOrElse(eF.lsp,function(fe)if not a.NillableHasValue(eF.propertyName)then error('SlideSwitch: Invalid argument: propertyName is nil',3)end;local ff=a.NillableValue(eF.propertyName)eY=function()return fe.GetProperty(ff,ad)end;eZ=function(a_)fe.SetProperty(ff,a_)end;fe.AddListener(function(bS,am,fg,fh)if am==ff then f4(eM(fg),true)end end)end,function()local fg=ad;eY=function()return fg end;eZ=function(a_)fg=a_;f4(eM(a_),true)end end)self={GetColliderItem=function()return eG end,GetBaseItem=function()return eH end,GetKnobItem=function()return eI end,GetMinValue=function()return eJ end,GetMaxValue=function()return eK end,GetValue=function()return ad end,GetScaleValue=function(fi,fj)assert(fi<=fj)return fi+(fj-fi)*(ad-eJ)/(eK-eJ)end,SetValue=function(a_)eZ(eM(a_))end,GetTickFrequency=function()return eP end,IsSnapToTick=function()return eT end,AddListener=function(dR)dP[dR]=dR end,RemoveListener=function(dR)dP[dR]=nil end,DoUse=function()if not e_ then f1=true;f2=vci.me.UnscaledTime;f7()end end,DoUnuse=function()f1=false end,DoGrab=function()if not f1 then e_=true;f0=(ad-eL)/eP end end,DoUngrab=function()e_=false end,Update=function()if e_ then local fk=eG.GetPosition()-eH.GetPosition()local fl=eI.GetRotation()*eR;local fm=Vector3.Project(fk,fl)local fn=(Vector3.Dot(fl,fm)>=0 and 1 or-1)*fm.magnitude/eS+f0;local fo=(eT and a.Round(fn)or fn)*eP+eL;local f5=a.Clamp(fo,eJ,eK)if f5~=ad then eZ(f5)end elseif f1 then local fp=vci.me.UnscaledTime;if fp>=f2+eW and fp>=f3+eX then f7()end elseif eG.IsMine then a.AlignSubItemOrigin(eH,eG)end end}f4(eM(eY()),false)return self end,
CreateSubItemConnector=function()local fq=function(fr,ee,fs)fr.item=ee;fr.position=ee.GetPosition()fr.rotation=ee.GetRotation()fr.initialPosition=fr.position;fr.initialRotation=fr.rotation;fr.propagation=not not fs;return fr end;local ft=function(fu)for ee,fr in pairs(fu)do fq(fr,ee,fr.propagation)end end;local fv=function(u,cF,fr,fw,fx)local fk=u-fr.initialPosition;local fy=cF*Quaternion.Inverse(fr.initialRotation)fr.position=u;fr.rotation=cF;for ee,fz in pairs(fw)do if ee~=fr.item and(not fx or fx(fz))then fz.position,fz.rotation=a.RotateAround(fz.initialPosition+fk,fz.initialRotation,u,fy)ee.SetPosition(fz.position)ee.SetRotation(fz.rotation)end end end;local fA={}local fB=true;local fC=false;local self;self={IsEnabled=function()return fB end,SetEnabled=function(c4)fB=c4;if c4 then ft(fA)fC=false end end,Contains=function(fD)return a.NillableHasValue(fA[fD])end,Add=function(fE,fF)if not fE then error('SubItemConnector.Add: Invalid argument: subItems = '..tostring(fE),2)end;local fG=type(fE)=='table'and fE or{fE}ft(fA)fC=false;for aA,ee in pairs(fG)do fA[ee]=fq({},ee,not fF)end end,Remove=function(fD)local P=a.NillableHasValue(fA[fD])fA[fD]=nil;return P end,RemoveAll=function()fA={}return true end,Each=function(bj)for ee,fr in pairs(fA)do if bj(ee,self)==false then return false end end end,GetItems=function()local fG={}for ee,fr in pairs(fA)do table.insert(fG,ee)end;return fG end,Update=function()if not fB then return end;local fH=false;for ee,fr in pairs(fA)do local bN=ee.GetPosition()local fI=ee.GetRotation()if not a.VectorApproximatelyEquals(bN,fr.position)or not a.QuaternionApproximatelyEquals(fI,fr.rotation)then if fr.propagation then if ee.IsMine then fv(bN,fI,fA[ee],fA,function(fz)if fz.item.IsMine then return true else fC=true;return false end end)fH=true;break else fC=true end else fC=true end end end;if not fH and fC then ft(fA)fC=false end end}return self end,GetSubItemTransform=function(fD)local u=fD.GetPosition()local cF=fD.GetRotation()local fJ=fD.GetLocalScale()return{positionX=u.x,positionY=u.y,positionZ=u.z,rotationX=cF.x,rotationY=cF.y,rotationZ=cF.z,rotationW=cF.w,scaleX=fJ.x,scaleY=fJ.y,scaleZ=fJ.z}end}a.SetConstEach(a,{LogLevelOff=0,LogLevelFatal=100,LogLevelError=200,LogLevelWarn=300,LogLevelInfo=400,LogLevelDebug=500,LogLevelTrace=600,LogLevelAll=0x7FFFFFFF,ColorHueSamples=10,ColorSaturationSamples=4,ColorBrightnessSamples=5,EscapeSequenceTag='#__CYTANB',SolidusTag='#__CYTANB_SOLIDUS',NegativeNumberTag='#__CYTANB_NEGATIVE_NUMBER',ArrayNumberTag='#__CYTANB_ARRAY_NUMBER',InstanceIDParameterName='__CYTANB_INSTANCE_ID',MessageValueParameterName='__CYTANB_MESSAGE_VALUE',MessageSenderOverride='__CYTANB_MESSAGE_SENDER_OVERRIDE',MessageOriginalSender='__CYTANB_MESSAGE_ORIGINAL_SENDER',TypeParameterName='__CYTANB_TYPE',ColorTypeName='Color',Vector2TypeName='Vector2',Vector3TypeName='Vector3',Vector4TypeName='Vector4',QuaternionTypeName='Quaternion',DedicatedCommentMessageName='cytanb.comment.a2a6a035-6b8d-4e06-b4f9-07e6209b0639',DedicatedNotificationMessageName='cytanb.notification.698ba55f-2b69-47f2-a68d-bc303994cff3',InstanceIDStatePatchingMessageName='cytanb.instance_id_state_patching.08504824-2041-42a2-9b2a-97448b4418b0',LOCAL_SHARED_PROPERTY_EXPIRED_KEY='__CYTANB_LOCAL_SHARED_PROPERTY_EXPIRED'})a.SetConstEach(a,{ColorMapSize=a.ColorHueSamples*a.ColorSaturationSamples*a.ColorBrightnessSamples,FatalLogLevel=a.LogLevelFatal,ErrorLogLevel=a.LogLevelError,WarnLogLevel=a.LogLevelWarn,InfoLogLevel=a.LogLevelInfo,DebugLogLevel=a.LogLevelDebug,TraceLogLevel=a.LogLevelTrace})f=a.MakeSearchPattern({'\t','\n','\v','\f','\r',' '},1,-1)g=a.MakeSearchPattern({'sprite=','SPRITE='})h=a.MakeSearchPattern({'0','1','2','3','4','5','6','7','8','9'},1,9)i,j=(function()local fK={'A','B','C','D','E','F','a','b','c','d','e','f','0','1','2','3','4','5','6','7','8','9'}return a.MakeSearchPattern(fK,4,4),a.MakeSearchPattern(fK,8,8)end)()k=a.MakeSearchPattern({'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','_','-','.','(',')','!','~','*','\'','%'},1,-1)l={{tag=a.NegativeNumberTag,search=a.NegativeNumberTag,replacement=''},{tag=a.ArrayNumberTag,search=a.ArrayNumberTag,replacement=''},{tag=a.SolidusTag,search=a.SolidusTag,replacement='/'},{tag=a.EscapeSequenceTag,search=a.EscapeSequenceTag..a.EscapeSequenceTag,replacement=a.EscapeSequenceTag}}m={[a.ColorTypeName]={compositionFieldNames=a.ListToMap({'r','g','b','a'}),compositionFieldLength=4,toTableFunc=a.ColorToTable,fromTableFunc=a.ColorFromTable},[a.Vector2TypeName]={compositionFieldNames=a.ListToMap({'x','y'}),compositionFieldLength=2,toTableFunc=a.Vector2ToTable,fromTableFunc=a.Vector2FromTable},[a.Vector3TypeName]={compositionFieldNames=a.ListToMap({'x','y','z'}),compositionFieldLength=3,toTableFunc=a.Vector3ToTable,fromTableFunc=a.Vector3FromTable},[a.Vector4TypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.Vector4ToTable,fromTableFunc=a.Vector4FromTable},[a.QuaternionTypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.QuaternionToTable,fromTableFunc=a.QuaternionFromTable}}n=a.ListToMap({a.NegativeNumberTag,a.ArrayNumberTag})o=a.LogLevelInfo;q={[a.LogLevelFatal]='FATAL',[a.LogLevelError]='ERROR',[a.LogLevelWarn]='WARN',[a.LogLevelInfo]='INFO',[a.LogLevelDebug]='DEBUG',[a.LogLevelTrace]='TRACE'}r,s=(function()local dI='eff3a188-bfc7-4b0e-93cb-90fd1adc508c'local dO=_G[dI]if not dO then dO={}_G[dI]=dO end;local fL=dO.randomSeedValue;if not fL then fL=os.time()-os.clock()*10000;dO.randomSeedValue=fL;math.randomseed(fL)end;local fM=dO.clientID;if type(fM)~='string'then fM=tostring(a.RandomUUID())dO.clientID=fM end;local fN=vci.state.Get(c)or''if fN==''and vci.assets.IsMine then fN=tostring(a.RandomUUID())vci.state.Set(c,fN)end;return fN,fM end)()if d then vci.message.On(a.InstanceIDStatePatchingMessageName,function(b5,bm,bd)if vci.assets.IsMine and r~=''then vci.state.Set(c,r)end end)end;return a end;if __CYTANB_EXPORT_MODULE then return setmetatable({},{__call=function(self,_ENV)return b(_ENV)end})else return b(_ENV)end end)()if __CYTANB_EXPORT_MODULE then return cytanb end
