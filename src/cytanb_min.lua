-- SPDX-License-Identifier: MIT
-- Copyright (c) 2019 oO (https://github.com/oocytanb)
---@type cytanb @See `cytanb_annotations.lua`
local cytanb=(function()local b=function(_ENV)if not require or not vci then error('Invalid _ENV: Enable `__CYTANB_EXPORT_MODULE = true` line and pass valid _ENV of VCI-main if use cytanb.lua as module.',3)end;local c;local d;local e;local f;local g;local h;local i;local j;local k;local l;local m=false;local n;local o;local a;local p=function(q,r)local s=q+r-1;return q,s,s+1 end;local t=function(q,r)local s=q-r+1;return s,q,s-1 end;local u=function(v,w,x,q,y)local z=x.searchMap;for A,r in pairs(x.lengthList)do if r<=0 then error('SearchPattern: Invalid parameter: searchLen <= 0')else local B,C,s=y(q,r)if B>=1 and C<=w then local D=string.sub(v,B,C)if z[D]then return true,r,s end end end end;return false,-1,-1 end;local E=function(v,x,q,y)if v==nil or x==nil then return false,-1 end;if x.hasEmptySearch then return true,0 end;local w=string.len(v)local F=x.repeatMin;local G=x.repeatMax;local H=G<0;local I=q;local J=0;local K=0;while H or K<G do local L,M,s=u(v,w,x,I,y)if L then if M<=0 then error('SearchPattern: Invalid parameter')end;I=s;J=J+M;K=K+1 else break end end;if K>=F then return true,J else return false,-1 end end;local N=function(v,O,q,P,y,Q)if v==nil or O==nil then return false,-1 end;local r=string.len(O)if P then local L=Q(v,O)return L,L and r or-1 else if r==0 then return true,r end;local w=string.len(v)local B,C=y(q,r)if B>=1 and C<=w then local D=string.sub(v,B,C)local L=Q(D,O)return L,L and r or-1 else return false,-1 end end end;local R=function(v,S,T)if S<=T then local U=string.unicode(v,S,S)if U>=0xDC00 or U<=0xDFFF then return true,1,U end end;return false,-1,nil end;local V=function(v,S,T,W)if S<=T then local X,Y=a.StringStartsWith(v,d,S)if X then local Z=S+Y;if Z<=T then local _,a0=a.StringStartsWith(v,e,Z)if _ then local a1=Z+a0;if a1<=T and string.unicode(v,a1,a1)==0x3E then local a2=tonumber(string.sub(v,Z,Z+a0-1))if a2<=W then return true,a1-S+1,a2 end end end end end end;return false,-1,nil end;local a3=function(a4,a5)for a6=1,4 do local a7=a4[a6]-a5[a6]if a7~=0 then return a7 end end;return 0 end;local a8;a8={__eq=function(a4,a5)return a4[1]==a5[1]and a4[2]==a5[2]and a4[3]==a5[3]and a4[4]==a5[4]end,__lt=function(a4,a5)return a3(a4,a5)<0 end,__le=function(a4,a5)return a3(a4,a5)<=0 end,__tostring=function(a9)local aa=a9[2]or 0;local ab=a9[3]or 0;return string.format('%08x-%04x-%04x-%04x-%04x%08x',bit32.band(a9[1]or 0,0xFFFFFFFF),bit32.band(bit32.rshift(aa,16),0xFFFF),bit32.band(aa,0xFFFF),bit32.band(bit32.rshift(ab,16),0xFFFF),bit32.band(ab,0xFFFF),bit32.band(a9[4]or 0,0xFFFFFFFF))end,__concat=function(a4,a5)local ac=getmetatable(a4)local ad=ac==a8 or type(ac)=='table'and ac.__concat==a8.__concat;local ae=getmetatable(a5)local af=ae==a8 or type(ae)=='table'and ae.__concat==a8.__concat;if not ad and not af then error('UUID: attempt to concatenate illegal values',2)end;return(ad and a8.__tostring(a4)or a4)..(af and a8.__tostring(a5)or a5)end}local ag='__CYTANB_CONST_VARIABLES'local ah=function(table,ai)local aj=getmetatable(table)if aj then local ak=rawget(aj,ag)if ak then local al=rawget(ak,ai)if type(al)=='function'then return al(table,ai)else return al end end end;return nil end;local am=function(table,ai,an)local aj=getmetatable(table)if aj then local ak=rawget(aj,ag)if ak then if rawget(ak,ai)~=nil then error('Cannot assign to read only field "'..ai..'"',2)end end end;rawset(table,ai,an)end;local ao=function(ap,aq)if not ap then return false,false end;local ar=ap[a.TypeParameterName]if a.NillableHasValue(ar)and a.NillableValue(ar)~=aq then return false,false end;return a.NillableIfHasValueOrElse(j[aq],function(as)local at=as.compositionFieldNames;local au=as.compositionFieldLength;local av=false;for aw,an in pairs(ap)do if at[aw]then au=au-1;if au<=0 and av then break end elseif aw~=a.TypeParameterName then av=true;if au<=0 then break end end end;return au<=0,av end,function()return false,false end)end;local ax=function(v)return a.StringReplace(a.StringReplace(v,a.EscapeSequenceTag,a.EscapeSequenceTag..a.EscapeSequenceTag),'/',a.SolidusTag)end;local ay=function(v,az)local aA=string.len(v)local aB=string.len(a.EscapeSequenceTag)if aB>aA then return v end;local aC=''local a6=1;while a6<aA do local C,aD=string.find(v,a.EscapeSequenceTag,a6,true)if not C then if a6==1 then aC=v else aC=aC..string.sub(v,a6)end;break end;if C>a6 then aC=aC..string.sub(v,a6,C-1)end;local aE=false;for aF,aG in ipairs(i)do local L=a.StringStartsWith(v,aG.search,C)if L then aC=aC..(az and az(aG.tag)or aG.replacement)a6=C+string.len(aG.search)aE=true;break end end;if not aE then aC=aC..a.EscapeSequenceTag;a6=aD+1 end end;return aC end;local aH;aH=function(aI,aJ)if type(aI)~='table'then return aI end;if not aJ then aJ={}end;if aJ[aI]then error('circular reference')end;aJ[aI]=true;local aK={}for aw,an in pairs(aI)do local aL=type(aw)local aM;if aL=='string'then aM=ax(aw)elseif aL=='number'then aM=tostring(aw)..a.ArrayNumberTag else aM=aw end;local aN=type(an)if aN=='string'then aK[aM]=ax(an)elseif aN=='number'and an<0 then aK[tostring(aM)..a.NegativeNumberTag]=tostring(an)else aK[aM]=aH(an,aJ)end end;aJ[aI]=nil;return aK end;local aO;aO=function(aK,aP)if type(aK)~='table'then return aK end;local aI={}for aw,an in pairs(aK)do local aM;local aQ=false;if type(aw)=='string'then local aR=false;aM=ay(aw,function(aS)if aS==a.NegativeNumberTag then aQ=true elseif aS==a.ArrayNumberTag then aR=true end;return nil end)if aR then aM=tonumber(aM)or aM end else aM=aw;aQ=false end;if aQ and type(an)=='string'then aI[aM]=tonumber(an)elseif type(an)=='string'then aI[aM]=ay(an,function(aS)return k[aS]end)else aI[aM]=aO(an,aP)end end;if not aP then a.NillableIfHasValue(aI[a.TypeParameterName],function(aT)a.NillableIfHasValue(j[aT],function(as)local aU,av=as.fromTableFunc(aI)if not av then a.NillableIfHasValue(aU,function(a9)aI=a9 end)end end)end)end;return aI end;local aV={['nil']=function(aW)return nil end,['number']=function(aW)return tonumber(aW)end,['string']=function(aW)return tostring(aW)end,['boolean']=function(aW)if aW then return true else return false end end}local aX=function(aW,aY)local aZ=type(aW)if aZ==aY then return aW else local a_=aV[aY]if a_ then return a_(aW)else return nil end end end;local b0=function(b1,b2)if b2 and type(b2)=='table'then local b3={}for ai,aW in pairs(b1)do local b4=b2[ai]local b5;if b4==nil then b5=aW else local b6=aX(b4,type(aW))if b6==nil then b5=aW else b5=b6 end end;b3[ai]=b5 end;b3[a.MessageOriginalSender]=b1;return b3 else return b1 end end;local b7=function(b8)local aK=a.NillableIfHasValueOrElse(b8,function(aI)if type(aI)~='table'then error('MakeMessageData: Invalid argument: table expected',4)end;return a.TableToSerializable(aI)end,function()return{}end)local b9=a.InstanceID()if b9==''then a.LogWarn('MakeMessageData: InstanceID is empty.')end;aK[a.InstanceIDParameterName]=b9;return json.serialize(aK)end;local ba=function(bb,bc,b2,bd)local be={type=bd,name='',commentSource=''}local b8={[a.MessageValueParameterName]=tostring(bc),[a.MessageSenderOverride]=type(b2)=='table'and a.Extend(be,b2,true)or be}a.EmitMessage(bb,b8)end;local bf=function(bb,bg,bh)local bi,bj=(function()local a_=function(b1,bk,b8)local bc=tostring(b8[a.MessageValueParameterName]or'')bh(b1,bg,bc)end;local bi=a.OnMessage(bb,a_)local bj=a.OnMessage(bg,a_)return bi,bj end)()return{Off=function()bi.Off()bj.Off()end}end;a={InstanceID=function()return vci.assets.GetInstanceId()or''end,ClientID=function()return o end,NillableHasValue=function(bl)return bl~=nil end,NillableValue=function(bl)if bl==nil then error('nillable: value is nil',2)end;return bl end,NillableValueOrDefault=function(bl,bm)if bl==nil then if bm==nil then error('nillable: defaultValue is nil',2)end;return bm else return bl end end,NillableIfHasValue=function(bl,bh)if bl==nil then return nil else return bh(bl)end end,NillableIfHasValueOrElse=function(bl,bh,bn)if bl==nil then return bn()else return bh(bl)end end,MakeSearchPattern=function(bo,bp,bq)local F=bp and math.floor(bp)or 1;if F<0 then error('SearchPattern: Invalid parameter: optRepeatMin < 0')end;local G=bq and math.floor(bq)or F;if G>=0 and G<F then error('SearchPattern: Invalid parameter: repeatMax < repeatMin')end;local br=G==0;local z={}local bs={}local bt={}local bu=0;for bv,bw in pairs(bo)do local r=string.len(bw)if r==0 then br=true else z[bw]=r;if not bs[r]then bs[r]=true;bu=bu+1;bt[bu]=r end end end;table.sort(bt,function(bx,L)return bx>L end)return{hasEmptySearch=br,searchMap=z,lengthList=bt,repeatMin=F,repeatMax=G}end,StringStartsWith=function(v,O,by)local I=by and math.max(1,math.floor(by))or 1;if type(O)=='table'then return E(v,O,I,p)else return N(v,O,I,I==1,p,string.startsWith)end end,StringEndsWith=function(v,O,bz)if v==nil then return false,-1 end;local w=string.len(v)local I=bz and math.min(w,math.floor(bz))or w;if type(O)=='table'then return E(v,O,I,t)else return N(v,O,I,I==w,t,string.endsWith)end end,
StringTrimStart=function(v,bA)if v==nil or v==''then return v end;local L,M=a.StringStartsWith(v,bA or c)if L and M>=1 then return string.sub(v,M+1)else return v end end,StringTrimEnd=function(v,bA)if v==nil or v==''then return v end;local L,M=a.StringEndsWith(v,bA or c)if L and M>=1 then return string.sub(v,1,string.len(v)-M)else return v end end,StringTrim=function(v,bA)return a.StringTrimEnd(a.StringTrimStart(v,bA),bA)end,StringReplace=function(v,bB,bC)local bD;local aA=string.len(v)if bB==''then bD=bC;for a6=1,aA do bD=bD..string.sub(v,a6,a6)..bC end else bD=''local a6=1;while true do local B,C=string.find(v,bB,a6,true)if B then bD=bD..string.sub(v,a6,B-1)..bC;a6=C+1;if a6>aA then break end else bD=a6==1 and v or bD..string.sub(v,a6)break end end end;return bD end,StringEachCode=function(v,bh,bE,a6,bF,bG,bH,bI)local aA=string.len(v)if aA==0 then return 0,0,0 end;local bJ=a6 and math.floor(a6)or 1;local T=bF and math.floor(bF)or aA;local W=math.min(bI or 3182,0x1FFFFF)if bJ<=0 or T>aA or bJ>T then error('StringEachCode: invalid range')end;local bK=0;local bL=bJ;local bM=bL;while bL<=T do local B=bL;local U=string.unicode(v,bL,bL)if U>=0xD800 and U<=0xDBFF then local L,M=R(v,bL+1,T)if L then bL=bL+M end elseif bG and U==0x3C then local L,M,a2=V(v,bL+1,T,W)if L and(not bH or bH(a2))then bL=bL+M end end;bK=bK+1;bM=bL;if bh and bh(string.sub(v,B,bL),bK,bE,B,bL)==false then break end;bL=bL+1 end;return bK,bJ,bM end,SetConst=function(bB,bb,a9)if type(bB)~='table'then error('Cannot set const to non-table target',2)end;local bN=getmetatable(bB)local aj=bN or{}local bO=rawget(aj,ag)if rawget(bB,bb)~=nil then error('Non-const field "'..bb..'" already exists',2)end;if not bO then bO={}rawset(aj,ag,bO)aj.__index=ah;aj.__newindex=am end;rawset(bO,bb,a9)if not bN then setmetatable(bB,aj)end;return bB end,SetConstEach=function(bB,bP)for aw,an in pairs(bP)do a.SetConst(bB,aw,an)end;return bB end,Extend=function(bB,bQ,bR,bS,aJ)if bB==bQ or type(bB)~='table'or type(bQ)~='table'then return bB end;if bR then if not aJ then aJ={}end;if aJ[bQ]then error('circular reference')end;aJ[bQ]=true end;for aw,an in pairs(bQ)do if bR and type(an)=='table'then local bT=bB[aw]bB[aw]=a.Extend(type(bT)=='table'and bT or{},an,bR,bS,aJ)else bB[aw]=an end end;if not bS then local bU=getmetatable(bQ)if type(bU)=='table'then if bR then local bV=getmetatable(bB)setmetatable(bB,a.Extend(type(bV)=='table'and bV or{},bU,true))else setmetatable(bB,bU)end end end;if bR then aJ[bQ]=nil end;return bB end,Vars=function(an,bW,bX,aJ)local bY;if bW then bY=bW~='__NOLF'else bW='  'bY=true end;if not bX then bX=''end;if not aJ then aJ={}end;local bZ=type(an)if bZ=='table'then aJ[an]=aJ[an]and aJ[an]+1 or 1;local b_=bY and bX..bW or''local v='('..tostring(an)..') {'local c0=true;for ai,aW in pairs(an)do if c0 then c0=false else v=v..(bY and','or', ')end;if bY then v=v..'\n'..b_ end;if type(aW)=='table'and aJ[aW]and aJ[aW]>0 then v=v..ai..' = ('..tostring(aW)..')'else v=v..ai..' = '..a.Vars(aW,bW,b_,aJ)end end;if not c0 and bY then v=v..'\n'..bX end;v=v..'}'aJ[an]=aJ[an]-1;if aJ[an]<=0 then aJ[an]=nil end;return v elseif bZ=='function'or bZ=='thread'or bZ=='userdata'then return'('..bZ..')'elseif bZ=='string'then return'('..bZ..') '..string.format('%q',an)else return'('..bZ..') '..tostring(an)end end,PosixTime=(function()local c1=os.time({year=1970,month=1,day=2,hour=0,min=0,sec=0,isdst=false})if not c1 then error('unexpected')end;local c2=os.date('!*t',c1)local c3=(((c2.day-1)*24+c2.hour)*60+c2.min)*60+c2.sec;return function(c4)return os.difftime(c4 or os.time(),c1)+c3 end end)(),GetLogLevel=function()return l end,SetLogLevel=function(c5)l=c5 end,IsOutputLogLevelEnabled=function()return m end,SetOutputLogLevelEnabled=function(c6)m=not not c6 end,Log=function(c5,...)if c5<=l then local c7=m and(n[c5]or'LOG LEVEL '..tostring(c5))..' | 'or''local c8=table.pack(...)if c8.n==1 then local an=c8[1]if an~=nil then local v=type(an)=='table'and a.Vars(an)or tostring(an)print(m and c7 ..v or v)else print(c7)end else local v=c7;for a6=1,c8.n do local an=c8[a6]if an~=nil then v=v..(type(an)=='table'and a.Vars(an)or tostring(an))end end;print(v)end end end,LogFatal=function(...)a.Log(a.LogLevelFatal,...)end,LogError=function(...)a.Log(a.LogLevelError,...)end,LogWarn=function(...)a.Log(a.LogLevelWarn,...)end,LogInfo=function(...)a.Log(a.LogLevelInfo,...)end,LogDebug=function(...)a.Log(a.LogLevelDebug,...)end,LogTrace=function(...)a.Log(a.LogLevelTrace,...)end,FatalLog=function(...)a.LogFatal(...)end,ErrorLog=function(...)a.LogError(...)end,WarnLog=function(...)a.LogWarn(...)end,InfoLog=function(...)a.LogInfo(...)end,DebugLog=function(...)a.LogDebug(...)end,TraceLog=function(...)a.LogTrace(...)end,ListToMap=function(c9,ca)local cb={}if ca==nil then for aw,an in pairs(c9)do cb[an]=an end elseif type(ca)=='function'then for aw,an in pairs(c9)do local cc,cd=ca(an)cb[cc]=cd end else for aw,an in pairs(c9)do cb[an]=ca end end;return cb end,Round=function(ce,cf)if cf then local cg=10^cf;return math.floor(ce*cg+0.5)/cg else return math.floor(ce+0.5)end end,Clamp=function(a9,ch,ci)return math.max(ch,math.min(a9,ci))end,Lerp=function(bx,L,bZ)if bZ<=0.0 then return bx elseif bZ>=1.0 then return L else return bx+(L-bx)*bZ end end,LerpUnclamped=function(bx,L,bZ)if bZ==0.0 then return bx elseif bZ==1.0 then return L else return bx+(L-bx)*bZ end end,PingPong=function(bZ,cj)if cj==0 then return 0,1 end;local ck=math.floor(bZ/cj)local cl=bZ-ck*cj;if ck<0 then if(ck+1)%2==0 then return cj-cl,-1 else return cl,1 end else if ck%2==0 then return cl,1 else return cj-cl,-1 end end end,VectorApproximatelyEquals=function(cm,cn)return(cm-cn).sqrMagnitude<1E-10 end,QuaternionApproximatelyEquals=function(cm,cn)local co=Quaternion.Dot(cm,cn)return co<1.0+1E-06 and co>1.0-1E-06 end,QuaternionToAngleAxis=function(cp)local ck=cp.normalized;local cq=math.acos(ck.w)local cr=math.sin(cq)local cs=math.deg(cq*2.0)local ct;if math.abs(cr)<=Quaternion.kEpsilon then ct=Vector3.right else local B=1.0/cr;ct=Vector3.__new(ck.x*B,ck.y*B,ck.z*B)end;return cs,ct end,QuaternionTwist=function(cp,cu)if cu.sqrMagnitude<Vector3.kEpsilonNormalSqrt then return Quaternion.identity end;local cv=Vector3.__new(cp.x,cp.y,cp.z)if cv.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cw=Vector3.Project(cv,cu)if cw.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cx=Quaternion.__new(cw.x,cw.y,cw.z,cp.w)cx.Normalize()return cx else return Quaternion.AngleAxis(0,cu)end else local cy=a.QuaternionToAngleAxis(cp)return Quaternion.AngleAxis(cy,cu)end end,ApplyQuaternionToVector3=function(cp,cz)local cA=cp.w*cz.x+cp.y*cz.z-cp.z*cz.y;local cB=cp.w*cz.y-cp.x*cz.z+cp.z*cz.x;local cC=cp.w*cz.z+cp.x*cz.y-cp.y*cz.x;local cD=-cp.x*cz.x-cp.y*cz.y-cp.z*cz.z;return Vector3.__new(cD*-cp.x+cA*cp.w+cB*-cp.z-cC*-cp.y,cD*-cp.y-cA*-cp.z+cB*cp.w+cC*-cp.x,cD*-cp.z+cA*-cp.y-cB*-cp.x+cC*cp.w)end,RotateAround=function(cE,cF,cG,cH)return cG+cH*(cE-cG),cH*cF end,Random32=function()return bit32.band(math.random(-2147483648,2147483646)+2147483648,0xFFFFFFFF)end,RandomUUID=function()return a.UUIDFromNumbers(a.Random32(),bit32.bor(0x4000,bit32.band(a.Random32(),0xFFFF0FFF)),bit32.bor(0x80000000,bit32.band(a.Random32(),0x3FFFFFFF)),a.Random32())end,UUIDString=function(cI)return a8.__tostring(cI)end,UUIDFromNumbers=function(...)local cJ=...local bZ=type(cJ)local cK,cL,cM,cN;if bZ=='table'then cK=cJ[1]cL=cJ[2]cM=cJ[3]cN=cJ[4]else cK,cL,cM,cN=...end;local cI={bit32.band(cK or 0,0xFFFFFFFF),bit32.band(cL or 0,0xFFFFFFFF),bit32.band(cM or 0,0xFFFFFFFF),bit32.band(cN or 0,0xFFFFFFFF)}setmetatable(cI,a8)return cI end,
UUIDFromString=function(v)local aA=string.len(v)if aA==32 then local cI=a.UUIDFromNumbers(0,0,0,0)for a6=1,4 do local B=1+(a6-1)*8;if not a.StringStartsWith(v,g,B)then return nil end;cI[a6]=tonumber(string.sub(v,B,B+7),16)end;return cI elseif aA==36 then if not a.StringStartsWith(v,g,1)then return nil end;local cK=tonumber(string.sub(v,1,8),16)if not a.StringStartsWith(v,'-',9)or not a.StringStartsWith(v,f,10)or not a.StringStartsWith(v,'-',14)or not a.StringStartsWith(v,f,15)then return nil end;local cL=tonumber(string.sub(v,10,13)..string.sub(v,15,18),16)if not a.StringStartsWith(v,'-',19)or not a.StringStartsWith(v,f,20)or not a.StringStartsWith(v,'-',24)or not a.StringStartsWith(v,f,25)then return nil end;local cM=tonumber(string.sub(v,20,23)..string.sub(v,25,28),16)if not a.StringStartsWith(v,g,29)then return nil end;local cN=tonumber(string.sub(v,29),16)return a.UUIDFromNumbers(cK,cL,cM,cN)else return nil end end,ParseUUID=function(v)return a.UUIDFromString(v)end,CreateCircularQueue=function(cO)if type(cO)~='number'or cO<1 then error('CreateCircularQueue: Invalid argument: capacity = '..tostring(cO),2)end;local self;local cP=math.floor(cO)local aC={}local cQ=0;local cR=0;local cS=0;self={Size=function()return cS end,Clear=function()cQ=0;cR=0;cS=0 end,IsEmpty=function()return cS==0 end,Offer=function(cT)aC[cQ+1]=cT;cQ=(cQ+1)%cP;if cS<cP then cS=cS+1 else cR=(cR+1)%cP end;return true end,OfferFirst=function(cT)cR=(cP+cR-1)%cP;aC[cR+1]=cT;if cS<cP then cS=cS+1 else cQ=(cP+cQ-1)%cP end;return true end,Poll=function()if cS==0 then return nil else local cT=aC[cR+1]cR=(cR+1)%cP;cS=cS-1;return cT end end,PollLast=function()if cS==0 then return nil else cQ=(cP+cQ-1)%cP;local cT=aC[cQ+1]cS=cS-1;return cT end end,Peek=function()if cS==0 then return nil else return aC[cR+1]end end,PeekLast=function()if cS==0 then return nil else return aC[(cP+cQ-1)%cP+1]end end,Get=function(cU)if cU<1 or cU>cS then a.LogError('CreateCircularQueue.Get: index is outside the range: '..cU)return nil end;return aC[(cR+cU-1)%cP+1]end,IsFull=function()return cS>=cP end,MaxSize=function()return cP end}return self end,DetectClicks=function(cV,cW,cX)local bK=cV or 0;local cY=cX or TimeSpan.FromMilliseconds(500)local cZ=vci.me.Time;local c_=cW and cZ>cW+cY and 1 or bK+1;return c_,cZ end,ColorRGBToHSV=function(d0)local d1,al,d2,an=Color.RGBToHSV(d0)return al,d2,an end,ColorFromARGB32=function(d3)local d4=type(d3)=='number'and d3 or 0xFF000000;return Color.__new(bit32.band(bit32.rshift(d4,16),0xFF)/0xFF,bit32.band(bit32.rshift(d4,8),0xFF)/0xFF,bit32.band(d4,0xFF)/0xFF,bit32.band(bit32.rshift(d4,24),0xFF)/0xFF)end,ColorToARGB32=function(d0)return bit32.bor(bit32.lshift(bit32.band(a.Round(0xFF*d0.a),0xFF),24),bit32.lshift(bit32.band(a.Round(0xFF*d0.r),0xFF),16),bit32.lshift(bit32.band(a.Round(0xFF*d0.g),0xFF),8),bit32.band(a.Round(0xFF*d0.b),0xFF))end,ColorFromIndex=function(d5,d6,d7,d8,d9)local da=math.max(math.floor(d6 or a.ColorHueSamples),1)local db=d9 and da or da-1;local dc=math.max(math.floor(d7 or a.ColorSaturationSamples),1)local dd=math.max(math.floor(d8 or a.ColorBrightnessSamples),1)local cU=a.Clamp(math.floor(d5 or 0),0,da*dc*dd-1)local de=cU%da;local df=math.floor(cU/da)local B=df%dc;local dg=math.floor(df/dc)if d9 or de~=db then local al=de/db;local d2=(dc-B)/dc;local an=(dd-dg)/dd;return Color.HSVToRGB(al,d2,an)else local an=(dd-dg)/dd*B/(dc-1)return Color.HSVToRGB(0.0,0.0,an)end end,ColorToIndex=function(d0,d6,d7,d8,d9)local da=math.max(math.floor(d6 or a.ColorHueSamples),1)local db=d9 and da or da-1;local dc=math.max(math.floor(d7 or a.ColorSaturationSamples),1)local dd=math.max(math.floor(d8 or a.ColorBrightnessSamples),1)local al,d2,an=a.ColorRGBToHSV(d0)local B=a.Round(dc*(1.0-d2))if d9 or B<dc then local dh=a.Round(db*al)if dh>=db then dh=0 end;if B>=dc then B=dc-1 end;local dg=math.min(dd-1,a.Round(dd*(1.0-an)))return dh+da*(B+dc*dg)else local di=a.Round((dc-1)*an)if di==0 then local dj=a.Round(dd*(1.0-an))if dj>=dd then return da-1 else return da*(1+a.Round(an*(dc-1)/(dd-dj)*dd)+dc*dj)-1 end else return da*(1+di+dc*a.Round(dd*(1.0-an*(dc-1)/di)))-1 end end end,ColorToTable=function(d0)return d0 and{[a.TypeParameterName]=a.ColorTypeName,r=d0.r,g=d0.g,b=d0.b,a=d0.a}or nil end,ColorFromTable=function(ap)local L,av=ao(ap,a.ColorTypeName)return L and Color.__new(ap.r,ap.g,ap.b,ap.a)or nil,av end,Vector2ToTable=function(a9)return a9 and{[a.TypeParameterName]=a.Vector2TypeName,x=a9.x,y=a9.y}or nil end,Vector2FromTable=function(ap)local L,av=ao(ap,a.Vector2TypeName)return L and Vector2.__new(ap.x,ap.y)or nil,av end,Vector3ToTable=function(a9)return a9 and{[a.TypeParameterName]=a.Vector3TypeName,x=a9.x,y=a9.y,z=a9.z}or nil end,Vector3FromTable=function(ap)local L,av=ao(ap,a.Vector3TypeName)return L and Vector3.__new(ap.x,ap.y,ap.z)or nil,av end,Vector4ToTable=function(a9)return a9 and{[a.TypeParameterName]=a.Vector4TypeName,x=a9.x,y=a9.y,z=a9.z,w=a9.w}or nil end,Vector4FromTable=function(ap)local L,av=ao(ap,a.Vector4TypeName)return L and Vector4.__new(ap.x,ap.y,ap.z,ap.w)or nil,av end,QuaternionToTable=function(a9)return a9 and{[a.TypeParameterName]=a.QuaternionTypeName,x=a9.x,y=a9.y,z=a9.z,w=a9.w}or nil end,QuaternionFromTable=function(ap)local L,av=ao(ap,a.QuaternionTypeName)return L and Quaternion.__new(ap.x,ap.y,ap.z,ap.w)or nil,av end,TableToSerializable=function(aI)return aH(aI)end,TableFromSerializable=function(aK,aP)return aO(aK,aP)end,TableToSerialiable=function(aI)return aH(aI)end,TableFromSerialiable=function(aK,aP)return aO(aK,aP)end,EmitMessage=function(bb,b8)vci.message.Emit(bb,b7(b8))end,EmitMessageTo=function(bb,b8,dk)if dk~=nil and dk~=''then vci.message.EmitWithId(bb,b7(b8),dk)else a.LogWarn('EmitMessageTo: targetID is not specified: '..tostring(dk))end end,EmitInstanceMessage=function(bb,b8)a.EmitMessageTo(bb,b8,a.InstanceID())end,OnMessage=function(bb,bh)local a_=function(b1,bk,bc)if type(bc)=='string'and string.startsWith(bc,'{')then local dl,aK=pcall(json.parse,bc)if dl and type(aK)=='table'and aK[a.InstanceIDParameterName]then local dm=a.TableFromSerializable(aK)bh(b0(b1,dm[a.MessageSenderOverride]),bk,dm)return end end;bh(b1,bk,{[a.MessageValueParameterName]=bc})end;vci.message.On(bb,a_)return{Off=function()if a_ then a_=nil end end}end,OnInstanceMessage=function(bb,bh)local a_=function(b1,bk,b8)local b9=a.InstanceID()if b9~=''and b9==b8[a.InstanceIDParameterName]then bh(b1,bk,b8)end end;return a.OnMessage(bb,a_)end,EmitCommentMessage=function(bc,b2)ba(a.DedicatedCommentMessageName,bc,b2,'comment')end,OnCommentMessage=function(bh)return bf(a.DedicatedCommentMessageName,'comment',bh)end,EmitNotificationMessage=function(bc,b2)ba(a.DedicatedNotificationMessageName,bc,b2,'notification')end,OnNotificationMessage=function(bh)return bf(a.DedicatedNotificationMessageName,'notification',bh)end,GetEffekseerEmitterMap=function(bb)local dn=vci.assets.GetEffekseerEmitters(bb)if not dn then return nil end;local cb={}for a6,dp in pairs(dn)do cb[dp.EffectName]=dp end;return cb end,ParseTagString=function(v)local bL=string.find(v,'#',1,true)if not bL then return{},v end;local dq={}local dr=string.sub(v,1,bL-1)bL=bL+1;local aA=string.len(v)while bL<=aA do local ds,dt=a.StringStartsWith(v,h,bL)if ds then local du=bL+dt;local dv=string.sub(v,bL,du-1)local dw=dv;bL=du;if bL<=aA and a.StringStartsWith(v,'=',bL)then bL=bL+1;local dx,dy=a.StringStartsWith(v,h,bL)if dx then local dz=bL+dy;dw=string.sub(v,bL,dz-1)bL=dz else dw=''end end;dq[dv]=dw end;bL=string.find(v,'#',bL,true)if not bL then break end;bL=bL+1 end;return dq,dr end,
CalculateSIPrefix=(function()local dA=9;local dB={'y','z','a','f','p','n','u','m','','k','M','G','T','P','E','Z','Y'}local dC=#dB;return function(ce)local dD=ce==0 and 0 or a.Clamp(math.floor(math.log(math.abs(ce),1000)),1-dA,dC-dA)return dD==0 and ce or ce/1000^dD,dB[dA+dD],dD*3 end end)(),CreateLocalSharedProperties=function(dE,dF)local dG=TimeSpan.FromSeconds(5)local dH='33657f0e-7c44-4ee7-acd9-92dd8b8d807a'local dI='__CYTANB_LOCAL_SHARED_PROPERTIES_LISTENER_MAP'if type(dE)~='string'or string.len(dE)<=0 or type(dF)~='string'or string.len(dF)<=0 then error('LocalSharedProperties: Invalid arguments',2)end;local dJ=_G[dH]if not dJ then dJ={}_G[dH]=dJ end;dJ[dF]=vci.me.UnscaledTime;local dK=_G[dE]if not dK then dK={[dI]={}}_G[dE]=dK end;local dL=dK[dI]local self;self={GetLspID=function()return dE end,GetLoadID=function()return dF end,GetProperty=function(ai,bm)local a9=dK[ai]if a9==nil then return bm else return a9 end end,SetProperty=function(ai,a9)if ai==dI then error('LocalSharedProperties: Invalid argument: key = ',ai,2)end;local cZ=vci.me.UnscaledTime;local dM=dK[ai]dK[ai]=a9;for dN,b9 in pairs(dL)do local bZ=dJ[b9]if bZ and bZ+dG>=cZ then dN(self,ai,a9,dM)else dN(self,a.LOCAL_SHARED_PROPERTY_EXPIRED_KEY,true,false)dL[dN]=nil;dJ[b9]=nil end end end,Clear=function()for ai,a9 in pairs(dK)do if ai~=dI then self.SetProperty(ai,nil)end end end,Each=function(bh)for ai,a9 in pairs(dK)do if ai~=dI and bh(a9,ai,self)==false then return false end end end,AddListener=function(dN)dL[dN]=dF end,RemoveListener=function(dN)dL[dN]=nil end,UpdateAlive=function()dJ[dF]=vci.me.UnscaledTime end}return self end,EstimateFixedTimestep=function(dO,dP)local dQ=dP or{}local dR=dQ.mass or 1;if dR<=0 then error('EstimateFixedTimestep: Invalid argument: mass <= 0',2)end;local dS=dQ.acceleration or 1000;if dS<=0 then error('EstimateFixedTimestep: Invalid argument: acceleration <= 0',2)end;local dT=dQ.startCalcTime or TimeSpan.FromSeconds(5)local dU=dQ.stopCalcTime or TimeSpan.FromSeconds(30)if dT<TimeSpan.Zero or dT>dU then error('EstimateFixedTimestep: Invalid argument: startCalcTime < Zero or startCalcTime > stopCalcTime',2)end;local dV=dQ.minCalcInterval or TimeSpan.MaxValue;local dW=dQ.maxCalcInterval or TimeSpan.MaxValue;if dV<=TimeSpan.Zero or dV>dW then error('EstimateFixedTimestep: Invalid argument: minCalcInterval <= Zero or minCalcInterval > maxCalcInterval',2)end;local dX=dV;local dY=dV<TimeSpan.MaxValue;local dZ=dQ.defaultTimestep or TimeSpan.FromSeconds(0.02)local d_=dZ;if dZ<=TimeSpan.Zero then error('EstimateFixedTimestep: Invalid argument: timestep <= Zero',2)end;local e0=0xFFFF;local e1=e0;local e2=e0;local e3=a.CreateCircularQueue(dQ.queueSize or 64)if e3.MaxSize()<=1 then error('EstimateFixedTimestep: Invalid argument: queueSize <= 1',2)end;local e4=vci.me.Time;local e5=e4;local e6=e4;local e7=a.Random32()local e8=Vector3.__new(bit32.bor(0x100,bit32.band(e7,0x3F)),bit32.bor(0x100,bit32.band(bit32.rshift(e7,8),0x3F)),0)local e9=1;local ea=function(ch,ci)local eb=ch==dV and 120 or 1200;local cr=ch.TotalSeconds;return TimeSpan.FromSeconds(math.min(cr+math.random()*math.min(eb,ci.TotalSeconds-cr),TimeSpan.MaxValue.TotalSeconds-1))end;local ec={function()e3.Clear()dO.SetPosition(e8)dO.SetRotation(Quaternion.identity)dO.SetVelocity(Vector3.zero)dO.SetAngularVelocity(Vector3.zero)e9=e9+1;return dZ end,function()dO.AddForce(Vector3.__new(0.0,0.0,dR*dS))e4=vci.me.Time;e6=e4;e9=e9+1;return dZ end,function()local ed=e6;e6=vci.me.Time;local ee=ed-e4;local ef=ee.TotalSeconds;if ef<=1E-10 then return dZ end;local eg=dO.GetPosition().z-e8.z;local eh=eg/ef/dS;if eh<=1E-10 then return dZ end;e3.Offer(eh)local ei=e3.Size()if ei>=2 and ee>=dT then local ej=0.0;for a6=1,ei do ej=ej+e3.Get(a6)end;local ek=ej/ei;local el=0.0;for a6=1,ei do el=el+(e3.Get(a6)-ek)^2 end;local em=el/ei;if em<e2 then e2=em;d_=TimeSpan.FromSeconds(ek)e5=ed end;if ee>dU then if math.abs((d_-dZ).TotalSeconds)>=0.001 or e2<e1 then dZ=d_;e1=e2 end;e5=ed;if dX<TimeSpan.MaxValue then dX=ea(dX,dW)end;dO.SetPosition(e8)dO.SetRotation(Quaternion.identity)dO.SetVelocity(Vector3.zero)dO.SetAngularVelocity(Vector3.zero)e9=e9+1 end else d_=TimeSpan.FromSeconds(eh)e5=ed end;if e1>=e0 then e1=e2;dZ=d_ end;return dZ end,function()e6=vci.me.Time;return dZ end}local en=#ec;local self={Timestep=function()return dZ end,Precision=function()return e1 end,IsFinished=function()return e9==en end,Update=function()if dY and e9==en and e6-dX>=e5 then e9=1 end;return ec[e9]()end}return self end,AlignSubItemOrigin=function(eo,ep,eq)local er=eo.GetRotation()if not a.QuaternionApproximatelyEquals(ep.GetRotation(),er)then ep.SetRotation(er)end;local es=eo.GetPosition()if not a.VectorApproximatelyEquals(ep.GetPosition(),es)then ep.SetPosition(es)end;if eq then ep.SetVelocity(Vector3.zero)ep.SetAngularVelocity(Vector3.zero)end end,CreateSubItemGlue=function()local et={}local self;self={Contains=function(eu,ev)return a.NillableIfHasValueOrElse(et[eu],function(bP)return a.NillableHasValue(bP[ev])end,function()return false end)end,Add=function(eu,ew,eq)if not eu or not ew then local ex='SubItemGlue.Add: Invalid arguments '..(not eu and', parent = '..tostring(eu)or'')..(not ew and', children = '..tostring(ew)or'')error(ex,2)end;local bP=a.NillableIfHasValueOrElse(et[eu],function(ey)return ey end,function()local ey={}et[eu]=ey;return ey end)if type(ew)=='table'then for ai,aW in pairs(ew)do bP[aW]={velocityReset=not not eq}end else bP[ew]={velocityReset=not not eq}end end,Remove=function(eu,ev)return a.NillableIfHasValueOrElse(et[eu],function(bP)if a.NillableHasValue(bP[ev])then bP[ev]=nil;return true else return false end end,function()return false end)end,RemoveParent=function(eu)if a.NillableHasValue(et[eu])then et[eu]=nil;return true else return false end end,RemoveAll=function()et={}return true end,Each=function(bh,ez)return a.NillableIfHasValueOrElse(ez,function(eu)return a.NillableIfHasValue(et[eu],function(bP)for ev,dP in pairs(bP)do if bh(ev,eu,self)==false then return false end end end)end,function()for eu,bP in pairs(et)do if self.Each(bh,eu)==false then return false end end end)end,Update=function(eA)for eu,bP in pairs(et)do local eB=eu.GetPosition()local eC=eu.GetRotation()for ev,dP in pairs(bP)do if eA or ev.IsMine then if not a.QuaternionApproximatelyEquals(ev.GetRotation(),eC)then ev.SetRotation(eC)end;if not a.VectorApproximatelyEquals(ev.GetPosition(),eB)then ev.SetPosition(eB)end;if dP.velocityReset then ev.SetVelocity(Vector3.zero)ev.SetAngularVelocity(Vector3.zero)end end end end end}return self end,CreateUpdateRoutine=function(eD,eE,eF,eG)return coroutine.wrap(function()local eH=eG or TimeSpan.FromSeconds(60)local eI=vci.me.UnscaledTime;local eJ=eI;local cW=vci.me.Time;local eK=true;while a.InstanceID()==''do local eL=vci.me.UnscaledTime;if eL-eH>eI then local eM='TIMEOUT: Could not receive Instance ID.'a.LogError(eM)if eF then eF(eM)end;return-1 end;eJ=eL;cW=vci.me.Time;eK=false;coroutine.yield(100)end;if eK then eJ=vci.me.UnscaledTime;cW=vci.me.Time;coroutine.yield(100)end;if eE then eE()end;while true do local cZ=vci.me.Time;local eN=cZ-cW;local eL=vci.me.UnscaledTime;local eO=eL-eJ;eD(eN,eO)cW=cZ;eJ=eL;coroutine.yield(100)end end)end,
CreateSlideSwitch=function(eP)local eQ=a.NillableValue(eP.colliderItem)local eR=a.NillableValue(eP.baseItem)local eS=a.NillableValue(eP.knobItem)local eT=a.NillableValueOrDefault(eP.minValue,0)local eU=a.NillableValueOrDefault(eP.maxValue,10)if eT>=eU then error('SlideSwitch: Invalid argument: minValue >= maxValue',2)end;local eV=(eT+eU)*0.5;local eW=function(aW)local eX,eY=a.PingPong(aW-eT,eU-eT)return eX+eT,eY end;local a9=eW(a.NillableValueOrDefault(eP.value,0))local eZ=a.NillableIfHasValueOrElse(eP.tickFrequency,function(e_)if e_<=0 then error('SlideSwitch: Invalid argument: tickFrequency <= 0',3)end;return math.min(e_,eU-eT)end,function()return(eU-eT)/10.0 end)local f0=a.NillableIfHasValueOrElse(eP.tickVector,function(ct)return Vector3.__new(ct.x,ct.y,ct.z)end,function()return Vector3.__new(0.01,0.0,0.0)end)local f1=f0.magnitude;if f1<Vector3.kEpsilon then error('SlideSwitch: Invalid argument: tickVector is too small',2)end;local f2=a.NillableValueOrDefault(eP.snapToTick,true)local f3=eP.valueTextName;local f4=a.NillableValueOrDefault(eP.valueToText,tostring)local f5=TimeSpan.FromMilliseconds(1000)local f6=TimeSpan.FromMilliseconds(50)local f7,f8;local dL={}local self;local f9=false;local fa=0;local fb=false;local fc=TimeSpan.Zero;local fd=TimeSpan.Zero;local fe=function(ff,fg)if fg or ff~=a9 then local dM=a9;a9=ff;for dN,an in pairs(dL)do dN(self,a9,dM)end end;eS.SetLocalPosition((ff-eV)/eZ*f0)if f3 then vci.assets.SetText(f3,f4(ff,self))end end;local fh=function()local fi=f7()local fj,fk=eW(fi)local fl=fi+eZ;local fm,fn=eW(fl)assert(fm)local ff;if fk==fn or fj==eU or fj==eT then ff=fl else ff=fk>=0 and eU or eT end;fd=vci.me.UnscaledTime;if ff==eU or ff==eT then fc=fd end;f8(ff)end;a.NillableIfHasValueOrElse(eP.lsp,function(fo)if not a.NillableHasValue(eP.propertyName)then error('SlideSwitch: Invalid argument: propertyName is nil',3)end;local fp=a.NillableValue(eP.propertyName)f7=function()return fo.GetProperty(fp,a9)end;f8=function(aW)fo.SetProperty(fp,aW)end;fo.AddListener(function(bQ,ai,fq,fr)if ai==fp then fe(eW(fq),true)end end)end,function()local fq=a9;f7=function()return fq end;f8=function(aW)fq=aW;fe(eW(aW),true)end end)self={GetColliderItem=function()return eQ end,GetBaseItem=function()return eR end,GetKnobItem=function()return eS end,GetMinValue=function()return eT end,GetMaxValue=function()return eU end,GetValue=function()return a9 end,GetScaleValue=function(fs,ft)assert(fs<=ft)return fs+(ft-fs)*(a9-eT)/(eU-eT)end,SetValue=function(aW)f8(eW(aW))end,GetTickFrequency=function()return eZ end,IsSnapToTick=function()return f2 end,AddListener=function(dN)dL[dN]=dN end,RemoveListener=function(dN)dL[dN]=nil end,DoUse=function()if not f9 then fb=true;fc=vci.me.UnscaledTime;fh()end end,DoUnuse=function()fb=false end,DoGrab=function()if not fb then f9=true;fa=(a9-eV)/eZ end end,DoUngrab=function()f9=false end,Update=function()if f9 then local fu=eQ.GetPosition()-eR.GetPosition()local fv=eS.GetRotation()*f0;local fw=Vector3.Project(fu,fv)local fx=(Vector3.Dot(fv,fw)>=0 and 1 or-1)*fw.magnitude/f1+fa;local fy=(f2 and a.Round(fx)or fx)*eZ+eV;local ff=a.Clamp(fy,eT,eU)if ff~=a9 then f8(ff)end elseif fb then local fz=vci.me.UnscaledTime;if fz>=fc+f5 and fz>=fd+f6 then fh()end elseif eQ.IsMine then a.AlignSubItemOrigin(eR,eQ)end end}fe(eW(f7()),false)return self end,CreateSubItemConnector=function()local fA=function(fB,ep,fC)fB.item=ep;fB.position=ep.GetPosition()fB.rotation=ep.GetRotation()fB.initialPosition=fB.position;fB.initialRotation=fB.rotation;fB.propagation=not not fC;return fB end;local fD=function(fE)for ep,fB in pairs(fE)do fA(fB,ep,fB.propagation)end end;local fF=function(q,cH,fB,fG,fH)local fu=q-fB.initialPosition;local fI=cH*Quaternion.Inverse(fB.initialRotation)fB.position=q;fB.rotation=cH;for ep,fJ in pairs(fG)do if ep~=fB.item and(not fH or fH(fJ))then fJ.position,fJ.rotation=a.RotateAround(fJ.initialPosition+fu,fJ.initialRotation,q,fI)ep.SetPosition(fJ.position)ep.SetRotation(fJ.rotation)end end end;local fK={}local fL=true;local fM=false;local self;self={IsEnabled=function()return fL end,SetEnabled=function(c6)fL=c6;if c6 then fD(fK)fM=false end end,Contains=function(fN)return a.NillableHasValue(fK[fN])end,Add=function(fO,fP)if not fO then error('SubItemConnector.Add: Invalid argument: subItems = '..tostring(fO),2)end;local fQ=type(fO)=='table'and fO or{fO}fD(fK)fM=false;for aw,ep in pairs(fQ)do fK[ep]=fA({},ep,not fP)end end,Remove=function(fN)local L=a.NillableHasValue(fK[fN])fK[fN]=nil;return L end,RemoveAll=function()fK={}return true end,Each=function(bh)for ep,fB in pairs(fK)do if bh(ep,self)==false then return false end end end,GetItems=function()local fQ={}for ep,fB in pairs(fK)do table.insert(fQ,ep)end;return fQ end,Update=function()if not fL then return end;local fR=false;for ep,fB in pairs(fK)do local bL=ep.GetPosition()local fS=ep.GetRotation()if not a.VectorApproximatelyEquals(bL,fB.position)or not a.QuaternionApproximatelyEquals(fS,fB.rotation)then if fB.propagation then if ep.IsMine then fF(bL,fS,fK[ep],fK,function(fJ)if fJ.item.IsMine then return true else fM=true;return false end end)fR=true;break else fM=true end else fM=true end end end;if not fR and fM then fD(fK)fM=false end end}return self end,UnixTime=function(c4)return a.PosixTime(c4)end,GetSubItemTransform=function(fN)local q=fN.GetPosition()local cH=fN.GetRotation()local fT=fN.GetLocalScale()return{positionX=q.x,positionY=q.y,positionZ=q.z,rotationX=cH.x,rotationY=cH.y,rotationZ=cH.z,rotationW=cH.w,scaleX=fT.x,scaleY=fT.y,scaleZ=fT.z}end}a.SetConstEach(a,{LogLevelOff=0,LogLevelFatal=100,LogLevelError=200,LogLevelWarn=300,LogLevelInfo=400,LogLevelDebug=500,LogLevelTrace=600,LogLevelAll=0x7FFFFFFF,ColorHueSamples=10,ColorSaturationSamples=4,ColorBrightnessSamples=5,EscapeSequenceTag='#__CYTANB',SolidusTag='#__CYTANB_SOLIDUS',NegativeNumberTag='#__CYTANB_NEGATIVE_NUMBER',ArrayNumberTag='#__CYTANB_ARRAY_NUMBER',InstanceIDParameterName='__CYTANB_INSTANCE_ID',MessageValueParameterName='__CYTANB_MESSAGE_VALUE',MessageSenderOverride='__CYTANB_MESSAGE_SENDER_OVERRIDE',MessageOriginalSender='__CYTANB_MESSAGE_ORIGINAL_SENDER',TypeParameterName='__CYTANB_TYPE',ColorTypeName='Color',Vector2TypeName='Vector2',Vector3TypeName='Vector3',Vector4TypeName='Vector4',QuaternionTypeName='Quaternion',DedicatedCommentMessageName='cytanb.comment.a2a6a035-6b8d-4e06-b4f9-07e6209b0639',DedicatedNotificationMessageName='cytanb.notification.698ba55f-2b69-47f2-a68d-bc303994cff3',InstanceIDStatePatchingMessageName='cytanb.instance_id_state_patching.08504824-2041-42a2-9b2a-97448b4418b0',LOCAL_SHARED_PROPERTY_EXPIRED_KEY='__CYTANB_LOCAL_SHARED_PROPERTY_EXPIRED'})a.SetConstEach(a,{ColorMapSize=a.ColorHueSamples*a.ColorSaturationSamples*a.ColorBrightnessSamples,FatalLogLevel=a.LogLevelFatal,ErrorLogLevel=a.LogLevelError,WarnLogLevel=a.LogLevelWarn,InfoLogLevel=a.LogLevelInfo,DebugLogLevel=a.LogLevelDebug,TraceLogLevel=a.LogLevelTrace})c=a.MakeSearchPattern({'\t','\n','\v','\f','\r',' '},1,-1)d=a.MakeSearchPattern({'sprite=','SPRITE='})e=a.MakeSearchPattern({'0','1','2','3','4','5','6','7','8','9'},1,9)f,g=(function()local fU={'A','B','C','D','E','F','a','b','c','d','e','f','0','1','2','3','4','5','6','7','8','9'}return a.MakeSearchPattern(fU,4,4),a.MakeSearchPattern(fU,8,8)end)()h=a.MakeSearchPattern({'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','_','-','.','(',')','!','~','*','\'','%'},1,-1)i={{tag=a.NegativeNumberTag,search=a.NegativeNumberTag,replacement=''},{tag=a.ArrayNumberTag,search=a.ArrayNumberTag,replacement=''},{tag=a.SolidusTag,search=a.SolidusTag,replacement='/'},{tag=a.EscapeSequenceTag,search=a.EscapeSequenceTag..a.EscapeSequenceTag,replacement=a.EscapeSequenceTag}}j={[a.ColorTypeName]={compositionFieldNames=a.ListToMap({'r','g','b','a'}),compositionFieldLength=4,toTableFunc=a.ColorToTable,fromTableFunc=a.ColorFromTable},[a.Vector2TypeName]={compositionFieldNames=a.ListToMap({'x','y'}),compositionFieldLength=2,toTableFunc=a.Vector2ToTable,fromTableFunc=a.Vector2FromTable},[a.Vector3TypeName]={compositionFieldNames=a.ListToMap({'x','y','z'}),compositionFieldLength=3,toTableFunc=a.Vector3ToTable,fromTableFunc=a.Vector3FromTable},[a.Vector4TypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.Vector4ToTable,fromTableFunc=a.Vector4FromTable},[a.QuaternionTypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.QuaternionToTable,fromTableFunc=a.QuaternionFromTable}}k=a.ListToMap({a.NegativeNumberTag,a.ArrayNumberTag})l=a.LogLevelInfo;n={[a.LogLevelFatal]='FATAL',[a.LogLevelError]='ERROR',[a.LogLevelWarn]='WARN',[a.LogLevelInfo]='INFO',[a.LogLevelDebug]='DEBUG',[a.LogLevelTrace]='TRACE'}o=(function()local dE='eff3a188-bfc7-4b0e-93cb-90fd1adc508c'local dK=_G[dE]if not dK then dK={}_G[dE]=dK end;local fV=dK.clientID;if type(fV)~='string'then fV=tostring(a.RandomUUID())dK.clientID=fV end;return fV end)()return a end;if __CYTANB_EXPORT_MODULE then return setmetatable({},{__call=function(self,fW)return b(fW)end})else return b(_ENV)end end)()if __CYTANB_EXPORT_MODULE then return cytanb end
