-- SPDX-License-Identifier: MIT
-- Copyright (c) 2019 oO (https://github.com/oocytanb)
---@type cytanb @See `cytanb_annotations.lua`
local cytanb=(function()local b=function(_ENV)if not require or not vci then error('Invalid _ENV: Enable `__CYTANB_EXPORT_MODULE = true` line and pass valid _ENV of VCI-main if use cytanb.lua as module.',3)end;local c='__CYTANB_INSTANCE_ID'local d;local e;local f;local g;local h;local i;local j;local k;local l;local m;local n=false;local o;local p;local q;local a;local r=function(s,t)local u=s+t-1;return s,u,u+1 end;local v=function(s,t)local u=s-t+1;return u,s,u-1 end;local w=function(x,y,z,s,A)local B=z.searchMap;for C,t in pairs(z.lengthList)do if t<=0 then error('SearchPattern: Invalid parameter: searchLen <= 0')else local D,E,u=A(s,t)if D>=1 and E<=y then local F=string.sub(x,D,E)if B[F]then return true,t,u end end end end;return false,-1,-1 end;local G=function(x,z,s,A)if x==nil or z==nil then return false,-1 end;if z.hasEmptySearch then return true,0 end;local y=string.len(x)local H=z.repeatMin;local I=z.repeatMax;local J=I<0;local K=s;local L=0;local M=0;while J or M<I do local N,O,u=w(x,y,z,K,A)if N then if O<=0 then error('SearchPattern: Invalid parameter')end;K=u;L=L+O;M=M+1 else break end end;if M>=H then return true,L else return false,-1 end end;local P=function(x,Q,s,R,A,S)if x==nil or Q==nil then return false,-1 end;local t=string.len(Q)if R then local N=S(x,Q)return N,N and t or-1 else if t==0 then return true,t end;local y=string.len(x)local D,E=A(s,t)if D>=1 and E<=y then local F=string.sub(x,D,E)local N=S(F,Q)return N,N and t or-1 else return false,-1 end end end;local T=function(x,U,V)if U<=V then local W=string.unicode(x,U,U)if W>=0xDC00 or W<=0xDFFF then return true,1,W end end;return false,-1,nil end;local X=function(x,U,V,Y)if U<=V then local Z,_=a.StringStartsWith(x,e,U)if Z then local a0=U+_;if a0<=V then local a1,a2=a.StringStartsWith(x,f,a0)if a1 then local a3=a0+a2;if a3<=V and string.unicode(x,a3,a3)==0x3E then local a4=tonumber(string.sub(x,a0,a0+a2-1))if a4<=Y then return true,a3-U+1,a4 end end end end end end;return false,-1,nil end;local a5=function(a6,a7)for a8=1,4 do local a9=a6[a8]-a7[a8]if a9~=0 then return a9 end end;return 0 end;local aa;aa={__eq=function(a6,a7)return a6[1]==a7[1]and a6[2]==a7[2]and a6[3]==a7[3]and a6[4]==a7[4]end,__lt=function(a6,a7)return a5(a6,a7)<0 end,__le=function(a6,a7)return a5(a6,a7)<=0 end,__tostring=function(ab)local ac=ab[2]or 0;local ad=ab[3]or 0;return string.format('%08x-%04x-%04x-%04x-%04x%08x',bit32.band(ab[1]or 0,0xFFFFFFFF),bit32.band(bit32.rshift(ac,16),0xFFFF),bit32.band(ac,0xFFFF),bit32.band(bit32.rshift(ad,16),0xFFFF),bit32.band(ad,0xFFFF),bit32.band(ab[4]or 0,0xFFFFFFFF))end,__concat=function(a6,a7)local ae=getmetatable(a6)local af=ae==aa or type(ae)=='table'and ae.__concat==aa.__concat;local ag=getmetatable(a7)local ah=ag==aa or type(ag)=='table'and ag.__concat==aa.__concat;if not af and not ah then error('UUID: attempt to concatenate illegal values',2)end;return(af and aa.__tostring(a6)or a6)..(ah and aa.__tostring(a7)or a7)end}local ai='__CYTANB_CONST_VARIABLES'local aj=function(table,ak)local al=getmetatable(table)if al then local am=rawget(al,ai)if am then local an=rawget(am,ak)if type(an)=='function'then return an(table,ak)else return an end end end;return nil end;local ao=function(table,ak,ap)local al=getmetatable(table)if al then local am=rawget(al,ai)if am then if rawget(am,ak)~=nil then error('Cannot assign to read only field "'..ak..'"',2)end end end;rawset(table,ak,ap)end;local aq=function(ar,as)local at=ar[a.TypeParameterName]if a.NillableHasValue(at)and a.NillableValue(at)~=as then return false,false end;return a.NillableIfHasValueOrElse(k[as],function(au)local av=au.compositionFieldNames;local aw=au.compositionFieldLength;local ax=false;for ay,ap in pairs(ar)do if av[ay]then aw=aw-1;if aw<=0 and ax then break end elseif ay~=a.TypeParameterName then ax=true;if aw<=0 then break end end end;return aw<=0,ax end,function()return false,false end)end;local az=function(x)return a.StringReplace(a.StringReplace(x,a.EscapeSequenceTag,a.EscapeSequenceTag..a.EscapeSequenceTag),'/',a.SolidusTag)end;local aA=function(x,aB)local aC=string.len(x)local aD=string.len(a.EscapeSequenceTag)if aD>aC then return x end;local aE=''local a8=1;while a8<aC do local E,aF=string.find(x,a.EscapeSequenceTag,a8,true)if not E then if a8==1 then aE=x else aE=aE..string.sub(x,a8)end;break end;if E>a8 then aE=aE..string.sub(x,a8,E-1)end;local aG=false;for aH,aI in ipairs(j)do local N=a.StringStartsWith(x,aI.search,E)if N then aE=aE..(aB and aB(aI.tag)or aI.replacement)a8=E+string.len(aI.search)aG=true;break end end;if not aG then aE=aE..a.EscapeSequenceTag;a8=aF+1 end end;return aE end;local aJ;aJ=function(aK,aL)if type(aK)~='table'then return aK end;if not aL then aL={}end;if aL[aK]then error('circular reference')end;aL[aK]=true;local aM={}for ay,ap in pairs(aK)do local aN=type(ay)local aO;if aN=='string'then aO=az(ay)elseif aN=='number'then aO=tostring(ay)..a.ArrayNumberTag else aO=ay end;local aP=type(ap)if aP=='string'then aM[aO]=az(ap)elseif aP=='number'and ap<0 then aM[tostring(aO)..a.NegativeNumberTag]=tostring(ap)else aM[aO]=aJ(ap,aL)end end;aL[aK]=nil;return aM end;local aQ;aQ=function(aM,aR)if type(aM)~='table'then return aM end;local aK={}for ay,ap in pairs(aM)do local aO;local aS=false;if type(ay)=='string'then local aT=false;aO=aA(ay,function(aU)if aU==a.NegativeNumberTag then aS=true elseif aU==a.ArrayNumberTag then aT=true end;return nil end)if aT then aO=tonumber(aO)or aO end else aO=ay;aS=false end;if aS and type(ap)=='string'then aK[aO]=tonumber(ap)elseif type(ap)=='string'then aK[aO]=aA(ap,function(aU)return l[aU]end)else aK[aO]=aQ(ap,aR)end end;if not aR then a.NillableIfHasValue(aK[a.TypeParameterName],function(aV)a.NillableIfHasValue(k[aV],function(au)local aW,ax=au.fromTableFunc(aK)if not ax then a.NillableIfHasValue(aW,function(ab)aK=ab end)end end)end)end;return aK end;local aX={['nil']=function(aY)return nil end,['number']=function(aY)return tonumber(aY)end,['string']=function(aY)return tostring(aY)end,['boolean']=function(aY)if aY then return true else return false end end}local aZ=function(aY,a_)local b0=type(aY)if b0==a_ then return aY else local b1=aX[a_]if b1 then return b1(aY)else return nil end end end;local b2=function(b3,b4)if b4 and type(b4)=='table'then local b5={}for ak,aY in pairs(b3)do local b6=b4[ak]local b7;if b6==nil then b7=aY else local b8=aZ(b6,type(aY))if b8==nil then b7=aY else b7=b8 end end;b5[ak]=b7 end;b5[a.MessageOriginalSender]=b3;return b5 else return b3 end end;local b9=function(ba,bb,b4,bc)local bd={type=bc,name='',commentSource=''}local be={[a.MessageValueParameterName]=tostring(bb),[a.MessageSenderOverride]=type(b4)=='table'and a.Extend(bd,b4,true)or bd}a.EmitMessage(ba,be)end;local bf=function(ba,bg,bh)local bi,bj=(function()local b1=function(b3,bk,be)local bb=tostring(be[a.MessageValueParameterName]or'')bh(b3,bg,bb)end;local bi=a.OnMessage(ba,b1)local bj=a.OnMessage(bg,b1)return bi,bj end)()return{Off=function()bi.Off()bj.Off()end}end;a={InstanceID=function()if p==''then p=vci.state.Get(c)or''end;return p end,NillableHasValue=function(bl)return bl~=nil end,NillableValue=function(bl)if bl==nil then error('nillable: value is nil',2)end;return bl end,NillableValueOrDefault=function(bl,bm)if bl==nil then if bm==nil then error('nillable: defaultValue is nil',2)end;return bm else return bl end end,NillableIfHasValue=function(bl,bh)if bl==nil then return nil else return bh(bl)end end,NillableIfHasValueOrElse=function(bl,bh,bn)if bl==nil then return bn()else return bh(bl)end end,MakeSearchPattern=function(bo,bp,bq)local H=bp and math.floor(bp)or 1;if H<0 then error('SearchPattern: Invalid parameter: optRepeatMin < 0')end;local I=bq and math.floor(bq)or H;if I>=0 and I<H then error('SearchPattern: Invalid parameter: repeatMax < repeatMin')end;local br=I==0;local B={}local bs={}local bt={}local bu=0;for bv,bw in pairs(bo)do local t=string.len(bw)if t==0 then br=true else B[bw]=t;if not bs[t]then bs[t]=true;bu=bu+1;bt[bu]=t end end end;table.sort(bt,function(bx,N)return bx>N end)return{hasEmptySearch=br,searchMap=B,lengthList=bt,repeatMin=H,repeatMax=I}end,StringStartsWith=function(x,Q,by)local K=by and math.max(1,math.floor(by))or 1;if type(Q)=='table'then return G(x,Q,K,r)else return P(x,Q,K,K==1,r,string.startsWith)end end,StringEndsWith=function(x,Q,bz)if x==nil then return false,-1 end;local y=string.len(x)local K=bz and math.min(y,math.floor(bz))or y;if type(Q)=='table'then return G(x,Q,K,v)else return P(x,Q,K,K==y,v,string.endsWith)end end,
StringTrimStart=function(x,bA)if x==nil or x==''then return x end;local N,O=a.StringStartsWith(x,bA or d)if N and O>=1 then return string.sub(x,O+1)else return x end end,StringTrimEnd=function(x,bA)if x==nil or x==''then return x end;local N,O=a.StringEndsWith(x,bA or d)if N and O>=1 then return string.sub(x,1,string.len(x)-O)else return x end end,StringTrim=function(x,bA)return a.StringTrimEnd(a.StringTrimStart(x,bA),bA)end,StringReplace=function(x,bB,bC)local bD;local aC=string.len(x)if bB==''then bD=bC;for a8=1,aC do bD=bD..string.sub(x,a8,a8)..bC end else bD=''local a8=1;while true do local D,E=string.find(x,bB,a8,true)if D then bD=bD..string.sub(x,a8,D-1)..bC;a8=E+1;if a8>aC then break end else bD=a8==1 and x or bD..string.sub(x,a8)break end end end;return bD end,StringEachCode=function(x,bh,bE,a8,bF,bG,bH,bI)local aC=string.len(x)if aC==0 then return 0,0,0 end;local bJ=a8 and math.floor(a8)or 1;local V=bF and math.floor(bF)or aC;local Y=math.min(bI or 3182,0x1FFFFF)if bJ<=0 or V>aC or bJ>V then error('StringEachCode: invalid range')end;local bK=0;local bL=bJ;local bM=bL;while bL<=V do local D=bL;local W=string.unicode(x,bL,bL)if W>=0xD800 and W<=0xDBFF then local N,O=T(x,bL+1,V)if N then bL=bL+O end elseif bG and W==0x3C then local N,O,a4=X(x,bL+1,V,Y)if N and(not bH or bH(a4))then bL=bL+O end end;bK=bK+1;bM=bL;if bh and bh(string.sub(x,D,bL),bK,bE,D,bL)==false then break end;bL=bL+1 end;return bK,bJ,bM end,SetConst=function(bB,ba,ab)if type(bB)~='table'then error('Cannot set const to non-table target',2)end;local bN=getmetatable(bB)local al=bN or{}local bO=rawget(al,ai)if rawget(bB,ba)~=nil then error('Non-const field "'..ba..'" already exists',2)end;if not bO then bO={}rawset(al,ai,bO)al.__index=aj;al.__newindex=ao end;rawset(bO,ba,ab)if not bN then setmetatable(bB,al)end;return bB end,SetConstEach=function(bB,bP)for ay,ap in pairs(bP)do a.SetConst(bB,ay,ap)end;return bB end,Extend=function(bB,bQ,bR,bS,aL)if bB==bQ or type(bB)~='table'or type(bQ)~='table'then return bB end;if bR then if not aL then aL={}end;if aL[bQ]then error('circular reference')end;aL[bQ]=true end;for ay,ap in pairs(bQ)do if bR and type(ap)=='table'then local bT=bB[ay]bB[ay]=a.Extend(type(bT)=='table'and bT or{},ap,bR,bS,aL)else bB[ay]=ap end end;if not bS then local bU=getmetatable(bQ)if type(bU)=='table'then if bR then local bV=getmetatable(bB)setmetatable(bB,a.Extend(type(bV)=='table'and bV or{},bU,true))else setmetatable(bB,bU)end end end;if bR then aL[bQ]=nil end;return bB end,Vars=function(ap,bW,bX,aL)local bY;if bW then bY=bW~='__NOLF'else bW='  'bY=true end;if not bX then bX=''end;if not aL then aL={}end;local bZ=type(ap)if bZ=='table'then aL[ap]=aL[ap]and aL[ap]+1 or 1;local b_=bY and bX..bW or''local x='('..tostring(ap)..') {'local c0=true;for ak,aY in pairs(ap)do if c0 then c0=false else x=x..(bY and','or', ')end;if bY then x=x..'\n'..b_ end;if type(aY)=='table'and aL[aY]and aL[aY]>0 then x=x..ak..' = ('..tostring(aY)..')'else x=x..ak..' = '..a.Vars(aY,bW,b_,aL)end end;if not c0 and bY then x=x..'\n'..bX end;x=x..'}'aL[ap]=aL[ap]-1;if aL[ap]<=0 then aL[ap]=nil end;return x elseif bZ=='function'or bZ=='thread'or bZ=='userdata'then return'('..bZ..')'elseif bZ=='string'then return'('..bZ..') '..string.format('%q',ap)else return'('..bZ..') '..tostring(ap)end end,GetLogLevel=function()return m end,SetLogLevel=function(c1)m=c1 end,IsOutputLogLevelEnabled=function()return n end,SetOutputLogLevelEnabled=function(c2)n=not not c2 end,Log=function(c1,...)if c1<=m then local c3=n and(o[c1]or'LOG LEVEL '..tostring(c1))..' | 'or''local c4=table.pack(...)if c4.n==1 then local ap=c4[1]if ap~=nil then local x=type(ap)=='table'and a.Vars(ap)or tostring(ap)print(n and c3 ..x or x)else print(c3)end else local x=c3;for a8=1,c4.n do local ap=c4[a8]if ap~=nil then x=x..(type(ap)=='table'and a.Vars(ap)or tostring(ap))end end;print(x)end end end,LogFatal=function(...)a.Log(a.LogLevelFatal,...)end,LogError=function(...)a.Log(a.LogLevelError,...)end,LogWarn=function(...)a.Log(a.LogLevelWarn,...)end,LogInfo=function(...)a.Log(a.LogLevelInfo,...)end,LogDebug=function(...)a.Log(a.LogLevelDebug,...)end,LogTrace=function(...)a.Log(a.LogLevelTrace,...)end,FatalLog=function(...)a.LogFatal(...)end,ErrorLog=function(...)a.LogError(...)end,WarnLog=function(...)a.LogWarn(...)end,InfoLog=function(...)a.LogInfo(...)end,DebugLog=function(...)a.LogDebug(...)end,TraceLog=function(...)a.LogTrace(...)end,ListToMap=function(c5,c6)local c7={}if c6==nil then for ay,ap in pairs(c5)do c7[ap]=ap end elseif type(c6)=='function'then for ay,ap in pairs(c5)do local c8,c9=c6(ap)c7[c8]=c9 end else for ay,ap in pairs(c5)do c7[ap]=c6 end end;return c7 end,Round=function(ca,cb)if cb then local cc=10^cb;return math.floor(ca*cc+0.5)/cc else return math.floor(ca+0.5)end end,Clamp=function(ab,cd,ce)return math.max(cd,math.min(ab,ce))end,Lerp=function(bx,N,bZ)if bZ<=0.0 then return bx elseif bZ>=1.0 then return N else return bx+(N-bx)*bZ end end,LerpUnclamped=function(bx,N,bZ)if bZ==0.0 then return bx elseif bZ==1.0 then return N else return bx+(N-bx)*bZ end end,PingPong=function(bZ,cf)if cf==0 then return 0,1 end;local cg=math.floor(bZ/cf)local ch=bZ-cg*cf;if cg<0 then if(cg+1)%2==0 then return cf-ch,-1 else return ch,1 end else if cg%2==0 then return ch,1 else return cf-ch,-1 end end end,VectorApproximatelyEquals=function(ci,cj)return(ci-cj).sqrMagnitude<1E-10 end,QuaternionApproximatelyEquals=function(ci,cj)local ck=Quaternion.Dot(ci,cj)return ck<1.0+1E-06 and ck>1.0-1E-06 end,QuaternionToAngleAxis=function(cl)local cg=cl.normalized;local cm=math.acos(cg.w)local cn=math.sin(cm)local co=math.deg(cm*2.0)local cp;if math.abs(cn)<=Quaternion.kEpsilon then cp=Vector3.right else local D=1.0/cn;cp=Vector3.__new(cg.x*D,cg.y*D,cg.z*D)end;return co,cp end,QuaternionTwist=function(cl,cq)if cq.sqrMagnitude<Vector3.kEpsilonNormalSqrt then return Quaternion.identity end;local cr=Vector3.__new(cl.x,cl.y,cl.z)if cr.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local cs=Vector3.Project(cr,cq)if cs.sqrMagnitude>=Vector3.kEpsilonNormalSqrt then local ct=Quaternion.__new(cs.x,cs.y,cs.z,cl.w)ct.Normalize()return ct else return Quaternion.AngleAxis(0,cq)end else local cu=a.QuaternionToAngleAxis(cl)return Quaternion.AngleAxis(cu,cq)end end,ApplyQuaternionToVector3=function(cl,cv)local cw=cl.w*cv.x+cl.y*cv.z-cl.z*cv.y;local cx=cl.w*cv.y-cl.x*cv.z+cl.z*cv.x;local cy=cl.w*cv.z+cl.x*cv.y-cl.y*cv.x;local cz=-cl.x*cv.x-cl.y*cv.y-cl.z*cv.z;return Vector3.__new(cz*-cl.x+cw*cl.w+cx*-cl.z-cy*-cl.y,cz*-cl.y-cw*-cl.z+cx*cl.w+cy*-cl.x,cz*-cl.z+cw*-cl.y-cx*-cl.x+cy*cl.w)end,RotateAround=function(cA,cB,cC,cD)return cC+cD*(cA-cC),cD*cB end,Random32=function()return bit32.band(math.random(-2147483648,2147483646),0xFFFFFFFF)end,RandomUUID=function()return a.UUIDFromNumbers(a.Random32(),bit32.bor(0x4000,bit32.band(a.Random32(),0xFFFF0FFF)),bit32.bor(0x80000000,bit32.band(a.Random32(),0x3FFFFFFF)),a.Random32())end,UUIDString=function(cE)return aa.__tostring(cE)end,UUIDFromNumbers=function(...)local cF=...local bZ=type(cF)local cG,cH,cI,cJ;if bZ=='table'then cG=cF[1]cH=cF[2]cI=cF[3]cJ=cF[4]else cG,cH,cI,cJ=...end;local cE={bit32.band(cG or 0,0xFFFFFFFF),bit32.band(cH or 0,0xFFFFFFFF),bit32.band(cI or 0,0xFFFFFFFF),bit32.band(cJ or 0,0xFFFFFFFF)}setmetatable(cE,aa)return cE end,
UUIDFromString=function(x)local aC=string.len(x)if aC==32 then local cE=a.UUIDFromNumbers(0,0,0,0)for a8=1,4 do local D=1+(a8-1)*8;if not a.StringStartsWith(x,h,D)then return nil end;cE[a8]=tonumber(string.sub(x,D,D+7),16)end;return cE elseif aC==36 then if not a.StringStartsWith(x,h,1)then return nil end;local cG=tonumber(string.sub(x,1,8),16)if not a.StringStartsWith(x,'-',9)or not a.StringStartsWith(x,g,10)or not a.StringStartsWith(x,'-',14)or not a.StringStartsWith(x,g,15)then return nil end;local cH=tonumber(string.sub(x,10,13)..string.sub(x,15,18),16)if not a.StringStartsWith(x,'-',19)or not a.StringStartsWith(x,g,20)or not a.StringStartsWith(x,'-',24)or not a.StringStartsWith(x,g,25)then return nil end;local cI=tonumber(string.sub(x,20,23)..string.sub(x,25,28),16)if not a.StringStartsWith(x,h,29)then return nil end;local cJ=tonumber(string.sub(x,29),16)return a.UUIDFromNumbers(cG,cH,cI,cJ)else return nil end end,ParseUUID=function(x)return a.UUIDFromString(x)end,CreateCircularQueue=function(cK)if type(cK)~='number'or cK<1 then error('CreateCircularQueue: Invalid argument: capacity = '..tostring(cK),2)end;local self;local cL=math.floor(cK)local aE={}local cM=0;local cN=0;local cO=0;self={Size=function()return cO end,Clear=function()cM=0;cN=0;cO=0 end,IsEmpty=function()return cO==0 end,Offer=function(cP)aE[cM+1]=cP;cM=(cM+1)%cL;if cO<cL then cO=cO+1 else cN=(cN+1)%cL end;return true end,OfferFirst=function(cP)cN=(cL+cN-1)%cL;aE[cN+1]=cP;if cO<cL then cO=cO+1 else cM=(cL+cM-1)%cL end;return true end,Poll=function()if cO==0 then return nil else local cP=aE[cN+1]cN=(cN+1)%cL;cO=cO-1;return cP end end,PollLast=function()if cO==0 then return nil else cM=(cL+cM-1)%cL;local cP=aE[cM+1]cO=cO-1;return cP end end,Peek=function()if cO==0 then return nil else return aE[cN+1]end end,PeekLast=function()if cO==0 then return nil else return aE[(cL+cM-1)%cL+1]end end,Get=function(cQ)if cQ<1 or cQ>cO then a.LogError('CreateCircularQueue.Get: index is outside the range: '..cQ)return nil end;return aE[(cN+cQ-1)%cL+1]end,IsFull=function()return cO>=cL end,MaxSize=function()return cL end}return self end,DetectClicks=function(cR,cS,cT)local bK=cR or 0;local cU=cT or TimeSpan.FromMilliseconds(500)local cV=vci.me.Time;local cW=cS and cV>cS+cU and 1 or bK+1;return cW,cV end,ColorRGBToHSV=function(cX)local ch=math.max(0.0,math.min(cX.r,1.0))local cY=math.max(0.0,math.min(cX.g,1.0))local N=math.max(0.0,math.min(cX.b,1.0))local ce=math.max(ch,cY,N)local cd=math.min(ch,cY,N)local cZ=ce-cd;local an;if cZ==0.0 then an=0.0 elseif ce==ch then an=(cY-N)/cZ/6.0 elseif ce==cY then an=(2.0+(N-ch)/cZ)/6.0 else an=(4.0+(ch-cY)/cZ)/6.0 end;if an<0.0 then an=an+1.0 end;local c_=ce==0.0 and cZ or cZ/ce;local ap=ce;return an,c_,ap end,ColorFromARGB32=function(d0)local d1=type(d0)=='number'and d0 or 0xFF000000;return Color.__new(bit32.band(bit32.rshift(d1,16),0xFF)/0xFF,bit32.band(bit32.rshift(d1,8),0xFF)/0xFF,bit32.band(d1,0xFF)/0xFF,bit32.band(bit32.rshift(d1,24),0xFF)/0xFF)end,ColorToARGB32=function(cX)return bit32.bor(bit32.lshift(bit32.band(a.Round(0xFF*cX.a),0xFF),24),bit32.lshift(bit32.band(a.Round(0xFF*cX.r),0xFF),16),bit32.lshift(bit32.band(a.Round(0xFF*cX.g),0xFF),8),bit32.band(a.Round(0xFF*cX.b),0xFF))end,ColorFromIndex=function(d2,d3,d4,d5,d6)local d7=math.max(math.floor(d3 or a.ColorHueSamples),1)local d8=d6 and d7 or d7-1;local d9=math.max(math.floor(d4 or a.ColorSaturationSamples),1)local da=math.max(math.floor(d5 or a.ColorBrightnessSamples),1)local cQ=a.Clamp(math.floor(d2 or 0),0,d7*d9*da-1)local db=cQ%d7;local dc=math.floor(cQ/d7)local D=dc%d9;local dd=math.floor(dc/d9)if d6 or db~=d8 then local an=db/d8;local c_=(d9-D)/d9;local ap=(da-dd)/da;return Color.HSVToRGB(an,c_,ap)else local ap=(da-dd)/da*D/(d9-1)return Color.HSVToRGB(0.0,0.0,ap)end end,ColorToIndex=function(cX,d3,d4,d5,d6)local d7=math.max(math.floor(d3 or a.ColorHueSamples),1)local d8=d6 and d7 or d7-1;local d9=math.max(math.floor(d4 or a.ColorSaturationSamples),1)local da=math.max(math.floor(d5 or a.ColorBrightnessSamples),1)local an,c_,ap=a.ColorRGBToHSV(cX)local D=a.Round(d9*(1.0-c_))if d6 or D<d9 then local de=a.Round(d8*an)if de>=d8 then de=0 end;if D>=d9 then D=d9-1 end;local dd=math.min(da-1,a.Round(da*(1.0-ap)))return de+d7*(D+d9*dd)else local df=a.Round((d9-1)*ap)if df==0 then local dg=a.Round(da*(1.0-ap))if dg>=da then return d7-1 else return d7*(1+a.Round(ap*(d9-1)/(da-dg)*da)+d9*dg)-1 end else return d7*(1+df+d9*a.Round(da*(1.0-ap*(d9-1)/df)))-1 end end end,ColorToTable=function(cX)return{[a.TypeParameterName]=a.ColorTypeName,r=cX.r,g=cX.g,b=cX.b,a=cX.a}end,ColorFromTable=function(ar)local N,ax=aq(ar,a.ColorTypeName)return N and Color.__new(ar.r,ar.g,ar.b,ar.a)or nil,ax end,Vector2ToTable=function(ab)return{[a.TypeParameterName]=a.Vector2TypeName,x=ab.x,y=ab.y}end,Vector2FromTable=function(ar)local N,ax=aq(ar,a.Vector2TypeName)return N and Vector2.__new(ar.x,ar.y)or nil,ax end,Vector3ToTable=function(ab)return{[a.TypeParameterName]=a.Vector3TypeName,x=ab.x,y=ab.y,z=ab.z}end,Vector3FromTable=function(ar)local N,ax=aq(ar,a.Vector3TypeName)return N and Vector3.__new(ar.x,ar.y,ar.z)or nil,ax end,Vector4ToTable=function(ab)return{[a.TypeParameterName]=a.Vector4TypeName,x=ab.x,y=ab.y,z=ab.z,w=ab.w}end,Vector4FromTable=function(ar)local N,ax=aq(ar,a.Vector4TypeName)return N and Vector4.__new(ar.x,ar.y,ar.z,ar.w)or nil,ax end,QuaternionToTable=function(ab)return{[a.TypeParameterName]=a.QuaternionTypeName,x=ab.x,y=ab.y,z=ab.z,w=ab.w}end,QuaternionFromTable=function(ar)local N,ax=aq(ar,a.QuaternionTypeName)return N and Quaternion.__new(ar.x,ar.y,ar.z,ar.w)or nil,ax end,TableToSerializable=function(aK)return aJ(aK)end,TableFromSerializable=function(aM,aR)return aQ(aM,aR)end,TableToSerialiable=function(aK)return aJ(aK)end,TableFromSerialiable=function(aM,aR)return aQ(aM,aR)end,EmitMessage=function(ba,be)local aM=a.NillableIfHasValueOrElse(be,function(aK)if type(aK)~='table'then error('EmitMessage: Invalid argument: table expected',3)end;return a.TableToSerializable(aK)end,function()return{}end)aM[a.InstanceIDParameterName]=a.InstanceID()vci.message.Emit(ba,json.serialize(aM))end,OnMessage=function(ba,bh)local b1=function(b3,bk,bb)if type(bb)=='string'and string.startsWith(bb,'{')then local dh,aM=pcall(json.parse,bb)if dh and type(aM)=='table'and aM[a.InstanceIDParameterName]then local di=a.TableFromSerializable(aM)bh(b2(b3,di[a.MessageSenderOverride]),bk,di)return end end;bh(b3,bk,{[a.MessageValueParameterName]=bb})end;vci.message.On(ba,b1)return{Off=function()if b1 then b1=nil end end}end,OnInstanceMessage=function(ba,bh)local b1=function(b3,bk,be)local dj=a.InstanceID()if dj~=''and dj==be[a.InstanceIDParameterName]then bh(b3,bk,be)end end;return a.OnMessage(ba,b1)end,EmitCommentMessage=function(bb,b4)b9(a.DedicatedCommentMessageName,bb,b4,'comment')end,OnCommentMessage=function(bh)return bf(a.DedicatedCommentMessageName,'comment',bh)end,EmitNotificationMessage=function(bb,b4)b9(a.DedicatedNotificationMessageName,bb,b4,'notification')end,OnNotificationMessage=function(bh)return bf(a.DedicatedNotificationMessageName,'notification',bh)end,GetEffekseerEmitterMap=function(ba)local dk=vci.assets.GetEffekseerEmitters(ba)if not dk then return nil end;local c7={}for a8,dl in pairs(dk)do c7[dl.EffectName]=dl end;return c7 end,ClientID=function()return q end,ParseTagString=function(x)local bL=string.find(x,'#',1,true)if not bL then return{},x end;local dm={}local dn=string.sub(x,1,bL-1)bL=bL+1;local aC=string.len(x)while bL<=aC do local dp,dq=a.StringStartsWith(x,i,bL)if dp then local dr=bL+dq;local ds=string.sub(x,bL,dr-1)local dt=ds;bL=dr;if bL<=aC and a.StringStartsWith(x,'=',bL)then bL=bL+1;local du,dv=a.StringStartsWith(x,i,bL)if du then local dw=bL+dv;dt=string.sub(x,bL,dw-1)bL=dw else dt=''end end;dm[ds]=dt end;bL=string.find(x,'#',bL,true)if not bL then break end;bL=bL+1 end;return dm,dn end,CalculateSIPrefix=(function()local dx=9;local dy={'y','z','a','f','p','n','u','m','','k','M','G','T','P','E','Z','Y'}local dz=#dy;return function(ca)local dA=ca==0 and 0 or a.Clamp(math.floor(math.log(math.abs(ca),1000)),1-dx,dz-dx)return dA==0 and ca or ca/1000^dA,dy[dx+dA],dA*3 end end)(),
UnixTime=(function()local dB=os.time({year=1970,month=1,day=2,hour=0,min=0,sec=0,isdst=false})if not dB then error('unexpected')end;local dC=os.date('!*t',dB)local dD=(((dC.day-1)*24+dC.hour)*60+dC.min)*60+dC.sec;return function(dE)local dF=dE and dE or os.time()return os.difftime(dF,dB)+dD end end)(),CreateLocalSharedProperties=function(dG,dH)local dI=TimeSpan.FromSeconds(5)local dJ='33657f0e-7c44-4ee7-acd9-92dd8b8d807a'local dK='__CYTANB_LOCAL_SHARED_PROPERTIES_LISTENER_MAP'if type(dG)~='string'or string.len(dG)<=0 or type(dH)~='string'or string.len(dH)<=0 then error('LocalSharedProperties: Invalid arguments',2)end;local dL=_G[dJ]if not dL then dL={}_G[dJ]=dL end;dL[dH]=vci.me.UnscaledTime;local dM=_G[dG]if not dM then dM={[dK]={}}_G[dG]=dM end;local dN=dM[dK]local self;self={GetLspID=function()return dG end,GetLoadID=function()return dH end,GetProperty=function(ak,bm)local ab=dM[ak]if ab==nil then return bm else return ab end end,SetProperty=function(ak,ab)if ak==dK then error('LocalSharedProperties: Invalid argument: key = ',ak,2)end;local cV=vci.me.UnscaledTime;local dO=dM[ak]dM[ak]=ab;for dP,dj in pairs(dN)do local bZ=dL[dj]if bZ and bZ+dI>=cV then dP(self,ak,ab,dO)else dP(self,a.LOCAL_SHARED_PROPERTY_EXPIRED_KEY,true,false)dN[dP]=nil;dL[dj]=nil end end end,Clear=function()for ak,ab in pairs(dM)do if ak~=dK then self.SetProperty(ak,nil)end end end,Each=function(bh)for ak,ab in pairs(dM)do if ak~=dK and bh(ab,ak,self)==false then return false end end end,AddListener=function(dP)dN[dP]=dH end,RemoveListener=function(dP)dN[dP]=nil end,UpdateAlive=function()dL[dH]=vci.me.UnscaledTime end}return self end,EstimateFixedTimestep=function(dQ)local dR=1.0;local dS=1000.0;local dT=TimeSpan.FromSeconds(0.02)local dU=0xFFFF;local dV=a.CreateCircularQueue(64)local dW=TimeSpan.FromSeconds(5)local dX=TimeSpan.FromSeconds(30)local dY=false;local dZ=vci.me.Time;local d_=a.Random32()local e0=Vector3.__new(bit32.bor(0x400,bit32.band(d_,0x1FFF)),bit32.bor(0x400,bit32.band(bit32.rshift(d_,16),0x1FFF)),0.0)dQ.SetPosition(e0)dQ.SetRotation(Quaternion.identity)dQ.SetVelocity(Vector3.zero)dQ.SetAngularVelocity(Vector3.zero)dQ.AddForce(Vector3.__new(0.0,0.0,dR*dS))local self={Timestep=function()return dT end,Precision=function()return dU end,IsFinished=function()return dY end,Update=function()if dY then return dT end;local e1=vci.me.Time-dZ;local e2=e1.TotalSeconds;if e2<=Vector3.kEpsilon then return dT end;local e3=dQ.GetPosition().z-e0.z;local e4=e3/e2;local e5=e4/dS;if e5<=Vector3.kEpsilon then return dT end;dV.Offer(e5)local e6=dV.Size()if e6>=2 and e1>=dW then local e7=0.0;for a8=1,e6 do e7=e7+dV.Get(a8)end;local e8=e7/e6;local e9=0.0;for a8=1,e6 do e9=e9+(dV.Get(a8)-e8)^2 end;local ea=e9/e6;if ea<dU then dU=ea;dT=TimeSpan.FromSeconds(e8)end;if e1>dX then dY=true;dQ.SetPosition(e0)dQ.SetRotation(Quaternion.identity)dQ.SetVelocity(Vector3.zero)dQ.SetAngularVelocity(Vector3.zero)end else dT=TimeSpan.FromSeconds(e5)end;return dT end}return self end,AlignSubItemOrigin=function(eb,ec,ed)local ee=eb.GetRotation()if not a.QuaternionApproximatelyEquals(ec.GetRotation(),ee)then ec.SetRotation(ee)end;local ef=eb.GetPosition()if not a.VectorApproximatelyEquals(ec.GetPosition(),ef)then ec.SetPosition(ef)end;if ed then ec.SetVelocity(Vector3.zero)ec.SetAngularVelocity(Vector3.zero)end end,CreateSubItemGlue=function()local eg={}local self;self={Contains=function(eh,ei)return a.NillableIfHasValueOrElse(eg[eh],function(bP)return a.NillableHasValue(bP[ei])end,function()return false end)end,Add=function(eh,ej,ed)if not eh or not ej then local ek='SubItemGlue.Add: Invalid arguments '..(not eh and', parent = '..tostring(eh)or'')..(not ej and', children = '..tostring(ej)or'')error(ek,2)end;local bP=a.NillableIfHasValueOrElse(eg[eh],function(el)return el end,function()local el={}eg[eh]=el;return el end)if type(ej)=='table'then for ak,aY in pairs(ej)do bP[aY]={velocityReset=not not ed}end else bP[ej]={velocityReset=not not ed}end end,Remove=function(eh,ei)return a.NillableIfHasValueOrElse(eg[eh],function(bP)if a.NillableHasValue(bP[ei])then bP[ei]=nil;return true else return false end end,function()return false end)end,RemoveParent=function(eh)if a.NillableHasValue(eg[eh])then eg[eh]=nil;return true else return false end end,RemoveAll=function()eg={}return true end,Each=function(bh,em)return a.NillableIfHasValueOrElse(em,function(eh)return a.NillableIfHasValue(eg[eh],function(bP)for ei,en in pairs(bP)do if bh(ei,eh,self)==false then return false end end end)end,function()for eh,bP in pairs(eg)do if self.Each(bh,eh)==false then return false end end end)end,Update=function(eo)for eh,bP in pairs(eg)do local ep=eh.GetPosition()local eq=eh.GetRotation()for ei,en in pairs(bP)do if eo or ei.IsMine then if not a.QuaternionApproximatelyEquals(ei.GetRotation(),eq)then ei.SetRotation(eq)end;if not a.VectorApproximatelyEquals(ei.GetPosition(),ep)then ei.SetPosition(ep)end;if en.velocityReset then ei.SetVelocity(Vector3.zero)ei.SetAngularVelocity(Vector3.zero)end end end end end}return self end,CreateUpdateRoutine=function(er,es)return coroutine.wrap(function()local et=TimeSpan.FromSeconds(30)local eu=vci.me.UnscaledTime;local ev=eu;local cS=vci.me.Time;local ew=true;while true do local dj=a.InstanceID()if dj~=''then break end;local ex=vci.me.UnscaledTime;if ex-et>eu then a.LogError('TIMEOUT: Could not receive Instance ID.')return-1 end;ev=ex;cS=vci.me.Time;ew=false;coroutine.yield(100)end;if ew then ev=vci.me.UnscaledTime;cS=vci.me.Time;coroutine.yield(100)end;a.NillableIfHasValue(es,function(ey)ey()end)while true do local cV=vci.me.Time;local ez=cV-cS;local ex=vci.me.UnscaledTime;local eA=ex-ev;er(ez,eA)cS=cV;ev=ex;coroutine.yield(100)end end)end,CreateSlideSwitch=function(eB)local eC=a.NillableValue(eB.colliderItem)local eD=a.NillableValue(eB.baseItem)local eE=a.NillableValue(eB.knobItem)local eF=a.NillableValueOrDefault(eB.minValue,0)local eG=a.NillableValueOrDefault(eB.maxValue,10)if eF>=eG then error('SlideSwitch: Invalid argument: minValue >= maxValue',2)end;local eH=(eF+eG)*0.5;local eI=function(aY)local eJ,eK=a.PingPong(aY-eF,eG-eF)return eJ+eF,eK end;local ab=eI(a.NillableValueOrDefault(eB.value,0))local eL=a.NillableIfHasValueOrElse(eB.tickFrequency,function(eM)if eM<=0 then error('SlideSwitch: Invalid argument: tickFrequency <= 0',3)end;return math.min(eM,eG-eF)end,function()return(eG-eF)/10.0 end)local eN=a.NillableIfHasValueOrElse(eB.tickVector,function(cp)return Vector3.__new(cp.x,cp.y,cp.z)end,function()return Vector3.__new(0.01,0.0,0.0)end)local eO=eN.magnitude;if eO<Vector3.kEpsilon then error('SlideSwitch: Invalid argument: tickVector is too small',2)end;local eP=a.NillableValueOrDefault(eB.snapToTick,true)local eQ=eB.valueTextName;local eR=a.NillableValueOrDefault(eB.valueToText,tostring)local eS=TimeSpan.FromMilliseconds(1000)local eT=TimeSpan.FromMilliseconds(50)local eU,eV;local dN={}local self;local eW=false;local eX=0;local eY=false;local eZ=TimeSpan.Zero;local e_=TimeSpan.Zero;local f0=function(f1,f2)if f2 or f1~=ab then local dO=ab;ab=f1;for dP,ap in pairs(dN)do dP(self,ab,dO)end end;eE.SetLocalPosition((f1-eH)/eL*eN)if eQ then vci.assets.SetText(eQ,eR(f1,self))end end;local f3=function()local f4=eU()local f5,f6=eI(f4)local f7=f4+eL;local f8,f9=eI(f7)assert(f8)local f1;if f6==f9 or f5==eG or f5==eF then f1=f7 else f1=f6>=0 and eG or eF end;e_=vci.me.UnscaledTime;if f1==eG or f1==eF then eZ=e_ end;eV(f1)end;a.NillableIfHasValueOrElse(eB.lsp,function(fa)if not a.NillableHasValue(eB.propertyName)then error('SlideSwitch: Invalid argument: propertyName is nil',3)end;local fb=a.NillableValue(eB.propertyName)eU=function()return fa.GetProperty(fb,ab)end;eV=function(aY)fa.SetProperty(fb,aY)end;fa.AddListener(function(bQ,ak,fc,fd)if ak==fb then f0(eI(fc),true)end end)end,function()local fc=ab;eU=function()return fc end;eV=function(aY)fc=aY;f0(eI(aY),true)end end)self={GetColliderItem=function()return eC end,GetBaseItem=function()return eD end,GetKnobItem=function()return eE end,GetMinValue=function()return eF end,GetMaxValue=function()return eG end,GetValue=function()return ab end,GetScaleValue=function(fe,ff)assert(fe<=ff)return fe+(ff-fe)*(ab-eF)/(eG-eF)end,SetValue=function(aY)eV(eI(aY))end,GetTickFrequency=function()return eL end,IsSnapToTick=function()return eP end,AddListener=function(dP)dN[dP]=dP end,RemoveListener=function(dP)dN[dP]=nil end,DoUse=function()if not eW then eY=true;eZ=vci.me.UnscaledTime;f3()end end,DoUnuse=function()eY=false end,DoGrab=function()if not eY then eW=true;eX=(ab-eH)/eL end end,DoUngrab=function()eW=false end,Update=function()if eW then local fg=eC.GetPosition()-eD.GetPosition()local fh=eE.GetRotation()*eN;local fi=Vector3.Project(fg,fh)local fj=(Vector3.Dot(fh,fi)>=0 and 1 or-1)*fi.magnitude/eO+eX;local fk=(eP and a.Round(fj)or fj)*eL+eH;local f1=a.Clamp(fk,eF,eG)if f1~=ab then eV(f1)end elseif eY then local fl=vci.me.UnscaledTime;if fl>=eZ+eS and fl>=e_+eT then f3()end elseif eC.IsMine then a.AlignSubItemOrigin(eD,eC)end end}f0(eI(eU()),false)return self end,
CreateSubItemConnector=function()local fm=function(fn,ec,fo)fn.item=ec;fn.position=ec.GetPosition()fn.rotation=ec.GetRotation()fn.initialPosition=fn.position;fn.initialRotation=fn.rotation;fn.propagation=not not fo;return fn end;local fp=function(fq)for ec,fn in pairs(fq)do fm(fn,ec,fn.propagation)end end;local fr=function(s,cD,fn,fs,ft)local fg=s-fn.initialPosition;local fu=cD*Quaternion.Inverse(fn.initialRotation)fn.position=s;fn.rotation=cD;for ec,fv in pairs(fs)do if ec~=fn.item and(not ft or ft(fv))then fv.position,fv.rotation=a.RotateAround(fv.initialPosition+fg,fv.initialRotation,s,fu)ec.SetPosition(fv.position)ec.SetRotation(fv.rotation)end end end;local fw={}local fx=true;local fy=false;local self;self={IsEnabled=function()return fx end,SetEnabled=function(c2)fx=c2;if c2 then fp(fw)fy=false end end,Contains=function(fz)return a.NillableHasValue(fw[fz])end,Add=function(fA,fB)if not fA then error('SubItemConnector.Add: Invalid argument: subItems = '..tostring(fA),2)end;local fC=type(fA)=='table'and fA or{fA}fp(fw)fy=false;for ay,ec in pairs(fC)do fw[ec]=fm({},ec,not fB)end end,Remove=function(fz)local N=a.NillableHasValue(fw[fz])fw[fz]=nil;return N end,RemoveAll=function()fw={}return true end,Each=function(bh)for ec,fn in pairs(fw)do if bh(ec,self)==false then return false end end end,GetItems=function()local fC={}for ec,fn in pairs(fw)do table.insert(fC,ec)end;return fC end,Update=function()if not fx then return end;local fD=false;for ec,fn in pairs(fw)do local bL=ec.GetPosition()local fE=ec.GetRotation()if not a.VectorApproximatelyEquals(bL,fn.position)or not a.QuaternionApproximatelyEquals(fE,fn.rotation)then if fn.propagation then if ec.IsMine then fr(bL,fE,fw[ec],fw,function(fv)if fv.item.IsMine then return true else fy=true;return false end end)fD=true;break else fy=true end else fy=true end end end;if not fD and fy then fp(fw)fy=false end end}return self end,GetSubItemTransform=function(fz)local s=fz.GetPosition()local cD=fz.GetRotation()local fF=fz.GetLocalScale()return{positionX=s.x,positionY=s.y,positionZ=s.z,rotationX=cD.x,rotationY=cD.y,rotationZ=cD.z,rotationW=cD.w,scaleX=fF.x,scaleY=fF.y,scaleZ=fF.z}end}a.SetConstEach(a,{LogLevelOff=0,LogLevelFatal=100,LogLevelError=200,LogLevelWarn=300,LogLevelInfo=400,LogLevelDebug=500,LogLevelTrace=600,LogLevelAll=0x7FFFFFFF,ColorHueSamples=10,ColorSaturationSamples=4,ColorBrightnessSamples=5,EscapeSequenceTag='#__CYTANB',SolidusTag='#__CYTANB_SOLIDUS',NegativeNumberTag='#__CYTANB_NEGATIVE_NUMBER',ArrayNumberTag='#__CYTANB_ARRAY_NUMBER',InstanceIDParameterName='__CYTANB_INSTANCE_ID',MessageValueParameterName='__CYTANB_MESSAGE_VALUE',MessageSenderOverride='__CYTANB_MESSAGE_SENDER_OVERRIDE',MessageOriginalSender='__CYTANB_MESSAGE_ORIGINAL_SENDER',TypeParameterName='__CYTANB_TYPE',ColorTypeName='Color',Vector2TypeName='Vector2',Vector3TypeName='Vector3',Vector4TypeName='Vector4',QuaternionTypeName='Quaternion',DedicatedCommentMessageName='cytanb.comment.a2a6a035-6b8d-4e06-b4f9-07e6209b0639',DedicatedNotificationMessageName='cytanb.notification.698ba55f-2b69-47f2-a68d-bc303994cff3',LOCAL_SHARED_PROPERTY_EXPIRED_KEY='__CYTANB_LOCAL_SHARED_PROPERTY_EXPIRED'})a.SetConstEach(a,{ColorMapSize=a.ColorHueSamples*a.ColorSaturationSamples*a.ColorBrightnessSamples,FatalLogLevel=a.LogLevelFatal,ErrorLogLevel=a.LogLevelError,WarnLogLevel=a.LogLevelWarn,InfoLogLevel=a.LogLevelInfo,DebugLogLevel=a.LogLevelDebug,TraceLogLevel=a.LogLevelTrace})d=a.MakeSearchPattern({'\t','\n','\v','\f','\r',' '},1,-1)e=a.MakeSearchPattern({'sprite=','SPRITE='})f=a.MakeSearchPattern({'0','1','2','3','4','5','6','7','8','9'},1,9)g,h=(function()local fG={'A','B','C','D','E','F','a','b','c','d','e','f','0','1','2','3','4','5','6','7','8','9'}return a.MakeSearchPattern(fG,4,4),a.MakeSearchPattern(fG,8,8)end)()i=a.MakeSearchPattern({'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','_','-','.','(',')','!','~','*','\'','%'},1,-1)j={{tag=a.NegativeNumberTag,search=a.NegativeNumberTag,replacement=''},{tag=a.ArrayNumberTag,search=a.ArrayNumberTag,replacement=''},{tag=a.SolidusTag,search=a.SolidusTag,replacement='/'},{tag=a.EscapeSequenceTag,search=a.EscapeSequenceTag..a.EscapeSequenceTag,replacement=a.EscapeSequenceTag}}k={[a.ColorTypeName]={compositionFieldNames=a.ListToMap({'r','g','b','a'}),compositionFieldLength=4,toTableFunc=a.ColorToTable,fromTableFunc=a.ColorFromTable},[a.Vector2TypeName]={compositionFieldNames=a.ListToMap({'x','y'}),compositionFieldLength=2,toTableFunc=a.Vector2ToTable,fromTableFunc=a.Vector2FromTable},[a.Vector3TypeName]={compositionFieldNames=a.ListToMap({'x','y','z'}),compositionFieldLength=3,toTableFunc=a.Vector3ToTable,fromTableFunc=a.Vector3FromTable},[a.Vector4TypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.Vector4ToTable,fromTableFunc=a.Vector4FromTable},[a.QuaternionTypeName]={compositionFieldNames=a.ListToMap({'x','y','z','w'}),compositionFieldLength=4,toTableFunc=a.QuaternionToTable,fromTableFunc=a.QuaternionFromTable}}l=a.ListToMap({a.NegativeNumberTag,a.ArrayNumberTag})m=a.LogLevelInfo;o={[a.LogLevelFatal]='FATAL',[a.LogLevelError]='ERROR',[a.LogLevelWarn]='WARN',[a.LogLevelInfo]='INFO',[a.LogLevelDebug]='DEBUG',[a.LogLevelTrace]='TRACE'}p,q=(function()local dG='eff3a188-bfc7-4b0e-93cb-90fd1adc508c'local dM=_G[dG]if not dM then dM={}_G[dG]=dM end;local fH=dM.randomSeedValue;if not fH then fH=os.time()-os.clock()*10000;dM.randomSeedValue=fH;math.randomseed(fH)end;local fI=dM.clientID;if type(fI)~='string'then fI=tostring(a.RandomUUID())dM.clientID=fI end;local fJ=vci.state.Get(c)or''if fJ==''and vci.assets.IsMine then fJ=tostring(a.RandomUUID())vci.state.Set(c,fJ)end;return fJ,fI end)()return a end;if __CYTANB_EXPORT_MODULE then return setmetatable({},{__call=function(self,_ENV)return b(_ENV)end})else return b(_ENV)end end)()if __CYTANB_EXPORT_MODULE then return cytanb end
